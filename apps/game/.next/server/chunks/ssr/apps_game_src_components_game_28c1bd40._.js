module.exports=[45296,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(5050);let f=(0,e.createServerReference)("60f9b640f99ec120bcc73f4954089ebe5edac02354",e.callServer,void 0,e.findSourceMapURL,"createTeam");var g=a.i(80966),h=a.i(36602),i=a.i(16802),j=a.i(60246),k=a.i(23292);function l({gameId:a}){(0,d.useRouter)();let[e,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),o=(0,c.useRef)(!1),p=async()=>{if(console.log("[TeamReg] Button clicked!"),!e.trim())return void console.log("[TeamReg] Empty team name, returning");if(o.current)return void console.log("[TeamReg] Already submitting, ignoring click");console.log("[TeamReg] Starting submission for team:",e),o.current=!0,n(!0);try{console.log("[TeamReg] Calling createTeam server action...");let b=await f(a,e);console.log("[TeamReg] createTeam returned:",b),k.toast.success("Team created! Reloading..."),console.log("[TeamReg] About to call window.location.reload()"),window.location.reload()}catch(a){console.error("[TeamReg] Error creating team:",a),o.current=!1,n(!1),k.toast.error("Failed to join",{description:a instanceof Error?a.message:"Unknown error"})}};return(0,b.jsxs)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative",children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,b.jsxs)(i.Card,{variant:"glass",className:"w-full max-w-md",children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(j.Users,{className:"w-8 h-8 text-blue-500"}),(0,b.jsxs)("span",{className:"text-muted-foreground font-mono text-xs",children:["GAME ID: ",a.slice(0,8),"..."]})]}),(0,b.jsx)(i.CardTitle,{className:"text-foreground text-2xl",children:"Create Your Team"}),(0,b.jsx)(i.CardDescription,{className:"text-muted-foreground",children:"Enter a name for your agency. This will be visible on the leaderboard."})]}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Team Name"}),(0,b.jsx)(h.Input,{placeholder:"e.g. Growth Hackers",value:e,onChange:a=>l(a.target.value),className:"bg-white/5 border-white/5 text-foreground focus:ring-white/20"})]}),(0,b.jsx)(g.Button,{onClick:p,disabled:m||!e.trim(),variant:"default",className:"w-full",children:m?"Joining...":"Enter Simulation"})]})]})]})}a.s(["default",()=>l],45296)},34570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(94967),e=a.i(93386),f={};!function a(b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=!!(b.Worker&&b.Blob&&b.Promise&&b.OffscreenCanvas&&b.OffscreenCanvasRenderingContext2D&&b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype.transferControlToOffscreen&&b.URL&&b.URL.createObjectURL),r="function"==typeof Path2D&&"function"==typeof DOMMatrix;function s(){}function t(a){var d=c.exports.Promise,e=void 0!==d?d:b.Promise;return"function"==typeof e?new e(a):(a(s,s),null)}var u=(f=function(){if(!b.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),c=a.getContext("2d");c.fillRect(0,0,1,1);var d=a.transferToImageBitmap();c.createPattern(d,"no-repeat")}catch(a){return!1}return!0}(),g=new Map,{transform:function(a){if(f)return a;if(g.has(a))return g.get(a);var b=new OffscreenCanvas(a.width,a.height);return b.getContext("2d").drawImage(a,0,0),g.set(a,b),b},clear:function(){g.clear()}}),v=(j=Math.floor(1e3/60),k={},l=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(h=function(a){var b=Math.random();return k[b]=requestAnimationFrame(function c(d){l===d||l+j-1<d?(l=d,delete k[b],a()):k[b]=requestAnimationFrame(c)}),b},i=function(a){k[a]&&cancelAnimationFrame(k[a])}):(h=function(a){return setTimeout(a,j)},i=function(a){return clearTimeout(a)}),{frame:h,cancel:i}),w=(o={},function(){if(m)return m;if(!d&&q){var b=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{m=new Worker(URL.createObjectURL(new Blob([b])))}catch(a){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",a),null}var c=m;function e(a,b){c.postMessage({options:a||{},callback:b})}c.init=function(a){var b=a.transferControlToOffscreen();c.postMessage({canvas:b},[b])},c.fire=function(a,b,d){if(n)return e(a,null),n;var f=Math.random().toString(36).slice(2);return n=t(function(b){function g(a){a.data.callback===f&&(delete o[f],c.removeEventListener("message",g),n=null,u.clear(),d(),b())}c.addEventListener("message",g),e(a,f),o[f]=g.bind(null,{data:{callback:f}})})},c.reset=function(){for(var a in c.postMessage({reset:!0}),o)o[a](),delete o[a]}}return m}),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function y(a,b,c){var d;return d=a&&null!=a[b]?a[b]:x[b],c?c(d):d}function z(a){return a<0?0:Math.floor(a)}function A(a){return parseInt(a,16)}function B(a){return a.map(C)}function C(a){var b=String(a).replace(/[^0-9a-f]/gi,"");return b.length<6&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),{r:A(b.substring(0,2)),g:A(b.substring(2,4)),b:A(b.substring(4,6))}}function D(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function E(a){var b=a.getBoundingClientRect();a.width=b.width,a.height=b.height}function F(a,c){var f,g=!a,h=!!y(c||{},"resize"),i=!1,j=y(c,"disableForReducedMotion",Boolean),k=q&&y(c||{},"useWorker")?w():null,l=g?D:E,m=!!a&&!!k&&!!a.__confetti_initialized,n="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function o(c){var o,p=j||y(c,"disableForReducedMotion",Boolean),q=y(c,"zIndex",Number);if(p&&n)return t(function(a){a()});g&&f?a=f.canvas:g&&!a&&((o=document.createElement("canvas")).style.position="fixed",o.style.top="0px",o.style.left="0px",o.style.pointerEvents="none",o.style.zIndex=q,a=o,document.body.appendChild(a)),h&&!m&&l(a);var s={width:a.width,height:a.height};function w(){if(k){var b={getBoundingClientRect:function(){if(!g)return a.getBoundingClientRect()}};l(b),k.postMessage({resize:{width:b.width,height:b.height}});return}s.width=s.height=null}function x(){f=null,h&&(i=!1,b.removeEventListener("resize",w)),g&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,m=!1)}return(k&&!m&&k.init(a),m=!0,k&&(a.__confetti_initialized=!0),h&&!i&&(i=!0,b.addEventListener("resize",w,!1)),k)?k.fire(c,s,x):function(b,c,g){for(var h,i,j,k,m,n,o,p=y(b,"particleCount",z),q=y(b,"angle",Number),s=y(b,"spread",Number),w=y(b,"startVelocity",Number),x=y(b,"decay",Number),A=y(b,"gravity",Number),C=y(b,"drift",Number),D=y(b,"colors",B),E=y(b,"ticks",Number),F=y(b,"shapes"),G=y(b,"scalar"),H=!!y(b,"flat"),I=((h=y(b,"origin",Object)).x=y(h,"x",Number),h.y=y(h,"y",Number),h),J=p,K=[],L=a.width*I.x,M=a.height*I.y;J--;)K.push(function(a){var b=a.angle*(Math.PI/180),c=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*a.startVelocity+Math.random()*a.startVelocity,angle2D:-b+(.5*c-Math.random()*c),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*a.gravity,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}({x:L,y:M,angle:q,spread:s,startVelocity:w,color:D[J%D.length],shape:F[Math.floor(Math.random()*(F.length-0))+0],ticks:E,decay:x,gravity:A,drift:C,scalar:G,flat:H}));return f?f.addFettis(K):(i=a,m=K.slice(),n=i.getContext("2d"),o=t(function(a){function b(){j=k=null,n.clearRect(0,0,c.width,c.height),u.clear(),g(),a()}j=v.frame(function a(){d&&(c.width!==e.width||c.height!==e.height)&&(c.width=i.width=e.width,c.height=i.height=e.height),c.width||c.height||(l(i),c.width=i.width,c.height=i.height),n.clearRect(0,0,c.width,c.height),(m=m.filter(function(a){return function(a,b){b.x+=Math.cos(b.angle2D)*b.velocity+b.drift,b.y+=Math.sin(b.angle2D)*b.velocity+b.gravity,b.velocity*=b.decay,b.flat?(b.wobble=0,b.wobbleX=b.x+10*b.scalar,b.wobbleY=b.y+10*b.scalar,b.tiltSin=0,b.tiltCos=0,b.random=1):(b.wobble+=b.wobbleSpeed,b.wobbleX=b.x+10*b.scalar*Math.cos(b.wobble),b.wobbleY=b.y+10*b.scalar*Math.sin(b.wobble),b.tiltAngle+=.1,b.tiltSin=Math.sin(b.tiltAngle),b.tiltCos=Math.cos(b.tiltAngle),b.random=Math.random()+2);var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t=b.tick++/b.totalTicks,v=b.x+b.random*b.tiltCos,w=b.y+b.random*b.tiltSin,x=b.wobbleX+b.random*b.tiltCos,y=b.wobbleY+b.random*b.tiltSin;if(a.fillStyle="rgba("+b.color.r+", "+b.color.g+", "+b.color.b+", "+(1-t)+")",a.beginPath(),r&&"path"===b.shape.type&&"string"==typeof b.shape.path&&Array.isArray(b.shape.matrix)){a.fill((c=b.shape.path,d=b.shape.matrix,e=b.x,f=b.y,g=.1*Math.abs(x-v),h=.1*Math.abs(y-w),i=Math.PI/10*b.wobble,j=new Path2D(c),(k=new Path2D).addPath(j,new DOMMatrix(d)),(l=new Path2D).addPath(k,new DOMMatrix([Math.cos(i)*g,Math.sin(i)*g,-Math.sin(i)*h,Math.cos(i)*h,e,f])),l))}else if("bitmap"===b.shape.type){var z=Math.PI/10*b.wobble,A=.1*Math.abs(x-v),B=.1*Math.abs(y-w),C=b.shape.bitmap.width*b.scalar,D=b.shape.bitmap.height*b.scalar,E=new DOMMatrix([Math.cos(z)*A,Math.sin(z)*A,-Math.sin(z)*B,Math.cos(z)*B,b.x,b.y]);E.multiplySelf(new DOMMatrix(b.shape.matrix));var F=a.createPattern(u.transform(b.shape.bitmap),"no-repeat");F.setTransform(E),a.globalAlpha=1-t,a.fillStyle=F,a.fillRect(b.x-C/2,b.y-D/2,C,D),a.globalAlpha=1}else if("circle"===b.shape)a.ellipse?a.ellipse(b.x,b.y,Math.abs(x-v)*b.ovalScalar,Math.abs(y-w)*b.ovalScalar,Math.PI/10*b.wobble,0,2*Math.PI):(m=b.x,n=b.y,o=Math.abs(x-v)*b.ovalScalar,p=Math.abs(y-w)*b.ovalScalar,q=Math.PI/10*b.wobble,s=2*Math.PI,a.save(),a.translate(m,n),a.rotate(q),a.scale(o,p),a.arc(0,0,1,0,s,void 0),a.restore());else if("star"===b.shape)for(var G=Math.PI/2*3,H=4*b.scalar,I=8*b.scalar,J=b.x,K=b.y,L=5,M=Math.PI/5;L--;)J=b.x+Math.cos(G)*I,K=b.y+Math.sin(G)*I,a.lineTo(J,K),G+=M,J=b.x+Math.cos(G)*H,K=b.y+Math.sin(G)*H,a.lineTo(J,K),G+=M;else a.moveTo(Math.floor(b.x),Math.floor(b.y)),a.lineTo(Math.floor(b.wobbleX),Math.floor(w)),a.lineTo(Math.floor(x),Math.floor(y)),a.lineTo(Math.floor(v),Math.floor(b.wobbleY));return a.closePath(),a.fill(),b.tick<b.totalTicks}(n,a)})).length?j=v.frame(a):b()}),k=b}),(f={addFettis:function(a){return m=m.concat(a),o},canvas:i,promise:o,reset:function(){j&&v.cancel(j),k&&k()}}).promise)}(c,s,x)}return o.reset=function(){k&&k.reset(),f&&f.reset()},o}function G(){return p||(p=F(null,{useWorker:!0,resize:!0})),p}c.exports=function(){return G().apply(this,arguments)},c.exports.reset=function(){G().reset()},c.exports.create=F,c.exports.shapeFromPath=function(a){if(!r)throw Error("path confetti are not supported in this browser");"string"==typeof a?d=a:(d=a.path,e=a.matrix);var b=new Path2D(d),c=document.createElement("canvas").getContext("2d");if(!e){for(var d,e,f,g,h=1e3,i=1e3,j=0,k=0,l=0;l<1e3;l+=2)for(var m=0;m<1e3;m+=2)c.isPointInPath(b,l,m,"nonzero")&&(h=Math.min(h,l),i=Math.min(i,m),j=Math.max(j,l),k=Math.max(k,m));f=j-h;var n=Math.min(10/f,10/(g=k-i));e=[n,0,0,n,-Math.round(f/2+h)*n,-Math.round(g/2+i)*n]}return{type:"path",path:d,matrix:e}},c.exports.shapeFromText=function(a){var b,c=1,d="#000000",e='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof a?b=a:(b=a.text,c="scalar"in a?a.scalar:c,e="fontFamily"in a?a.fontFamily:e,d="color"in a?a.color:d);var f=10*c,g=""+f+"px "+e,h=new OffscreenCanvas(f,f),i=h.getContext("2d");i.font=g;var j=i.measureText(b),k=Math.ceil(j.actualBoundingBoxRight+j.actualBoundingBoxLeft),l=Math.ceil(j.actualBoundingBoxAscent+j.actualBoundingBoxDescent),m=j.actualBoundingBoxLeft+2,n=j.actualBoundingBoxAscent+2;k+=4,l+=4,(i=(h=new OffscreenCanvas(k,l)).getContext("2d")).font=g,i.fillStyle=d,i.fillText(b,m,n);var o=1/c;return{type:"bitmap",bitmap:h.transferToImageBitmap(),matrix:[o,0,0,o,-k*o/2,-l*o/2]}}}(function(){return"undefined"!=typeof self?self:this||{}}(),f,!1);let g=f.exports;f.exports.create;var h=a.i(5050);let i=(0,h.createServerReference)("783947e2bd01bdd67692ee64fbc381260478a18fb1",h.callServer,void 0,h.findSourceMapURL,"submitDecision"),j=(0,h.createServerReference)("40f7d502f1905578d7237e9191b177cd2c617686d6",h.callServer,void 0,h.findSourceMapURL,"processRound"),k=(0,h.createServerReference)("40d86802a7cfd4de90f6f204e55e140f6117a9b2c0",h.callServer,void 0,h.findSourceMapURL,"startGame");var l=a.i(80966),m=a.i(36602);function n(a,[b,c]){return Math.min(c,Math.max(b,a))}var o=a.i(7554),p=a.i(70121),q=a.i(25152),r=a.i(7827),s=a.i(3688);a.i(35112);var t=Symbol("radix.slottable");function u(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===t}var v=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{var e,f;let g,h,i,j=(f=e=`Primitive.${d}`,(g=c.forwardRef((a,b)=>{let{children:d,...e}=a;if(c.isValidElement(d)){var f;let a,g,h=(f=d,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,d.props);return d.type!==c.Fragment&&(i.ref=b?(0,p.composeRefs)(b,h):h),c.cloneElement(d,i)}return c.Children.count(d)>1?c.Children.only(null):null})).displayName=`${f}.SlotClone`,h=g,(i=c.forwardRef((a,d)=>{let{children:e,...f}=a,g=c.Children.toArray(e),i=g.find(u);if(i){let a=i.props.children,e=g.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(h,{...f,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(h,{...f,ref:d,children:e})})).displayName=`${e}.Slot`,i),k=c.forwardRef((a,c)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?j:d,{...f,ref:c})});return k.displayName=`Primitive.${d}`,{...a,[d]:k}},{}),w=a.i(37738),x=["PageUp","PageDown"],y=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],z={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},A="Slider",[B,C,D]=(0,w.createCollection)(A),[E,F]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(A,[D]),[G,H]=E(A),I=c.forwardRef((a,d)=>{let{name:e,min:f=0,max:g=100,step:h=1,orientation:i="horizontal",disabled:j=!1,minStepsBetweenThumbs:k=0,defaultValue:l=[f],value:m,onValueChange:p=()=>{},onValueCommit:r=()=>{},inverted:s=!1,form:t,...u}=a,v=c.useRef(new Set),w=c.useRef(0),z="horizontal"===i,[A=[],C]=(0,q.useControllableState)({prop:m,defaultProp:l,onChange:a=>{let b=[...v.current];b[w.current]?.focus(),p(a)}}),D=c.useRef(A);function E(a,b,{commit:c}={commit:!1}){let d,e=(String(h).split(".")[1]||"").length,i=n(Math.round((Math.round((a-f)/h)*h+f)*(d=Math.pow(10,e)))/d,[f,g]);C((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,i,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,k*h))return a;{w.current=d.indexOf(i);let b=String(d)!==String(a);return b&&c&&r(d),b?d:a}})}return(0,b.jsx)(G,{scope:a.__scopeSlider,name:e,disabled:j,min:f,max:g,valueIndexToChangeRef:w,thumbs:v.current,values:A,orientation:i,form:t,children:(0,b.jsx)(B.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(B.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(z?L:M,{"aria-disabled":j,"data-disabled":j?"":void 0,...u,ref:d,onPointerDown:(0,o.composeEventHandlers)(u.onPointerDown,()=>{j||(D.current=A)}),min:f,max:g,inverted:s,onSlideStart:j?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(A,a);E(a,b)},onSlideMove:j?void 0:function(a){E(a,w.current)},onSlideEnd:j?void 0:function(){let a=D.current[w.current];A[w.current]!==a&&r(A)},onHomeKeyDown:()=>!j&&E(f,0,{commit:!0}),onEndKeyDown:()=>!j&&E(g,A.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!j){let c=x.includes(a.key)||a.shiftKey&&y.includes(a.key),d=w.current;E(A[d]+h*(c?10:1)*b,d,{commit:!0})}}})})})})});I.displayName=A;var[J,K]=E(A,{startEdge:"left",endEdge:"right",size:"width",direction:1}),L=c.forwardRef((a,d)=>{let{min:e,max:f,dir:g,inverted:h,onSlideStart:i,onSlideMove:j,onSlideEnd:k,onStepKeyDown:l,...m}=a,[n,o]=c.useState(null),q=(0,p.useComposedRefs)(d,a=>o(a)),s=c.useRef(void 0),t=(0,r.useDirection)(g),u="ltr"===t,v=u&&!h||!u&&h;function w(a){let b=s.current||n.getBoundingClientRect(),c=X([0,b.width],v?[e,f]:[f,e]);return s.current=b,c(a-b.left)}return(0,b.jsx)(J,{scope:a.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:(0,b.jsx)(N,{dir:t,"data-orientation":"horizontal",...m,ref:q,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=w(a.clientX);i?.(b)},onSlideMove:a=>{let b=w(a.clientX);j?.(b)},onSlideEnd:()=>{s.current=void 0,k?.()},onStepKeyDown:a=>{let b=z[v?"from-left":"from-right"].includes(a.key);l?.({event:a,direction:b?-1:1})}})})}),M=c.forwardRef((a,d)=>{let{min:e,max:f,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:j,onStepKeyDown:k,...l}=a,m=c.useRef(null),n=(0,p.useComposedRefs)(d,m),o=c.useRef(void 0),q=!g;function r(a){let b=o.current||m.current.getBoundingClientRect(),c=X([0,b.height],q?[f,e]:[e,f]);return o.current=b,c(a-b.top)}return(0,b.jsx)(J,{scope:a.__scopeSlider,startEdge:q?"bottom":"top",endEdge:q?"top":"bottom",size:"height",direction:q?1:-1,children:(0,b.jsx)(N,{"data-orientation":"vertical",...l,ref:n,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=r(a.clientY);h?.(b)},onSlideMove:a=>{let b=r(a.clientY);i?.(b)},onSlideEnd:()=>{o.current=void 0,j?.()},onStepKeyDown:a=>{let b=z[q?"from-bottom":"from-top"].includes(a.key);k?.({event:a,direction:b?-1:1})}})})}),N=c.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:h,onEndKeyDown:i,onStepKeyDown:j,...k}=a,l=H(A,d);return(0,b.jsx)(v.span,{...k,ref:c,onKeyDown:(0,o.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(h(a),a.preventDefault()):"End"===a.key?(i(a),a.preventDefault()):x.concat(y).includes(a.key)&&(j(a),a.preventDefault())}),onPointerDown:(0,o.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,o.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,o.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),O="SliderTrack",P=c.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=H(O,d);return(0,b.jsx)(v.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});P.displayName=O;var Q="SliderRange",R=c.forwardRef((a,d)=>{let{__scopeSlider:e,...f}=a,g=H(Q,e),h=K(Q,e),i=c.useRef(null),j=(0,p.useComposedRefs)(d,i),k=g.values.length,l=g.values.map(a=>W(a,g.min,g.max)),m=k>1?Math.min(...l):0,n=100-Math.max(...l);return(0,b.jsx)(v.span,{"data-orientation":g.orientation,"data-disabled":g.disabled?"":void 0,...f,ref:j,style:{...a.style,[h.startEdge]:m+"%",[h.endEdge]:n+"%"}})});R.displayName=Q;var S="SliderThumb",T=c.forwardRef((a,d)=>{let e=C(a.__scopeSlider),[f,g]=c.useState(null),h=(0,p.useComposedRefs)(d,a=>g(a)),i=c.useMemo(()=>f?e().findIndex(a=>a.ref.current===f):-1,[e,f]);return(0,b.jsx)(U,{...a,ref:h,index:i})}),U=c.forwardRef((a,d)=>{var e,f,g,h,i;let j,k,{__scopeSlider:l,index:m,name:n,...q}=a,r=H(S,l),t=K(S,l),[u,w]=c.useState(null),x=(0,p.useComposedRefs)(d,a=>w(a)),y=!u||r.form||!!u.closest("form"),z=(0,s.useSize)(u),A=r.values[m],C=void 0===A?0:W(A,r.min,r.max),D=(e=m,(f=r.values.length)>2?`Value ${e+1} of ${f}`:2===f?["Minimum","Maximum"][e]:void 0),E=z?.[t.size],F=E?(g=E,h=C,i=t.direction,k=X([0,50],[0,j=g/2]),(j-k(h)*i)*i):0;return c.useEffect(()=>{if(u)return r.thumbs.add(u),()=>{r.thumbs.delete(u)}},[u,r.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[t.startEdge]:`calc(${C}% + ${F}px)`},children:[(0,b.jsx)(B.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(v.span,{role:"slider","aria-label":a["aria-label"]||D,"aria-valuemin":r.min,"aria-valuenow":A,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...q,ref:x,style:void 0===A?{display:"none"}:a.style,onFocus:(0,o.composeEventHandlers)(a.onFocus,()=>{r.valueIndexToChangeRef.current=m})})}),y&&(0,b.jsx)(V,{name:n??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:A},m)]})});T.displayName=S;var V=c.forwardRef(({__scopeSlider:a,value:d,...e},f)=>{let g,h=c.useRef(null),i=(0,p.useComposedRefs)(h,f),j=(g=c.useRef({value:d,previous:d}),c.useMemo(()=>(g.current.value!==d&&(g.current.previous=g.current.value,g.current.value=d),g.current.previous),[d]));return c.useEffect(()=>{let a=h.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(j!==d&&b){let c=new Event("input",{bubbles:!0});b.call(a,d),a.dispatchEvent(c)}},[j,d]),(0,b.jsx)(v.input,{style:{display:"none"},...e,ref:i,defaultValue:d})});function W(a,b,c){return n(100/(c-b)*(a-b),[0,100])}function X(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}V.displayName="RadioBubbleInput";var Y=a.i(57217);let Z=c.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(I,{ref:d,className:(0,Y.cn)("relative flex w-full touch-none select-none items-center",a),...c,children:[(0,b.jsx)(P,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,b.jsx)(R,{className:"absolute h-full bg-primary"})}),(0,b.jsx)(T,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Z.displayName=I.displayName;var $=a.i(16802),_=a.i(38054),aa=a.i(26860),ab=a.i(83077),ac=a.i(24669);let ad=(0,a.i(70106).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var ae=a.i(60246),af=a.i(83604),af=af,ag=a.i(99548),ag=ag,ah=a.i(96221),ai=a.i(23292),aj=a.i(51862),ak=a.i(50944);let al=(0,c.memo)(({channel:a,currentSpend:c,onInputChange:d,isSubmitted:e})=>(0,b.jsxs)($.Card,{variant:"glass",className:`transition-colors ${e?"opacity-50 pointer-events-none":""}`,children:[(0,b.jsxs)($.CardHeader,{className:"p-4 pb-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("div",{className:"font-bold text-foreground",children:a.name}),(0,b.jsxs)(_.Badge,{variant:"outline",className:"text-xs bg-black/20 text-muted-foreground border-white/10",children:["Limit: â‚¹",(a.max_spend_per_round/1e5).toFixed(1),"L"]})]}),(0,b.jsx)($.CardDescription,{className:"text-xs text-muted-foreground h-8 line-clamp-2",children:a.description})]}),(0,b.jsxs)($.CardContent,{className:"p-4 pt-2 space-y-3",children:[(0,b.jsx)("div",{className:"flex justify-end text-sm",children:(0,b.jsxs)("span",{className:`${c>0?"text-green-400":"text-muted-foreground"} font-mono`,children:["â‚¹",c.toLocaleString()]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,b.jsx)(Z,{value:[c],max:a.max_spend_per_round,step:1e4,onValueChange:b=>d(a.id,b[0]),className:"flex-1"}),(0,b.jsx)(m.Input,{type:"number",className:"w-24 h-8 bg-black/40 border-white/10 font-mono text-xs text-right focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:c,onChange:b=>{let c=Math.min(parseInt(b.target.value)||0,a.max_spend_per_round);d(a.id,c)},max:a.max_spend_per_round})]}),"decreasing"===a.efficiency_trend&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-red-400",children:[(0,b.jsx)(ad,{className:"w-3 h-3"})," Efficiency drops over time"]}),"increasing"===a.efficiency_trend&&(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-green-400",children:[(0,b.jsx)(ac.TrendingUp,{className:"w-3 h-3"})," Efficiency improves over time"]})]})]}));function am({game:a,team:f,currentUser:h}){let m,n,o=(0,ak.useRouter)(),p=(0,d.createClient)(),[q,r]=(0,c.useState)(a),[s,t]=(0,c.useState)(f?[f]:[]),[u,v]=(0,c.useState)({}),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{let{data:a}=await p.from("sim_decisions").select("team_id").eq("game_id",q.id).eq("round_number",q.current_round);a?B(a.map(a=>a.team_id)):B([])})()},[q.id,q.current_round,p]);let C=!!f,D=q.created_by===h,E=C?s.find(a=>a.id===f.id)||f:null;(0,c.useEffect)(()=>{(async()=>{let{data:a}=await p.from("sim_teams").select("*").eq("game_id",q.id);a&&t(a)})()},[q.id,p]),(0,c.useEffect)(()=>{console.log("Subscribing to game_updates and team_updates for:",q.id);let a=p.channel("game_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"sim_games",filter:`id=eq.${q.id}`},a=>{console.log("Received game update:",a);let b=a.new;r(a=>(b.current_round!==a.current_round&&(console.log(`Round changed from ${a.current_round} to ${b.current_round}`),z(!1),v({}),B([]),ai.toast.info(`Round ${b.current_round+1} Started!`),p.from("sim_teams").select("*").eq("game_id",q.id).then(({data:a})=>{a&&t(a)})),"completed"===b.status&&"completed"!==a.status&&ai.toast.info("Game Over! ðŸŽ‰"),"active"===b.status&&"waiting"===a.status&&ai.toast.success("Game Started!"),b))}).subscribe(),b=p.channel("team_updates").on("postgres_changes",{event:"*",schema:"public",table:"sim_teams",filter:`game_id=eq.${q.id}`},async a=>{console.log("Received team update:",a);let{data:b}=await p.from("sim_teams").select("*").eq("game_id",q.id);b&&t(b)}).subscribe();return()=>{p.removeChannel(a),p.removeChannel(b)}},[q.id,p]),(0,c.useEffect)(()=>{if(!D)return;console.log("Subscribing to decision_updates for round:",q.current_round);let a=p.channel("decision_updates").on("postgres_changes",{event:"*",schema:"public",table:"sim_decisions",filter:`game_id=eq.${q.id}`},a=>{console.log("Received decision update:",a);let b=a.new;b.round_number===q.current_round&&B(a=>a.includes(b.team_id)?a:(console.log("New submission detected from:",b.team_id),[...a,b.team_id]))}).subscribe();return()=>{p.removeChannel(a)}},[q.id,q.current_round,D,p]);let[F,G]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=setInterval(async()=>{let{data:a}=await p.from("sim_games").select("*").eq("id",q.id).single();a&&a.current_round!==q.current_round&&r(a);let{data:b}=await p.from("sim_teams").select("*").eq("game_id",q.id);if(b&&t(b),D){let{data:a}=await p.from("sim_decisions").select("team_id").eq("game_id",q.id).eq("round_number",q.current_round);a&&B(a.map(a=>a.team_id))}},5e3);return()=>clearInterval(a)},[q.id,q.current_round,p]),(0,c.useEffect)(()=>{if("active"!==q.status||!q.round_ends_at)return void G(null);let a=()=>{let a=new Date(q.round_ends_at).getTime()-Date.now();G(Math.max(0,a)),a<=0&&D&&!w&&(console.log("Timer expired! Auto-processing round..."),L())};a();let b=setInterval(a,1e3);return()=>clearInterval(b)},[q.round_ends_at,q.status,D,w]);let H=(0,c.useCallback)((a,b)=>{v(c=>({...c,[a]:b}))},[]),I=()=>Object.values(u).reduce((a,b)=>a+b,0),J=(()=>{let a=I();if(0===a)return null;if(q.current_round<2&&a>1e6)return{type:"warning",msg:"High Spend Warning: You're spending over â‚¹10L early. Consider saving budget for later rounds!"};let b=Math.max(...Object.values(u));return a>5e5&&b>.8*a?{type:"info",msg:"Diversification Tip: You're betting heavily on one channel. Spreading risk might be safer."}:q.current_round>=4&&a<2e5?{type:"info",msg:"It's the final stretch! Don't be afraid to spend your remaining budget."}:null})(),K=async()=>{if(!f)return;let a=Number(E?.total_spent||0),b=e.MAX_TEAM_TOTAL_BUDGET-a;if(I()>b)return void ai.toast.error("Budget Limit Exceeded",{description:`You only have â‚¹${(b/1e5).toFixed(2)}L remaining for the entire game.`});try{x(!0),await i(q.id,f.id,q.current_round,u),z(!0),ai.toast.success("Decisions submitted! Waiting for other teams...")}catch(a){ai.toast.error("Failed to submit",{description:a instanceof Error?a.message:"Unknown error"})}finally{x(!1)}},L=async()=>{try{x(!0);let a=await j(q.id),{data:b}=await p.from("sim_teams").select("*").eq("game_id",q.id);if(b&&t(b),a.results&&a.results.length>0){let b=a.results.reduce((a,b)=>a+b.downloads_earned,0),c=a.results.reduce((a,b)=>a+b.round_spending,0);ai.toast.success(`Round processed! ${b.toLocaleString()} downloads, â‚¹${(c/1e5).toFixed(1)}L spent`)}else ai.toast.success("Round processed!")}catch(a){ai.toast.error("Error processing round",{description:a instanceof Error?a.message:"Error"})}finally{x(!1)}},M=async()=>{try{x(!0),await k(q.id),ai.toast.success("Game started!")}catch(a){ai.toast.error("Failed to start",{description:a instanceof Error?a.message:"Error"})}finally{x(!1)}},[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{q.current_round>0&&(async()=>{let a=q.current_round-1;console.log("Fetching report for round:",a);let{data:b}=await p.from("sim_results").select("*").eq("game_id",q.id).eq("round_number",a);if(b&&b.length>0){let a=b.sort((a,b)=>b.efficiency_score-a.efficiency_score)[0],c=f?b.find(a=>a.team_id===f.id):void 0,d={};s.forEach(a=>d[a.id]=a.name),O({myResult:c,topResult:a,teamMap:d}),Q(!0)}})()},[q.current_round,q.id,f,s,p]),q.budget_pool,e.TOTAL_BUDGET_POOL,(0,c.useEffect)(()=>{if("completed"===q.status){let a=Date.now()+5e3,b={startVelocity:30,spread:360,ticks:60,zIndex:0},c=(a,b)=>Math.random()*(b-a)+a,d=setInterval(function(){let e=a-Date.now();if(e<=0)return clearInterval(d);let f=e/5e3*50;g({...b,particleCount:f,origin:{x:c(.1,.3),y:Math.random()-.2}}),g({...b,particleCount:f,origin:{x:c(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(d)}},[q.status]),"completed"===q.status)return(0,b.jsxs)("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center relative bg-background",children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,b.jsx)("h1",{className:"text-4xl font-heading font-bold text-foreground mb-8",children:"Game Over!"}),(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsx)("div",{className:"w-full max-w-2xl",children:(0,b.jsx)(aj.default,{teams:s,gameId:q.id,isFacilitator:D})})}),(0,b.jsx)(l.Button,{onClick:()=>o.push("/game"),className:"mt-8",variant:"default",children:"Back to Lobby"})]});if("waiting"===q.status)return(0,b.jsxs)("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center space-y-8 relative bg-background",children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-heading font-bold text-foreground",children:"Waiting for Players..."}),(0,b.jsxs)("p",{className:"text-muted-foreground font-sans text-lg",children:["Share Game ID: ",(0,b.jsx)("span",{className:"font-mono text-foreground bg-white/10 px-2 py-1 rounded",children:q.code})]})]}),(0,b.jsxs)($.Card,{variant:"glass",className:"w-full max-w-md",children:[(0,b.jsx)($.CardHeader,{children:(0,b.jsxs)($.CardTitle,{className:"flex justify-between items-center text-foreground font-heading",children:[(0,b.jsx)("span",{children:"Joined Teams"}),(0,b.jsxs)(_.Badge,{variant:"outline",className:"text-muted-foreground",children:[s.length," / 5"]})]})}),(0,b.jsxs)($.CardContent,{className:"space-y-2",children:[s.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded bg-white/5 border border-white/5",children:[(0,b.jsx)(ae.Users,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground font-sans",children:a.name}),a.id===f?.id&&(0,b.jsx)(_.Badge,{className:"ml-auto bg-white/10 hover:bg-white/20 text-white",children:"You"})]},a.id)),0===s.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground border-2 border-dashed border-white/5 rounded-lg bg-black/20",children:[(0,b.jsx)(ae.Users,{className:"w-8 h-8 mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No teams have joined yet."}),(0,b.jsx)("p",{className:"text-xs opacity-70",children:"Waiting for players to enter code..."})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[s.length>=5?(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-sans",children:[(0,b.jsx)(ah.Loader2,{className:"w-4 h-4 animate-spin"})," Starting game automatically..."]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground font-sans",children:"Game starts automatically when 5 teams join."}),D&&(0,b.jsx)(l.Button,{onClick:M,disabled:w,variant:"default",className:"px-8 py-6 text-lg",children:w?"Starting...":"Start Game Now"})]})]});let R=[...s].sort((a,b)=>{let c=a.total_spent>0?a.total_downloads/(a.total_spent/1e5):0;return(b.total_spent>0?b.total_downloads/(b.total_spent/1e5):0)-c}),S=E?R.findIndex(a=>a.id===E.id)+1:"-";return(0,b.jsxs)("div",{className:"min-h-screen bg-background p-4 font-sans text-foreground pb-24 relative",children:[(0,b.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto mb-6 grid gap-4 md:grid-cols-3",children:[(0,b.jsx)($.Card,{variant:"glass",children:(0,b.jsxs)($.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground uppercase tracking-wider font-bold",children:"Round"}),(0,b.jsxs)("div",{className:"text-3xl font-mono text-foreground flex items-baseline gap-2",children:[q.current_round+1," ",(0,b.jsxs)("span",{className:"text-muted-foreground text-lg",children:["/ ",e.MAX_ROUNDS]})]})]}),null!==F&&(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Time Left"}),(0,b.jsx)("div",{className:`text-3xl font-mono ${F<1e4?"text-red-500 animate-pulse":"text-blue-400"}`,children:(m=Math.floor(F/1e3%60),n=Math.floor(F/1e3/60),`${n}:${m.toString().padStart(2,"0")}`)})]})]})}),(0,b.jsx)("div",{className:"md:col-span-2 hidden md:block"})]}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-2 space-y-6",children:C?(0,b.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:e.CHANNELS.map(a=>(0,b.jsx)(al,{channel:a,currentSpend:u[a.id]||0,onInputChange:H,isSubmitted:y},a.id))}):(0,b.jsx)($.Card,{className:"p-6 border-dashed border-slate-700 bg-slate-900/50",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ag.default,{className:"w-6 h-6 text-blue-400"}),(0,b.jsxs)("h3",{className:"text-xl font-heading text-foreground",children:["Facilitator View - Round ",q.current_round+1]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,b.jsx)("div",{className:"text-muted-foreground",children:"Teams Submitted"}),(0,b.jsxs)("div",{className:"text-2xl font-mono text-green-400",children:[A.length," / ",s.length]})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,b.jsx)("div",{className:"text-muted-foreground",children:"Market Budget Left"}),(0,b.jsxs)("div",{className:"text-2xl font-mono text-green-400",children:["â‚¹",((e.TOTAL_BUDGET_POOL-s.reduce((a,b)=>a+b.total_spent,0))/1e7).toFixed(2),"Cr"]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex justify-between px-2 uppercase tracking-wider font-bold",children:[(0,b.jsx)("span",{children:"Team Status"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("span",{className:"w-20 text-right",children:"Spent"}),(0,b.jsx)("span",{className:"w-24 text-right",children:"DLs"})]})]}),s.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5 text-sm border-l-2 border-transparent hover:bg-white/10 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[A.includes(a.id)?(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]",title:"Submitted"}):(0,b.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse",title:"Waiting"}),(0,b.jsx)("span",{className:"text-foreground font-medium",children:a.name})]}),(0,b.jsxs)("div",{className:"flex gap-4 text-xs font-mono items-center flex-shrink-0",children:[(0,b.jsxs)("span",{className:"w-20 text-right text-muted-foreground",children:["â‚¹",(a.total_spent/1e5).toFixed(1),"L"]}),(0,b.jsx)("span",{className:"w-24 text-right text-foreground font-bold",children:Math.floor(a.total_downloads).toLocaleString()})]})]},a.id))]})]})})}),(0,b.jsxs)("div",{className:"space-y-6",children:[C&&E&&(0,b.jsxs)($.Card,{className:"bg-blue-950/20 border-blue-500/20 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:(0,b.jsx)(ab.Trophy,{className:"w-16 h-16 text-blue-500"})}),(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsxs)($.CardTitle,{className:"text-blue-400 text-lg flex items-center justify-between",children:[(0,b.jsx)("span",{children:E.name}),(0,b.jsxs)(_.Badge,{variant:"secondary",className:"bg-blue-500/20 text-blue-300",children:["Rank #",S]})]})}),(0,b.jsx)($.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Planned Spend"}),(0,b.jsxs)("div",{className:"text-xl font-mono text-foreground",children:["â‚¹",(I()/1e5).toFixed(1),"L"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Downloads"}),(0,b.jsx)("div",{className:"text-xl font-mono text-foreground",children:Math.floor(E.total_downloads).toLocaleString()})]})]})})]}),D&&(0,b.jsx)(aj.default,{teams:s,gameId:q.id,isFacilitator:!0}),D&&(0,b.jsxs)($.Card,{className:"bg-red-950/10 border-red-500/20",children:[(0,b.jsx)($.CardHeader,{className:"pb-2",children:(0,b.jsx)($.CardTitle,{className:"text-red-400 text-sm",children:"Facilitator Controls"})}),(0,b.jsxs)($.CardContent,{children:[(0,b.jsxs)(l.Button,{onClick:L,disabled:w,variant:"destructive",className:"w-full",children:["End Round ",q.current_round+1," & Calculate"]}),(0,b.jsx)("p",{className:"text-[10px] text-red-400 mt-2",children:"Pressing this will process all decisions and advance to next round."})]})]})]})]}),C&&(0,b.jsx)("div",{className:"fixed bottom-0 left-0 w-full bg-background/95 backdrop-blur-md border-t border-white/10 p-4 z-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,b.jsx)("div",{className:"text-muted-foreground text-sm hidden md:block",children:J?(0,b.jsxs)("div",{className:`flex items-center gap-2 ${"warning"===J.type?"text-orange-400":"text-blue-400"}`,children:[(0,b.jsx)(af.default,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-bold",children:J.msg})]}):(0,b.jsxs)("span",{children:[(0,b.jsx)("span",{className:"text-yellow-500 font-bold",children:"Strategy Tip:"})," You have â‚¹30L total. Build up round-by-round!"]})}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 items-stretch md:items-center w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between md:block items-center",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground md:text-right md:mr-4",children:["Allocation / ",(0,b.jsxs)("span",{className:"text-foreground font-bold",children:["â‚¹",((e.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0))/1e5).toFixed(1),"L Left (Game Total)"]})]}),(0,b.jsxs)("div",{className:`font-mono font-bold md:text-right md:mr-4 ${I()>e.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"text-red-500 animate-pulse":"text-foreground"}`,children:["â‚¹",(I()/1e5).toFixed(2),"L"]})]}),(0,b.jsx)(l.Button,{size:"lg",onClick:K,disabled:w||y||0===I()||I()>e.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0),className:`w-full md:w-auto ${y?"bg-green-600 hover:bg-green-600":""} ${I()>e.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"opacity-50 cursor-not-allowed":""}`,variant:"default",children:I()>e.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"Over Budget":y?"Submitted (Waiting)":"Submit Bids"})]})]})}),(0,b.jsx)(aa.Dialog,{open:P,onOpenChange:Q,children:(0,b.jsxs)(aa.DialogContent,{variant:"glass",children:[(0,b.jsxs)(aa.DialogHeader,{children:[(0,b.jsxs)(aa.DialogTitle,{className:"text-2xl text-center",children:["Round ",q.current_round," Complete!"]}),(0,b.jsx)(aa.DialogDescription,{className:"text-center",children:"Here's how the market performed."})]}),N&&(0,b.jsxs)("div",{className:"space-y-6 my-4",children:[(0,b.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center",children:[(0,b.jsx)("div",{className:"text-sm text-yellow-500 font-bold uppercase tracking-wider mb-1",children:"Top Performer"}),(0,b.jsx)("div",{className:"text-2xl font-heading text-foreground",children:N.topResult?N.teamMap[N.topResult.team_id]:"Unknown"}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["Efficiency: ",(0,b.jsx)("span",{className:"text-green-400 font-mono",children:N.topResult?.efficiency_score})," / â‚¹1L"]})]}),N.myResult?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground font-bold uppercase",children:"Your Performance"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Downloads"}),(0,b.jsx)("div",{className:"text-xl font-mono text-foreground",children:Math.floor(N.myResult.downloads_earned).toLocaleString()})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Spent"}),(0,b.jsxs)("div",{className:"text-xl font-mono text-foreground",children:["â‚¹",(N.myResult.round_spending/1e5).toFixed(1),"L"]})]})]}),N.myResult.event_log&&N.myResult.event_log.length>0&&(0,b.jsxs)("div",{className:"bg-blue-500/10 text-blue-300 text-xs p-3 rounded mt-2",children:[(0,b.jsx)("strong",{className:"block mb-1 text-blue-400",children:"Market Events:"}),(0,b.jsx)("ul",{className:"list-disc pl-4 space-y-1",children:N.myResult.event_log.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]})]}):(0,b.jsx)("p",{className:"text-center text-muted-foreground italic",children:"You did not participate in this round."})]}),(0,b.jsx)(aa.DialogFooter,{children:(0,b.jsxs)(l.Button,{onClick:()=>Q(!1),className:"w-full",children:["Continue to Round ",q.current_round+1]})})]})})]})}al.displayName="ChannelCard",a.s(["default",()=>am],34570)}];

//# sourceMappingURL=apps_game_src_components_game_28c1bd40._.js.map