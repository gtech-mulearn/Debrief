(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9737,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),a=e.i(95187);let s=(0,a.createServerReference)("60f9b640f99ec120bcc73f4954089ebe5edac02354",a.callServer,void 0,a.findSourceMapURL,"createTeam");var i=e.i(16798),o=e.i(57881),l=e.i(77022),d=e.i(61911),c=e.i(46696);function u({gameId:e}){(0,n.useRouter)();let[a,u]=(0,r.useState)(""),[m,f]=(0,r.useState)(!1),h=(0,r.useRef)(!1),x=async()=>{if(console.log("[TeamReg] Button clicked!"),!a.trim())return void console.log("[TeamReg] Empty team name, returning");if(h.current)return void console.log("[TeamReg] Already submitting, ignoring click");console.log("[TeamReg] Starting submission for team:",a),h.current=!0,f(!0);try{console.log("[TeamReg] Calling createTeam server action...");let t=await s(e,a);console.log("[TeamReg] createTeam returned:",t),c.toast.success("Team created! Reloading..."),console.log("[TeamReg] About to call window.location.reload()"),window.location.reload()}catch(e){console.error("[TeamReg] Error creating team:",e),h.current=!1,f(!1),c.toast.error("Failed to join",{description:e instanceof Error?e.message:"Unknown error"})}};return(0,t.jsxs)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 relative",children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,t.jsxs)(l.Card,{variant:"glass",className:"w-full max-w-md",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(d.Users,{className:"w-8 h-8 text-blue-500"}),(0,t.jsxs)("span",{className:"text-muted-foreground font-mono text-xs",children:["GAME ID: ",e.slice(0,8),"..."]})]}),(0,t.jsx)(l.CardTitle,{className:"text-foreground text-2xl",children:"Create Your Team"}),(0,t.jsx)(l.CardDescription,{className:"text-muted-foreground",children:"Enter a name for your agency. This will be visible on the leaderboard."})]}),(0,t.jsxs)(l.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Team Name"}),(0,t.jsx)(o.Input,{placeholder:"e.g. Growth Hackers",value:a,onChange:e=>u(e.target.value),className:"bg-white/5 border-white/5 text-foreground focus:ring-white/20"})]}),(0,t.jsx)(i.Button,{onClick:x,disabled:m||!a.trim(),variant:"default",className:"w-full",children:m?"Joining...":"Enter Simulation"})]})]})]})}e.s(["default",()=>u],9737)},3215,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(69759),a=e.i(91481),s={};!function e(t,r,n,a){var s,i,o,l,d,c,u,m,f,h,x,g=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),p="function"==typeof Path2D&&"function"==typeof DOMMatrix;function b(){}function v(e){var n=r.exports.Promise,a=void 0!==n?n:t.Promise;return"function"==typeof a?new a(e):(e(b,b),null)}var w=(s=function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),r=e.getContext("2d");r.fillRect(0,0,1,1);var n=e.transferToImageBitmap();r.createPattern(n,"no-repeat")}catch(e){return!1}return!0}(),i=new Map,{transform:function(e){if(s)return e;if(i.has(e))return i.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),i.set(e,t),t},clear:function(){i.clear()}}),y=(d=Math.floor(1e3/60),c={},u=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(o=function(e){var t=Math.random();return c[t]=requestAnimationFrame(function r(n){u===n||u+d-1<n?(u=n,delete c[t],e()):c[t]=requestAnimationFrame(r)}),t},l=function(e){c[e]&&cancelAnimationFrame(c[e])}):(o=function(e){return setTimeout(e,d)},l=function(e){return clearTimeout(e)}),{frame:o,cancel:l}),j=(h={},function(){if(m)return m;if(!n&&g){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{m=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",e),null}var r=m;function a(e,t){r.postMessage({options:e||{},callback:t})}r.init=function(e){var t=e.transferControlToOffscreen();r.postMessage({canvas:t},[t])},r.fire=function(e,t,n){if(f)return a(e,null),f;var s=Math.random().toString(36).slice(2);return f=v(function(t){function i(e){e.data.callback===s&&(delete h[s],r.removeEventListener("message",i),f=null,w.clear(),n(),t())}r.addEventListener("message",i),a(e,s),h[s]=i.bind(null,{data:{callback:s}})})},r.reset=function(){for(var e in r.postMessage({reset:!0}),h)h[e](),delete h[e]}}return m}),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(e,t,r){var n;return n=e&&null!=e[t]?e[t]:N[t],r?r(n):n}function M(e){return e<0?0:Math.floor(e)}function S(e){return parseInt(e,16)}function C(e){return e.map(R)}function R(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:S(t.substring(0,2)),g:S(t.substring(2,4)),b:S(t.substring(4,6))}}function T(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function E(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function D(e,r){var s,i=!e,o=!!_(r||{},"resize"),l=!1,d=_(r,"disableForReducedMotion",Boolean),c=g&&_(r||{},"useWorker")?j():null,u=i?T:E,m=!!e&&!!c&&!!e.__confetti_initialized,f="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function h(r){var h,x=d||_(r,"disableForReducedMotion",Boolean),g=_(r,"zIndex",Number);if(x&&f)return v(function(e){e()});i&&s?e=s.canvas:i&&!e&&((h=document.createElement("canvas")).style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=g,e=h,document.body.appendChild(e)),o&&!m&&u(e);var b={width:e.width,height:e.height};function j(){if(c){var t={getBoundingClientRect:function(){if(!i)return e.getBoundingClientRect()}};u(t),c.postMessage({resize:{width:t.width,height:t.height}});return}b.width=b.height=null}function N(){s=null,o&&(l=!1,t.removeEventListener("resize",j)),i&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,m=!1)}return(c&&!m&&c.init(e),m=!0,c&&(e.__confetti_initialized=!0),o&&!l&&(l=!0,t.addEventListener("resize",j,!1)),c)?c.fire(r,b,N):function(t,r,i){for(var o,l,d,c,m,f,h,x=_(t,"particleCount",M),g=_(t,"angle",Number),b=_(t,"spread",Number),j=_(t,"startVelocity",Number),N=_(t,"decay",Number),S=_(t,"gravity",Number),R=_(t,"drift",Number),T=_(t,"colors",C),E=_(t,"ticks",Number),D=_(t,"shapes"),k=_(t,"scalar"),P=!!_(t,"flat"),I=((o=_(t,"origin",Object)).x=_(o,"x",Number),o.y=_(o,"y",Number),o),A=x,L=[],O=e.width*I.x,B=e.height*I.y;A--;)L.push(function(e){var t=e.angle*(Math.PI/180),r=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*r-Math.random()*r),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}({x:O,y:B,angle:g,spread:b,startVelocity:j,color:T[A%T.length],shape:D[Math.floor(Math.random()*(D.length-0))+0],ticks:E,decay:N,gravity:S,drift:R,scalar:k,flat:P}));return s?s.addFettis(L):(l=e,m=L.slice(),f=l.getContext("2d"),h=v(function(e){function t(){d=c=null,f.clearRect(0,0,r.width,r.height),w.clear(),i(),e()}d=y.frame(function e(){n&&(r.width!==a.width||r.height!==a.height)&&(r.width=l.width=a.width,r.height=l.height=a.height),r.width||r.height||(u(l),r.width=l.width,r.height=l.height),f.clearRect(0,0,r.width,r.height),(m=m.filter(function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var r,n,a,s,i,o,l,d,c,u,m,f,h,x,g,b,v=t.tick++/t.totalTicks,y=t.x+t.random*t.tiltCos,j=t.y+t.random*t.tiltSin,N=t.wobbleX+t.random*t.tiltCos,_=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-v)+")",e.beginPath(),p&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix)){e.fill((r=t.shape.path,n=t.shape.matrix,a=t.x,s=t.y,i=.1*Math.abs(N-y),o=.1*Math.abs(_-j),l=Math.PI/10*t.wobble,d=new Path2D(r),(c=new Path2D).addPath(d,new DOMMatrix(n)),(u=new Path2D).addPath(c,new DOMMatrix([Math.cos(l)*i,Math.sin(l)*i,-Math.sin(l)*o,Math.cos(l)*o,a,s])),u))}else if("bitmap"===t.shape.type){var M=Math.PI/10*t.wobble,S=.1*Math.abs(N-y),C=.1*Math.abs(_-j),R=t.shape.bitmap.width*t.scalar,T=t.shape.bitmap.height*t.scalar,E=new DOMMatrix([Math.cos(M)*S,Math.sin(M)*S,-Math.sin(M)*C,Math.cos(M)*C,t.x,t.y]);E.multiplySelf(new DOMMatrix(t.shape.matrix));var D=e.createPattern(w.transform(t.shape.bitmap),"no-repeat");D.setTransform(E),e.globalAlpha=1-v,e.fillStyle=D,e.fillRect(t.x-R/2,t.y-T/2,R,T),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(N-y)*t.ovalScalar,Math.abs(_-j)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(m=t.x,f=t.y,h=Math.abs(N-y)*t.ovalScalar,x=Math.abs(_-j)*t.ovalScalar,g=Math.PI/10*t.wobble,b=2*Math.PI,e.save(),e.translate(m,f),e.rotate(g),e.scale(h,x),e.arc(0,0,1,0,b,void 0),e.restore());else if("star"===t.shape)for(var k=Math.PI/2*3,P=4*t.scalar,I=8*t.scalar,A=t.x,L=t.y,O=5,B=Math.PI/5;O--;)A=t.x+Math.cos(k)*I,L=t.y+Math.sin(k)*I,e.lineTo(A,L),k+=B,A=t.x+Math.cos(k)*P,L=t.y+Math.sin(k)*P,e.lineTo(A,L),k+=B;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(j)),e.lineTo(Math.floor(N),Math.floor(_)),e.lineTo(Math.floor(y),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(f,e)})).length?d=y.frame(e):t()}),c=t}),(s={addFettis:function(e){return m=m.concat(e),h},canvas:l,promise:h,reset:function(){d&&y.cancel(d),c&&c()}}).promise)}(r,b,N)}return h.reset=function(){c&&c.reset(),s&&s.reset()},h}function k(){return x||(x=D(null,{useWorker:!0,resize:!0})),x}r.exports=function(){return k().apply(this,arguments)},r.exports.reset=function(){k().reset()},r.exports.create=D,r.exports.shapeFromPath=function(e){if(!p)throw Error("path confetti are not supported in this browser");"string"==typeof e?n=e:(n=e.path,a=e.matrix);var t=new Path2D(n),r=document.createElement("canvas").getContext("2d");if(!a){for(var n,a,s,i,o=1e3,l=1e3,d=0,c=0,u=0;u<1e3;u+=2)for(var m=0;m<1e3;m+=2)r.isPointInPath(t,u,m,"nonzero")&&(o=Math.min(o,u),l=Math.min(l,m),d=Math.max(d,u),c=Math.max(c,m));s=d-o;var f=Math.min(10/s,10/(i=c-l));a=[f,0,0,f,-Math.round(s/2+o)*f,-Math.round(i/2+l)*f]}return{type:"path",path:n,matrix:a}},r.exports.shapeFromText=function(e){var t,r=1,n="#000000",a='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,r="scalar"in e?e.scalar:r,a="fontFamily"in e?e.fontFamily:a,n="color"in e?e.color:n);var s=10*r,i=""+s+"px "+a,o=new OffscreenCanvas(s,s),l=o.getContext("2d");l.font=i;var d=l.measureText(t),c=Math.ceil(d.actualBoundingBoxRight+d.actualBoundingBoxLeft),u=Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent),m=d.actualBoundingBoxLeft+2,f=d.actualBoundingBoxAscent+2;c+=4,u+=4,(l=(o=new OffscreenCanvas(c,u)).getContext("2d")).font=i,l.fillStyle=n,l.fillText(t,m,f);var h=1/r;return{type:"bitmap",bitmap:o.transferToImageBitmap(),matrix:[h,0,0,h,-c*h/2,-u*h/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),s,!1);let i=s.exports;s.exports.create;var o=e.i(95187);let l=(0,o.createServerReference)("783947e2bd01bdd67692ee64fbc381260478a18fb1",o.callServer,void 0,o.findSourceMapURL,"submitDecision"),d=(0,o.createServerReference)("40f7d502f1905578d7237e9191b177cd2c617686d6",o.callServer,void 0,o.findSourceMapURL,"processRound"),c=(0,o.createServerReference)("40d86802a7cfd4de90f6f204e55e140f6117a9b2c0",o.callServer,void 0,o.findSourceMapURL,"startGame");var u=e.i(16798),m=e.i(57881);function f(e,[t,r]){return Math.min(r,Math.max(t,e))}var h=e.i(81140),x=e.i(20783),g=e.i(69340),p=e.i(86318),b=e.i(35804);e.i(74080);var v=Symbol("radix.slottable");function w(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===v}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{var a,s;let i,o,l,d=(s=a=`Primitive.${n}`,(i=r.forwardRef((e,t)=>{let{children:n,...a}=e;if(r.isValidElement(n)){var s;let e,i,o=(s=n,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),l=function(e,t){let r={...t};for(let n in t){let a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{let t=s(...e);return a(...e),t}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}(a,n.props);return n.type!==r.Fragment&&(l.ref=t?(0,x.composeRefs)(t,o):o),r.cloneElement(n,l)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${s}.SlotClone`,o=i,(l=r.forwardRef((e,n)=>{let{children:a,...s}=e,i=r.Children.toArray(a),l=i.find(w);if(l){let e=l.props.children,a=i.map(t=>t!==l?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(o,{...s,ref:n,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,t.jsx)(o,{...s,ref:n,children:a})})).displayName=`${a}.Slot`,l),c=r.forwardRef((e,r)=>{let{asChild:a,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?d:n,{...s,ref:r})});return c.displayName=`Primitive.${n}`,{...e,[n]:c}},{}),j=e.i(75830),N=["PageUp","PageDown"],_=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],M={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},S="Slider",[C,R,T]=(0,j.createCollection)(S),[E,D]=function(e,n=[]){let a=[],s=()=>{let t=a.map(e=>r.createContext(e));return function(n){let a=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:a}}),[n,a])}};return s.scopeName=e,[function(n,s){let i=r.createContext(s),o=a.length;a=[...a,s];let l=n=>{let{scope:a,children:s,...l}=n,d=a?.[e]?.[o]||i,c=r.useMemo(()=>l,Object.values(l));return(0,t.jsx)(d.Provider,{value:c,children:s})};return l.displayName=n+"Provider",[l,function(t,a){let l=a?.[e]?.[o]||i,d=r.useContext(l);if(d)return d;if(void 0!==s)return s;throw Error(`\`${t}\` must be used within \`${n}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=n.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}(s,...n)]}(S,[T]),[k,P]=E(S),I=r.forwardRef((e,n)=>{let{name:a,min:s=0,max:i=100,step:o=1,orientation:l="horizontal",disabled:d=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:m,onValueChange:x=()=>{},onValueCommit:p=()=>{},inverted:b=!1,form:v,...w}=e,y=r.useRef(new Set),j=r.useRef(0),M="horizontal"===l,[S=[],R]=(0,g.useControllableState)({prop:m,defaultProp:u,onChange:e=>{let t=[...y.current];t[j.current]?.focus(),x(e)}}),T=r.useRef(S);function E(e,t,{commit:r}={commit:!1}){let n,a=(String(o).split(".")[1]||"").length,l=f(Math.round((Math.round((e-s)/o)*o+s)*(n=Math.pow(10,a)))/n,[s,i]);R((e=[])=>{let n=function(e=[],t,r){let n=[...e];return n[r]=t,n.sort((e,t)=>e-t)}(e,l,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,r)=>e[r+1]-t))>=t;return!0}(n,c*o))return e;{j.current=n.indexOf(l);let t=String(n)!==String(e);return t&&r&&p(n),t?n:e}})}return(0,t.jsx)(k,{scope:e.__scopeSlider,name:a,disabled:d,min:s,max:i,valueIndexToChangeRef:j,thumbs:y.current,values:S,orientation:l,form:v,children:(0,t.jsx)(C.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(C.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(M?O:B,{"aria-disabled":d,"data-disabled":d?"":void 0,...w,ref:n,onPointerDown:(0,h.composeEventHandlers)(w.onPointerDown,()=>{d||(T.current=S)}),min:s,max:i,inverted:b,onSlideStart:d?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let r=e.map(e=>Math.abs(e-t)),n=Math.min(...r);return r.indexOf(n)}(S,e);E(e,t)},onSlideMove:d?void 0:function(e){E(e,j.current)},onSlideEnd:d?void 0:function(){let e=T.current[j.current];S[j.current]!==e&&p(S)},onHomeKeyDown:()=>!d&&E(s,0,{commit:!0}),onEndKeyDown:()=>!d&&E(i,S.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!d){let r=N.includes(e.key)||e.shiftKey&&_.includes(e.key),n=j.current;E(S[n]+o*(r?10:1)*t,n,{commit:!0})}}})})})})});I.displayName=S;var[A,L]=E(S,{startEdge:"left",endEdge:"right",size:"width",direction:1}),O=r.forwardRef((e,n)=>{let{min:a,max:s,dir:i,inverted:o,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...m}=e,[f,h]=r.useState(null),g=(0,x.useComposedRefs)(n,e=>h(e)),b=r.useRef(void 0),v=(0,p.useDirection)(i),w="ltr"===v,y=w&&!o||!w&&o;function j(e){let t=b.current||f.getBoundingClientRect(),r=V([0,t.width],y?[a,s]:[s,a]);return b.current=t,r(e-t.left)}return(0,t.jsx)(A,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:(0,t.jsx)(F,{dir:v,"data-orientation":"horizontal",...m,ref:g,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);l?.(t)},onSlideMove:e=>{let t=j(e.clientX);d?.(t)},onSlideEnd:()=>{b.current=void 0,c?.()},onStepKeyDown:e=>{let t=M[y?"from-left":"from-right"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),B=r.forwardRef((e,n)=>{let{min:a,max:s,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:c,...u}=e,m=r.useRef(null),f=(0,x.useComposedRefs)(n,m),h=r.useRef(void 0),g=!i;function p(e){let t=h.current||m.current.getBoundingClientRect(),r=V([0,t.height],g?[s,a]:[a,s]);return h.current=t,r(e-t.top)}return(0,t.jsx)(A,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:(0,t.jsx)(F,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=p(e.clientY);o?.(t)},onSlideMove:e=>{let t=p(e.clientY);l?.(t)},onSlideEnd:()=>{h.current=void 0,d?.()},onStepKeyDown:e=>{let t=M[g?"from-bottom":"from-top"].includes(e.key);c?.({event:e,direction:t?-1:1})}})})}),F=r.forwardRef((e,r)=>{let{__scopeSlider:n,onSlideStart:a,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...c}=e,u=P(S,n);return(0,t.jsx)(y.span,{...c,ref:r,onKeyDown:(0,h.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(o(e),e.preventDefault()):"End"===e.key?(l(e),e.preventDefault()):N.concat(_).includes(e.key)&&(d(e),e.preventDefault())}),onPointerDown:(0,h.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),u.thumbs.has(t)?t.focus():a(e)}),onPointerMove:(0,h.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,h.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),i(e))})})}),U="SliderTrack",$=r.forwardRef((e,r)=>{let{__scopeSlider:n,...a}=e,s=P(U,n);return(0,t.jsx)(y.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...a,ref:r})});$.displayName=U;var z="SliderRange",H=r.forwardRef((e,n)=>{let{__scopeSlider:a,...s}=e,i=P(z,a),o=L(z,a),l=r.useRef(null),d=(0,x.useComposedRefs)(n,l),c=i.values.length,u=i.values.map(e=>X(e,i.min,i.max)),m=c>1?Math.min(...u):0,f=100-Math.max(...u);return(0,t.jsx)(y.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:d,style:{...e.style,[o.startEdge]:m+"%",[o.endEdge]:f+"%"}})});H.displayName=z;var q="SliderThumb",G=r.forwardRef((e,n)=>{let a=R(e.__scopeSlider),[s,i]=r.useState(null),o=(0,x.useComposedRefs)(n,e=>i(e)),l=r.useMemo(()=>s?a().findIndex(e=>e.ref.current===s):-1,[a,s]);return(0,t.jsx)(Y,{...e,ref:o,index:l})}),Y=r.forwardRef((e,n)=>{var a,s,i,o,l;let d,c,{__scopeSlider:u,index:m,name:f,...g}=e,p=P(q,u),v=L(q,u),[w,j]=r.useState(null),N=(0,x.useComposedRefs)(n,e=>j(e)),_=!w||p.form||!!w.closest("form"),M=(0,b.useSize)(w),S=p.values[m],R=void 0===S?0:X(S,p.min,p.max),T=(a=m,(s=p.values.length)>2?`Value ${a+1} of ${s}`:2===s?["Minimum","Maximum"][a]:void 0),E=M?.[v.size],D=E?(i=E,o=R,l=v.direction,c=V([0,50],[0,d=i/2]),(d-c(o)*l)*l):0;return r.useEffect(()=>{if(w)return p.thumbs.add(w),()=>{p.thumbs.delete(w)}},[w,p.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${R}% + ${D}px)`},children:[(0,t.jsx)(C.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(y.span,{role:"slider","aria-label":e["aria-label"]||T,"aria-valuemin":p.min,"aria-valuenow":S,"aria-valuemax":p.max,"aria-orientation":p.orientation,"data-orientation":p.orientation,"data-disabled":p.disabled?"":void 0,tabIndex:p.disabled?void 0:0,...g,ref:N,style:void 0===S?{display:"none"}:e.style,onFocus:(0,h.composeEventHandlers)(e.onFocus,()=>{p.valueIndexToChangeRef.current=m})})}),_&&(0,t.jsx)(W,{name:f??(p.name?p.name+(p.values.length>1?"[]":""):void 0),form:p.form,value:S},m)]})});G.displayName=q;var W=r.forwardRef(({__scopeSlider:e,value:n,...a},s)=>{let i,o=r.useRef(null),l=(0,x.useComposedRefs)(o,s),d=(i=r.useRef({value:n,previous:n}),r.useMemo(()=>(i.current.value!==n&&(i.current.previous=i.current.value,i.current.value=n),i.current.previous),[n]));return r.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(d!==n&&t){let r=new Event("input",{bubbles:!0});t.call(e,n),e.dispatchEvent(r)}},[d,n]),(0,t.jsx)(y.input,{style:{display:"none"},...a,ref:l,defaultValue:n})});function X(e,t,r){return f(100/(r-t)*(e-t),[0,100])}function V(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}W.displayName="RadioBubbleInput";var K=e.i(54963);let Z=r.forwardRef(({className:e,...r},n)=>(0,t.jsxs)(I,{ref:n,className:(0,K.cn)("relative flex w-full touch-none select-none items-center",e),...r,children:[(0,t.jsx)($,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(H,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(G,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Z.displayName=I.displayName;var J=e.i(77022),Q=e.i(15603),ee=e.i(43100),et=e.i(64030),er=e.i(25652);let en=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var ea=e.i(61911),es=e.i(82458),es=es,ei=e.i(79664),ei=ei,eo=e.i(31278),el=e.i(46696),ed=e.i(36931),ec=e.i(18566);let eu=(0,r.memo)(({channel:e,currentSpend:r,onInputChange:n,isSubmitted:a})=>(0,t.jsxs)(J.Card,{variant:"glass",className:`transition-colors ${a?"opacity-50 pointer-events-none":""}`,children:[(0,t.jsxs)(J.CardHeader,{className:"p-4 pb-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("div",{className:"font-bold text-foreground",children:e.name}),(0,t.jsxs)(Q.Badge,{variant:"outline",className:"text-xs bg-black/20 text-muted-foreground border-white/10",children:["Limit: â‚¹",(e.max_spend_per_round/1e5).toFixed(1),"L"]})]}),(0,t.jsx)(J.CardDescription,{className:"text-xs text-muted-foreground h-8 line-clamp-2",children:e.description})]}),(0,t.jsxs)(J.CardContent,{className:"p-4 pt-2 space-y-3",children:[(0,t.jsx)("div",{className:"flex justify-end text-sm",children:(0,t.jsxs)("span",{className:`${r>0?"text-green-400":"text-muted-foreground"} font-mono`,children:["â‚¹",r.toLocaleString()]})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 py-2",children:[(0,t.jsx)(Z,{value:[r],max:e.max_spend_per_round,step:1e4,onValueChange:t=>n(e.id,t[0]),className:"flex-1"}),(0,t.jsx)(m.Input,{type:"number",className:"w-24 h-8 bg-black/40 border-white/10 font-mono text-xs text-right focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",value:r,onChange:t=>{let r=Math.min(parseInt(t.target.value)||0,e.max_spend_per_round);n(e.id,r)},max:e.max_spend_per_round})]}),"decreasing"===e.efficiency_trend&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-red-400",children:[(0,t.jsx)(en,{className:"w-3 h-3"})," Efficiency drops over time"]}),"increasing"===e.efficiency_trend&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-[10px] text-green-400",children:[(0,t.jsx)(er.TrendingUp,{className:"w-3 h-3"})," Efficiency improves over time"]})]})]}));function em({game:e,team:s,currentUser:o}){let m,f,h=(0,ec.useRouter)(),x=(0,n.createClient)(),[g,p]=(0,r.useState)(e),[b,v]=(0,r.useState)(s?[s]:[]),[w,y]=(0,r.useState)({}),[j,N]=(0,r.useState)(!1),[_,M]=(0,r.useState)(!1),[S,C]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{let{data:e}=await x.from("sim_decisions").select("team_id").eq("game_id",g.id).eq("round_number",g.current_round);e?C(e.map(e=>e.team_id)):C([])})()},[g.id,g.current_round,x]);let R=!!s,T=g.created_by===o,E=R?b.find(e=>e.id===s.id)||s:null;(0,r.useEffect)(()=>{(async()=>{let{data:e}=await x.from("sim_teams").select("*").eq("game_id",g.id);e&&v(e)})()},[g.id,x]),(0,r.useEffect)(()=>{console.log("Subscribing to game_updates and team_updates for:",g.id);let e=x.channel("game_updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"sim_games",filter:`id=eq.${g.id}`},e=>{console.log("Received game update:",e);let t=e.new;p(e=>(t.current_round!==e.current_round&&(console.log(`Round changed from ${e.current_round} to ${t.current_round}`),M(!1),y({}),C([]),el.toast.info(`Round ${t.current_round+1} Started!`),x.from("sim_teams").select("*").eq("game_id",g.id).then(({data:e})=>{e&&v(e)})),"completed"===t.status&&"completed"!==e.status&&el.toast.info("Game Over! ðŸŽ‰"),"active"===t.status&&"waiting"===e.status&&el.toast.success("Game Started!"),t))}).subscribe(),t=x.channel("team_updates").on("postgres_changes",{event:"*",schema:"public",table:"sim_teams",filter:`game_id=eq.${g.id}`},async e=>{console.log("Received team update:",e);let{data:t}=await x.from("sim_teams").select("*").eq("game_id",g.id);t&&v(t)}).subscribe();return()=>{x.removeChannel(e),x.removeChannel(t)}},[g.id,x]),(0,r.useEffect)(()=>{if(!T)return;console.log("Subscribing to decision_updates for round:",g.current_round);let e=x.channel("decision_updates").on("postgres_changes",{event:"*",schema:"public",table:"sim_decisions",filter:`game_id=eq.${g.id}`},e=>{console.log("Received decision update:",e);let t=e.new;t.round_number===g.current_round&&C(e=>e.includes(t.team_id)?e:(console.log("New submission detected from:",t.team_id),[...e,t.team_id]))}).subscribe();return()=>{x.removeChannel(e)}},[g.id,g.current_round,T,x]);let[D,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=setInterval(async()=>{let{data:e}=await x.from("sim_games").select("*").eq("id",g.id).single();e&&e.current_round!==g.current_round&&p(e);let{data:t}=await x.from("sim_teams").select("*").eq("game_id",g.id);if(t&&v(t),T){let{data:e}=await x.from("sim_decisions").select("team_id").eq("game_id",g.id).eq("round_number",g.current_round);e&&C(e.map(e=>e.team_id))}},5e3);return()=>clearInterval(e)},[g.id,g.current_round,x]),(0,r.useEffect)(()=>{if("active"!==g.status||!g.round_ends_at)return void k(null);let e=()=>{let e=new Date(g.round_ends_at).getTime()-Date.now();k(Math.max(0,e)),e<=0&&T&&!j&&(console.log("Timer expired! Auto-processing round..."),O())};e();let t=setInterval(e,1e3);return()=>clearInterval(t)},[g.round_ends_at,g.status,T,j]);let P=(0,r.useCallback)((e,t)=>{y(r=>({...r,[e]:t}))},[]),I=()=>Object.values(w).reduce((e,t)=>e+t,0),A=(()=>{let e=I();if(0===e)return null;if(g.current_round<2&&e>1e6)return{type:"warning",msg:"High Spend Warning: You're spending over â‚¹10L early. Consider saving budget for later rounds!"};let t=Math.max(...Object.values(w));return e>5e5&&t>.8*e?{type:"info",msg:"Diversification Tip: You're betting heavily on one channel. Spreading risk might be safer."}:g.current_round>=4&&e<2e5?{type:"info",msg:"It's the final stretch! Don't be afraid to spend your remaining budget."}:null})(),L=async()=>{if(!s)return;let e=Number(E?.total_spent||0),t=a.MAX_TEAM_TOTAL_BUDGET-e;if(I()>t)return void el.toast.error("Budget Limit Exceeded",{description:`You only have â‚¹${(t/1e5).toFixed(2)}L remaining for the entire game.`});try{N(!0),await l(g.id,s.id,g.current_round,w),M(!0),el.toast.success("Decisions submitted! Waiting for other teams...")}catch(e){el.toast.error("Failed to submit",{description:e instanceof Error?e.message:"Unknown error"})}finally{N(!1)}},O=async()=>{try{N(!0);let e=await d(g.id),{data:t}=await x.from("sim_teams").select("*").eq("game_id",g.id);if(t&&v(t),e.results&&e.results.length>0){let t=e.results.reduce((e,t)=>e+t.downloads_earned,0),r=e.results.reduce((e,t)=>e+t.round_spending,0);el.toast.success(`Round processed! ${t.toLocaleString()} downloads, â‚¹${(r/1e5).toFixed(1)}L spent`)}else el.toast.success("Round processed!")}catch(e){el.toast.error("Error processing round",{description:e instanceof Error?e.message:"Error"})}finally{N(!1)}},B=async()=>{try{N(!0),await c(g.id),el.toast.success("Game started!")}catch(e){el.toast.error("Failed to start",{description:e instanceof Error?e.message:"Error"})}finally{N(!1)}},[F,U]=(0,r.useState)(null),[$,z]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{g.current_round>0&&(async()=>{let e=g.current_round-1;console.log("Fetching report for round:",e);let{data:t}=await x.from("sim_results").select("*").eq("game_id",g.id).eq("round_number",e);if(t&&t.length>0){let e=t.sort((e,t)=>t.efficiency_score-e.efficiency_score)[0],r=s?t.find(e=>e.team_id===s.id):void 0,n={};b.forEach(e=>n[e.id]=e.name),U({myResult:r,topResult:e,teamMap:n}),z(!0)}})()},[g.current_round,g.id,s,b,x]),g.budget_pool,a.TOTAL_BUDGET_POOL,(0,r.useEffect)(()=>{if("completed"===g.status){let e=Date.now()+5e3,t={startVelocity:30,spread:360,ticks:60,zIndex:0},r=(e,t)=>Math.random()*(t-e)+e,n=setInterval(function(){let a=e-Date.now();if(a<=0)return clearInterval(n);let s=a/5e3*50;i({...t,particleCount:s,origin:{x:r(.1,.3),y:Math.random()-.2}}),i({...t,particleCount:s,origin:{x:r(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(n)}},[g.status]),"completed"===g.status)return(0,t.jsxs)("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center relative bg-background",children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,t.jsx)("h1",{className:"text-4xl font-heading font-bold text-foreground mb-8",children:"Game Over!"}),(0,t.jsx)("div",{className:"w-full max-w-2xl",children:(0,t.jsx)("div",{className:"w-full max-w-2xl",children:(0,t.jsx)(ed.default,{teams:b,gameId:g.id,isFacilitator:T})})}),(0,t.jsx)(u.Button,{onClick:()=>h.push("/game"),className:"mt-8",variant:"default",children:"Back to Lobby"})]});if("waiting"===g.status)return(0,t.jsxs)("div",{className:"min-h-screen p-6 flex flex-col items-center justify-center space-y-8 relative bg-background",children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-heading font-bold text-foreground",children:"Waiting for Players..."}),(0,t.jsxs)("p",{className:"text-muted-foreground font-sans text-lg",children:["Share Game ID: ",(0,t.jsx)("span",{className:"font-mono text-foreground bg-white/10 px-2 py-1 rounded",children:g.code})]})]}),(0,t.jsxs)(J.Card,{variant:"glass",className:"w-full max-w-md",children:[(0,t.jsx)(J.CardHeader,{children:(0,t.jsxs)(J.CardTitle,{className:"flex justify-between items-center text-foreground font-heading",children:[(0,t.jsx)("span",{children:"Joined Teams"}),(0,t.jsxs)(Q.Badge,{variant:"outline",className:"text-muted-foreground",children:[b.length," / 5"]})]})}),(0,t.jsxs)(J.CardContent,{className:"space-y-2",children:[b.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded bg-white/5 border border-white/5",children:[(0,t.jsx)(ea.Users,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-foreground font-sans",children:e.name}),e.id===s?.id&&(0,t.jsx)(Q.Badge,{className:"ml-auto bg-white/10 hover:bg-white/20 text-white",children:"You"})]},e.id)),0===b.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground border-2 border-dashed border-white/5 rounded-lg bg-black/20",children:[(0,t.jsx)(ea.Users,{className:"w-8 h-8 mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No teams have joined yet."}),(0,t.jsx)("p",{className:"text-xs opacity-70",children:"Waiting for players to enter code..."})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[b.length>=5?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-sans",children:[(0,t.jsx)(eo.Loader2,{className:"w-4 h-4 animate-spin"})," Starting game automatically..."]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground font-sans",children:"Game starts automatically when 5 teams join."}),T&&(0,t.jsx)(u.Button,{onClick:B,disabled:j,variant:"default",className:"px-8 py-6 text-lg",children:j?"Starting...":"Start Game Now"})]})]});let H=[...b].sort((e,t)=>{let r=e.total_spent>0?e.total_downloads/(e.total_spent/1e5):0;return(t.total_spent>0?t.total_downloads/(t.total_spent/1e5):0)-r}),q=E?H.findIndex(e=>e.id===E.id)+1:"-";return(0,t.jsxs)("div",{className:"min-h-screen bg-background p-4 font-sans text-foreground pb-24 relative",children:[(0,t.jsx)("div",{className:"fixed inset-0 z-[-1] bg-page-gradient pointer-events-none"}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto mb-6 grid gap-4 md:grid-cols-3",children:[(0,t.jsx)(J.Card,{variant:"glass",children:(0,t.jsxs)(J.CardContent,{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground uppercase tracking-wider font-bold",children:"Round"}),(0,t.jsxs)("div",{className:"text-3xl font-mono text-foreground flex items-baseline gap-2",children:[g.current_round+1," ",(0,t.jsxs)("span",{className:"text-muted-foreground text-lg",children:["/ ",a.MAX_ROUNDS]})]})]}),null!==D&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground uppercase tracking-wider font-bold",children:"Time Left"}),(0,t.jsx)("div",{className:`text-3xl font-mono ${D<1e4?"text-red-500 animate-pulse":"text-blue-400"}`,children:(m=Math.floor(D/1e3%60),f=Math.floor(D/1e3/60),`${f}:${m.toString().padStart(2,"0")}`)})]})]})}),(0,t.jsx)("div",{className:"md:col-span-2 hidden md:block"})]}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto grid lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-6",children:R?(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:a.CHANNELS.map(e=>(0,t.jsx)(eu,{channel:e,currentSpend:w[e.id]||0,onInputChange:P,isSubmitted:_},e.id))}):(0,t.jsx)(J.Card,{className:"p-6 border-dashed border-slate-700 bg-slate-900/50",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ei.default,{className:"w-6 h-6 text-blue-400"}),(0,t.jsxs)("h3",{className:"text-xl font-heading text-foreground",children:["Facilitator View - Round ",g.current_round+1]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Teams Submitted"}),(0,t.jsxs)("div",{className:"text-2xl font-mono text-green-400",children:[S.length," / ",b.length]})]}),(0,t.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,t.jsx)("div",{className:"text-muted-foreground",children:"Market Budget Left"}),(0,t.jsxs)("div",{className:"text-2xl font-mono text-green-400",children:["â‚¹",((a.TOTAL_BUDGET_POOL-b.reduce((e,t)=>e+t.total_spent,0))/1e7).toFixed(2),"Cr"]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex justify-between px-2 uppercase tracking-wider font-bold",children:[(0,t.jsx)("span",{children:"Team Status"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("span",{className:"w-20 text-right",children:"Spent"}),(0,t.jsx)("span",{className:"w-24 text-right",children:"DLs"})]})]}),b.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 rounded bg-white/5 text-sm border-l-2 border-transparent hover:bg-white/10 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[S.includes(e.id)?(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]",title:"Submitted"}):(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500 animate-pulse",title:"Waiting"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:e.name})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-xs font-mono items-center flex-shrink-0",children:[(0,t.jsxs)("span",{className:"w-20 text-right text-muted-foreground",children:["â‚¹",(e.total_spent/1e5).toFixed(1),"L"]}),(0,t.jsx)("span",{className:"w-24 text-right text-foreground font-bold",children:Math.floor(e.total_downloads).toLocaleString()})]})]},e.id))]})]})})}),(0,t.jsxs)("div",{className:"space-y-6",children:[R&&E&&(0,t.jsxs)(J.Card,{className:"bg-blue-950/20 border-blue-500/20 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:(0,t.jsx)(et.Trophy,{className:"w-16 h-16 text-blue-500"})}),(0,t.jsx)(J.CardHeader,{className:"pb-2",children:(0,t.jsxs)(J.CardTitle,{className:"text-blue-400 text-lg flex items-center justify-between",children:[(0,t.jsx)("span",{children:E.name}),(0,t.jsxs)(Q.Badge,{variant:"secondary",className:"bg-blue-500/20 text-blue-300",children:["Rank #",q]})]})}),(0,t.jsx)(J.CardContent,{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Planned Spend"}),(0,t.jsxs)("div",{className:"text-xl font-mono text-foreground",children:["â‚¹",(I()/1e5).toFixed(1),"L"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total Downloads"}),(0,t.jsx)("div",{className:"text-xl font-mono text-foreground",children:Math.floor(E.total_downloads).toLocaleString()})]})]})})]}),T&&(0,t.jsx)(ed.default,{teams:b,gameId:g.id,isFacilitator:!0}),T&&(0,t.jsxs)(J.Card,{className:"bg-red-950/10 border-red-500/20",children:[(0,t.jsx)(J.CardHeader,{className:"pb-2",children:(0,t.jsx)(J.CardTitle,{className:"text-red-400 text-sm",children:"Facilitator Controls"})}),(0,t.jsxs)(J.CardContent,{children:[(0,t.jsxs)(u.Button,{onClick:O,disabled:j,variant:"destructive",className:"w-full",children:["End Round ",g.current_round+1," & Calculate"]}),(0,t.jsx)("p",{className:"text-[10px] text-red-400 mt-2",children:"Pressing this will process all decisions and advance to next round."})]})]})]})]}),R&&(0,t.jsx)("div",{className:"fixed bottom-0 left-0 w-full bg-background/95 backdrop-blur-md border-t border-white/10 p-4 z-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"text-muted-foreground text-sm hidden md:block",children:A?(0,t.jsxs)("div",{className:`flex items-center gap-2 ${"warning"===A.type?"text-orange-400":"text-blue-400"}`,children:[(0,t.jsx)(es.default,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-bold",children:A.msg})]}):(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-yellow-500 font-bold",children:"Strategy Tip:"})," You have â‚¹30L total. Build up round-by-round!"]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 items-stretch md:items-center w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between md:block items-center",children:[(0,t.jsxs)("div",{className:"text-xs text-muted-foreground md:text-right md:mr-4",children:["Allocation / ",(0,t.jsxs)("span",{className:"text-foreground font-bold",children:["â‚¹",((a.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0))/1e5).toFixed(1),"L Left (Game Total)"]})]}),(0,t.jsxs)("div",{className:`font-mono font-bold md:text-right md:mr-4 ${I()>a.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"text-red-500 animate-pulse":"text-foreground"}`,children:["â‚¹",(I()/1e5).toFixed(2),"L"]})]}),(0,t.jsx)(u.Button,{size:"lg",onClick:L,disabled:j||_||0===I()||I()>a.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0),className:`w-full md:w-auto ${_?"bg-green-600 hover:bg-green-600":""} ${I()>a.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"opacity-50 cursor-not-allowed":""}`,variant:"default",children:I()>a.MAX_TEAM_TOTAL_BUDGET-Number(E?.total_spent||0)?"Over Budget":_?"Submitted (Waiting)":"Submit Bids"})]})]})}),(0,t.jsx)(ee.Dialog,{open:$,onOpenChange:z,children:(0,t.jsxs)(ee.DialogContent,{variant:"glass",children:[(0,t.jsxs)(ee.DialogHeader,{children:[(0,t.jsxs)(ee.DialogTitle,{className:"text-2xl text-center",children:["Round ",g.current_round," Complete!"]}),(0,t.jsx)(ee.DialogDescription,{className:"text-center",children:"Here's how the market performed."})]}),F&&(0,t.jsxs)("div",{className:"space-y-6 my-4",children:[(0,t.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4 text-center",children:[(0,t.jsx)("div",{className:"text-sm text-yellow-500 font-bold uppercase tracking-wider mb-1",children:"Top Performer"}),(0,t.jsx)("div",{className:"text-2xl font-heading text-foreground",children:F.topResult?F.teamMap[F.topResult.team_id]:"Unknown"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:["Efficiency: ",(0,t.jsx)("span",{className:"text-green-400 font-mono",children:F.topResult?.efficiency_score})," / â‚¹1L"]})]}),F.myResult?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground font-bold uppercase",children:"Your Performance"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Downloads"}),(0,t.jsx)("div",{className:"text-xl font-mono text-foreground",children:Math.floor(F.myResult.downloads_earned).toLocaleString()})]}),(0,t.jsxs)("div",{className:"bg-white/5 rounded p-3",children:[(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Spent"}),(0,t.jsxs)("div",{className:"text-xl font-mono text-foreground",children:["â‚¹",(F.myResult.round_spending/1e5).toFixed(1),"L"]})]})]}),F.myResult.event_log&&F.myResult.event_log.length>0&&(0,t.jsxs)("div",{className:"bg-blue-500/10 text-blue-300 text-xs p-3 rounded mt-2",children:[(0,t.jsx)("strong",{className:"block mb-1 text-blue-400",children:"Market Events:"}),(0,t.jsx)("ul",{className:"list-disc pl-4 space-y-1",children:F.myResult.event_log.map((e,r)=>(0,t.jsx)("li",{children:e},r))})]})]}):(0,t.jsx)("p",{className:"text-center text-muted-foreground italic",children:"You did not participate in this round."})]}),(0,t.jsx)(ee.DialogFooter,{children:(0,t.jsxs)(u.Button,{onClick:()=>z(!1),className:"w-full",children:["Continue to Round ",g.current_round+1]})})]})})]})}eu.displayName="ChannelCard",e.s(["default",()=>em],3215)}]);