module.exports=[56540,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(79889);var e=a.i(12447),f=a.i(48645),g=a.i(39524),h=a.i(52309);a.i(38912);var i=a.i(94203),j=a.i(3804),k=a.i(942),l=a.i(4171),m=a.i(760),n=a.i(23292),o=a.i(53569),p=a.i(33441),q=a.i(69439),r=a.i(50429),s=a.i(70106);let t=(0,s.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),u=(0,s.default)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),v=(0,s.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var w=a.i(93518);function x({currentLevel:a,selectedLevel:c,onSelectLevel:d,className:e}){let f=[{level:0,title:"The Spark",description:"Idea",icon:q.Lightbulb},{level:1,title:"Clarity",description:"Problem",icon:r.Target},{level:2,title:"Reality",description:"Market",icon:t},{level:3,title:"Hypothesis",description:"Test",icon:u},{level:4,title:"Sustainability",description:"Model",icon:v},{level:5,title:"Reflection",description:"PoW",icon:w.Award}];return(0,b.jsx)("div",{className:(0,m.cn)("w-full rounded-3xl border border-white/5 bg-black/20 p-6 backdrop-blur-sm",e),children:(0,b.jsxs)("div",{className:"relative flex items-start overflow-x-auto pb-4 md:pb-0 md:overflow-visible gap-8 md:gap-0 md:justify-between no-scrollbar",children:[(0,b.jsx)("div",{className:"hidden md:block absolute left-0 top-5 h-0.5 w-full -translate-y-1/2 bg-white/5"}),f.map((e,g)=>{let h=g<a,i=g===a,j=g>a&&(1!==g||0!==a),k=e.level===c;return(0,b.jsxs)("div",{className:"relative flex flex-col items-center min-w-[80px] md:min-w-0 md:flex-1",children:[g<f.length-1&&g<a&&(0,b.jsx)("div",{className:"hidden md:block absolute left-[50%] top-5 h-0.5 w-full -translate-y-1/2 bg-primary/50"}),(0,b.jsxs)("button",{onClick:()=>!j&&d(e.level),disabled:j,className:(0,m.cn)("group relative z-10 flex flex-col items-center gap-3 transition-all duration-300 outline-none",j?"cursor-not-allowed opacity-40 grayscale":"cursor-pointer hover:opacity-100",k?"scale-105":"scale-100"),children:[(0,b.jsx)("div",{className:(0,m.cn)("flex h-10 w-10 items-center justify-center rounded-full border transition-all duration-500",h?"border-primary/50 bg-primary text-primary-foreground shadow-[0_0_15px_-3px_rgba(var(--primary),0.5)]":i?"border-primary bg-primary/10 text-primary ring-4 ring-primary/10 shadow-[0_0_20px_-5px_rgba(var(--primary),0.4)]":"border-white/10 bg-[#09090b] text-muted-foreground hover:border-white/20",!k||h||i?"":"ring-2 ring-primary ring-offset-2 ring-offset-black"),children:h?(0,b.jsx)(p.Check,{className:"h-5 w-5"}):(0,b.jsx)(e.icon,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,b.jsx)("span",{className:(0,m.cn)("text-xs font-semibold tracking-wide transition-colors duration-200",h||i?"text-foreground":"text-muted-foreground",k?"text-primary":""),children:e.title}),(0,b.jsx)("span",{className:(0,m.cn)("text-[10px] uppercase tracking-wider",i?"text-primary/70":"text-muted-foreground/50"),children:e.description})]})]})]},e.level)})]})})}var y=a.i(28503);function z({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,m.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var A=a.i(88580),B=a.i(12654),C=a.i(24669),D=a.i(60246);let E={desirability:{icon:D.Users,colorClasses:"border-coral text-coral",iconBgClasses:"bg-coral/10 text-coral"},feasibility:{icon:B.Hammer,colorClasses:"border-lime text-lime-foreground",iconBgClasses:"bg-lime/20 text-lime-700 dark:text-lime"},viability:{icon:C.TrendingUp,colorClasses:"border-mint text-mint",iconBgClasses:"bg-mint/10 text-mint"}};function F({type:a,title:c,children:d,className:e}){let f=E[a];return(0,b.jsxs)("div",{className:(0,m.cn)("relative overflow-hidden rounded-xl border bg-card/50 p-1 shadow-sm transition-all hover:bg-card/80",e),children:[(0,b.jsx)("div",{className:(0,m.cn)("absolute inset-y-0 left-0 w-1",f.colorClasses.split(" ")[0].replace("text-","bg-"))}),(0,b.jsxs)("div",{className:"flex gap-4 p-4",children:[(0,b.jsx)("div",{className:(0,m.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-full",f.iconBgClasses),children:(0,b.jsx)(f.icon,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h4",{className:(0,m.cn)("font-display text-base font-semibold leading-none tracking-tight","feasibility"===a?"text-yellow-600 dark:text-lime":f.colorClasses.split(" ")[1]),children:c}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:d})]})]})]})}var G=a.i(63588);let H=(0,s.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),I=(0,s.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function J({ideaId:a,levelNumber:d,isOwner:e,isAuthenticated:h}){let{data:i,isLoading:j}=(0,A.useIdeaFeedback)(a,d),{mutate:k,isPending:l}=(0,A.usePostIdeaFeedback)(a),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(0),r=i?.data||[];return(0,b.jsxs)("div",{className:"mt-12 space-y-8 border-t border-border pt-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h3",{className:"font-display text-xl font-bold flex items-center gap-2",children:[(0,b.jsx)(G.MessageSquare,{className:"h-5 w-5"}),"Peer Feedback"]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r.length," reviews"]})]}),!e&&h&&(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),n.trim()&&k({levelNumber:d,content:n,ratings:{overall:p}},{onSuccess:()=>{o(""),q(0)}})},className:"space-y-4 bg-muted/30 p-4 rounded-xl border border-border/50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Rate this level:"}),(0,b.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>q(a),className:(0,m.cn)("transition-colors",p>=a?"text-yellow-500 fill-current":"text-muted-foreground"),children:(0,b.jsx)(H,{className:(0,m.cn)("h-5 w-5",p>=a&&"fill-current")})},a))})]}),(0,b.jsx)(z,{value:n,onChange:a=>o(a.target.value),placeholder:"Is this clear? specific? realistic? Give constructive feedback...",className:"bg-background min-h-[80px]"}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(g.Button,{type:"submit",size:"sm",variant:"mint",disabled:l||!n.trim(),children:[l?"Posting...":"Post Feedback",(0,b.jsx)(I,{className:"ml-2 h-3 w-3"})]})})]}),(0,b.jsx)("div",{className:"space-y-6",children:0===r.length?(0,b.jsx)("p",{className:"text-muted-foreground text-sm italic",children:"No feedback yet. Be the first!"}):r.map(a=>(0,b.jsxs)("div",{className:"flex gap-4 p-4 rounded-xl bg-card border border-border/50 shadow-sm",children:[(0,b.jsxs)(f.Avatar,{className:"h-10 w-10 border border-border",children:[(0,b.jsx)(f.AvatarImage,{src:a.author?.avatar_url??void 0}),(0,b.jsx)(f.AvatarFallback,{children:(0,m.getInitials)(a.author?.full_name)})]}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-sm",children:a.author?.full_name||"Peer"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",(0,m.formatDistanceToNow)(a.created_at)]})]}),a.ratings?.overall&&(0,b.jsxs)("div",{className:"flex items-center gap-0.5 text-yellow-500",children:[(0,b.jsx)("span",{className:"text-sm font-bold",children:a.ratings.overall}),(0,b.jsx)(H,{className:"h-3 w-3 fill-current"})]})]}),(0,b.jsx)("p",{className:"text-sm text-foreground/90 leading-relaxed",children:a.content})]})]},a.id))})]})}function K({ideaId:a,levelData:d,isLocked:e=!1,isOwner:f=!1,isAuthenticated:h=!1}){let{mutate:i,isPending:j}=(0,A.useUpdateIdeaLevel)(a),k=d?.data||{},[l,m]=(0,c.useState)({target_persona:k.target_persona||"",current_workarounds:k.current_workarounds||"",pain_points:k.pain_points||""});(0,c.useEffect)(()=>{d?.data&&m({target_persona:d.data.target_persona||"",current_workarounds:d.data.current_workarounds||"",pain_points:d.data.pain_points||""})},[d]);let n=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))};return e?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,b.jsx)("p",{children:"Complete the previous level to unlock this step."})}):f?(0,b.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!e&&f&&(0,b.jsx)(F,{type:"desirability",title:"Focus on Desirability",children:"Level 1 is about ensuring people actually want this. Focus on the problem, not the solution."}),(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,b.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Problem Clarity"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"Prove the problem is real. Who has it? What are they doing now?"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e||i({levelNumber:1,data:l},{onSuccess:()=>{}})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"target_persona",className:"text-base font-semibold text-foreground",children:["Target Persona ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who is suffering the most?)"})]}),(0,b.jsx)(y.Input,{id:"target_persona",name:"target_persona",placeholder:"e.g. Overwhelmed medical students applying for residency (be specific!)",value:l.target_persona,onChange:n,disabled:j,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"current_workarounds",className:"text-base font-semibold text-foreground",children:["Current Workarounds ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What are they patching together?)"})]}),(0,b.jsx)(z,{id:"current_workarounds",name:"current_workarounds",placeholder:"e.g. They manually copy-paste data into 3 different Excel sheets...",value:l.current_workarounds,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"pain_points",className:"text-base font-semibold text-foreground",children:["Pain Points ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Where does the workaround break?)"})]}),(0,b.jsx)(z,{id:"pain_points",name:"pain_points",placeholder:"e.g. It takes 4 hours/week and errors cause lost revenue...",value:l.pain_points,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"lg",disabled:j,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:j?"Saving...":"Save & Continue"})})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:1,isOwner:f,isAuthenticated:h})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Problem Clarity"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"How the author defines the problem."})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Target Persona (Who has the problem?)"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground",children:l.target_persona||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Current Workarounds (How do they solve it now?)"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.current_workarounds||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Pain Points (Why do the workarounds fail?)"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.pain_points||"Not specified"})]}),(0,b.jsx)("div",{className:"rounded-lg bg-blue-500/10 p-4 text-sm text-blue-600",children:"Only the idea author can edit this section."})]})]})}var L=a.i(27759);let M=(0,s.default)("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),N=["The Spark","Problem Clarity","Market Reality","The Hypothesis","Sustainability","Reflection"];function O({isOpen:a,onClose:c,level:d}){return a?(0,b.jsx)(L.Dialog,{open:a,onOpenChange:a=>!a&&c(),children:(0,b.jsxs)(L.DialogContent,{className:"sm:max-w-md text-center",children:[(0,b.jsxs)(L.DialogHeader,{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-yellow-100 p-4",children:(0,b.jsx)(M,{className:"h-10 w-10 text-yellow-600"})}),(0,b.jsx)(L.DialogTitle,{className:"text-2xl font-bold text-foreground",children:"Level Up!"}),(0,b.jsxs)(L.DialogDescription,{className:"text-lg text-muted-foreground",children:["Congratulations! You've unlocked ",(0,b.jsx)("br",{}),(0,b.jsxs)("span",{className:"font-bold text-primary text-xl mt-2 block",children:["Level ",d,": ",N[d]]})]})]}),(0,b.jsx)("div",{className:"mt-4 flex justify-center",children:(0,b.jsx)(g.Button,{onClick:c,variant:"mint",size:"lg",className:"w-full",children:"Let's Go!"})})]})}):null}function P({ideaId:a,levelData:d,isLocked:e=!1,isOwner:f=!1,isAuthenticated:h=!1}){let{mutate:i,isPending:j}=(0,A.useUpdateIdeaLevel)(a),k=d?.data||{},[l,m]=(0,c.useState)({alternatives:k.alternatives||"",why_they_fail:k.why_they_fail||"",evidence_log:k.evidence_log||""});(0,c.useEffect)(()=>{d?.data&&m({alternatives:d.data.alternatives||"",why_they_fail:d.data.why_they_fail||"",evidence_log:d.data.evidence_log||""})},[d]);let n=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))};return e?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,b.jsx)("p",{children:"Complete Level 1: Problem Clarity to unlock this level."})}):f?(0,b.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!e&&f&&(0,b.jsx)(F,{type:"desirability",title:"Focus on Desirability",children:"Prove that your target audience exists and is actively looking for a solution."}),(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,b.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Market Reality"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"What exists? Why isn't it good enough?"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),!e&&f&&i({levelNumber:2,data:l})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"alternatives",className:"text-base font-semibold text-foreground",children:["Existing Alternatives ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who is fighting for their attention?)"})]}),(0,b.jsx)(z,{id:"alternatives",name:"alternatives",placeholder:"e.g. Direct competitors, Excel, or just 'doing nothing'...",value:l.alternatives,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"why_they_fail",className:"text-base font-semibold text-foreground",children:["Why They Fail ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What 'Job to be Done' do they miss?)"})]}),(0,b.jsx)(z,{id:"why_they_fail",name:"why_they_fail",placeholder:"e.g. They are too expensive for students, or require technical skills...",value:l.why_they_fail,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"evidence_log",className:"text-base font-semibold text-foreground",children:["Evidence Log ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Prove the pain exists)"})]}),(0,b.jsx)(z,{id:"evidence_log",name:"evidence_log",placeholder:"Paste links to Reddit vents, 1-star reviews, or forum complaints...",value:l.evidence_log,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"lg",disabled:j,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:j?"Saving...":"Save & Continue"})})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:2,isOwner:f,isAuthenticated:h})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Market Reality"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Analysis of competitors and market evidence."})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Alternatives"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.alternatives||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Why They Fail"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.why_they_fail||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Evidence Log"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.evidence_log||"Not specified"})]})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:2,isOwner:f,isAuthenticated:h})]})}function Q({ideaId:a,levelData:d,isLocked:e=!1,isOwner:f=!1,isAuthenticated:h=!1}){let{mutate:i,isPending:j}=(0,A.useUpdateIdeaLevel)(a),k=d?.data||{},[l,m]=(0,c.useState)({hypothesis:k.hypothesis||"",test_method:k.test_method||"",success_criteria:k.success_criteria||""});(0,c.useEffect)(()=>{d?.data&&m({hypothesis:d.data.hypothesis||"",test_method:d.data.test_method||"",success_criteria:d.data.success_criteria||""})},[d]);let n=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))};return e?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,b.jsx)("p",{children:"Complete Level 2: Market Reality to unlock this level."})}):f?(0,b.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!e&&f&&(0,b.jsx)(F,{type:"feasibility",title:"Focus on Feasibility",children:"Can we build this? Define a clear hypothesis and how you will test it technically or operationally."}),(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,b.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"The Hypothesis"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"Design your 48-Hour Test."})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),!e&&f&&i({levelNumber:3,data:l})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"hypothesis",className:"text-base font-semibold text-foreground",children:["Hypothesis Statement ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The Bet)"})]}),(0,b.jsx)(z,{id:"hypothesis",name:"hypothesis",placeholder:"If we [do X] for [Person Y], then [Z% of them] will [take Action W]...",value:l.hypothesis,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"test_method",className:"text-base font-semibold text-foreground",children:["Test Method ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The 48-Hour Test: How will you verify this without writing code?)"})]}),(0,b.jsx)(z,{id:"test_method",name:"test_method",placeholder:"e.g. Landing Page, Cold DM campaign, Fake Door test, Manual Concierge...",value:l.test_method,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"success_criteria",className:"text-base font-semibold text-foreground",children:["Success Criteria ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The Pass Mark: What specific number proves you are right?)"})]}),(0,b.jsx)(y.Input,{id:"success_criteria",name:"success_criteria",placeholder:"e.g. 15 signups, 5 pre-orders, 20% conversion rate",value:l.success_criteria,onChange:n,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"lg",disabled:j,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:j?"Saving...":"Save & Continue"})})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:3,isOwner:f,isAuthenticated:h})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"The Hypothesis"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"What they are testing and how."})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Hypothesis"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.hypothesis||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Test Method"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.test_method||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Success Criteria"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.success_criteria||"Not specified"})]})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:3,isOwner:f,isAuthenticated:h})]})}function R({ideaId:a,levelData:d,isLocked:e=!1,isOwner:f=!1,isAuthenticated:h=!1}){let{mutate:i,isPending:j}=(0,A.useUpdateIdeaLevel)(a),k=d?.data||{},[l,m]=(0,c.useState)({revenue_model:k.revenue_model||"",cost_structure:k.cost_structure||"",sustainability_plan:k.sustainability_plan||""});(0,c.useEffect)(()=>{d?.data&&m({revenue_model:d.data.revenue_model||"",cost_structure:d.data.cost_structure||"",sustainability_plan:d.data.sustainability_plan||""})},[d]);let n=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))};return e?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,b.jsx)("p",{children:"Complete Level 3: The Hypothesis to unlock this level."})}):f?(0,b.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!e&&f&&(0,b.jsx)(F,{type:"viability",title:"Focus on Viability",children:"Is this a sustainable business? Will the revenue cover the costs?"}),(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,b.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Sustainability"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"How will this survive and grow?"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),!e&&f&&i({levelNumber:4,data:l})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"revenue_model",className:"text-base font-semibold text-foreground",children:["Revenue Model ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who pays? How much?)"})]}),(0,b.jsx)(z,{id:"revenue_model",name:"revenue_model",placeholder:"e.g. Subscription ($10/mo), Transaction fees (2%), One-time purchase...",value:l.revenue_model,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"cost_structure",className:"text-base font-semibold text-foreground",children:["Cost Structure ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What does it cost to serve one customer?)"})]}),(0,b.jsx)(z,{id:"cost_structure",name:"cost_structure",placeholder:"e.g. Server costs, API fees, Stripe fees, Human support time...",value:l.cost_structure,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"sustainability_plan",className:"text-base font-semibold text-foreground",children:["Sustainability Plan ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(How do you survive the 'Valley of Death'?)"})]}),(0,b.jsx)(z,{id:"sustainability_plan",name:"sustainability_plan",placeholder:"e.g. We reach break-even with 50 customers. We have 6 months of runway...",value:l.sustainability_plan,onChange:n,disabled:j,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"lg",disabled:j,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:j?"Saving...":"Save & Continue"})})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:4,isOwner:f,isAuthenticated:h})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Sustainability"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Business model and long-term viability."})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Revenue Model"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.revenue_model||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Cost Structure"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.cost_structure||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Sustainability Plan"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.sustainability_plan||"Not specified"})]})]}),(0,b.jsx)(J,{ideaId:a,levelNumber:4,isOwner:f,isAuthenticated:h})]})}var S=a.i(92552);function T({ideaId:a}){let{data:c,isLoading:d}=(0,A.useIdeaFeedback)(a),e=c?.data||[];if(d)return(0,b.jsx)("div",{className:"animate-pulse h-48 bg-muted rounded-xl"});if(0===e.length)return(0,b.jsx)(S.Card,{className:"bg-muted/30 border-dashed",children:(0,b.jsxs)(S.CardContent,{className:"pt-6 text-center text-muted-foreground",children:[(0,b.jsx)(G.MessageSquare,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{children:"No feedback received yet. Share your journey to get insights!"})]})});let f=e.length,g=e.filter(a=>a.ratings?.overall).map(a=>a.ratings.overall),h=g.length>0?(g.reduce((a,b)=>a+b,0)/g.length).toFixed(1):"N/A",i=new Set(e.map(a=>a.user_id)).size;return(0,b.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-bold",children:"Feedback Report"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)(S.Card,{children:[(0,b.jsxs)(S.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(S.CardTitle,{className:"text-sm font-medium",children:"Avg Rating"}),(0,b.jsx)(H,{className:"h-4 w-4 text-yellow-500"})]}),(0,b.jsxs)(S.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:h}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"out of 5.0"})]})]}),(0,b.jsxs)(S.Card,{children:[(0,b.jsxs)(S.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(S.CardTitle,{className:"text-sm font-medium",children:"Total Reviews"}),(0,b.jsx)(G.MessageSquare,{className:"h-4 w-4 text-blue-500"})]}),(0,b.jsxs)(S.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:f}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"across all levels"})]})]}),(0,b.jsxs)(S.Card,{children:[(0,b.jsxs)(S.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(S.CardTitle,{className:"text-sm font-medium",children:"Contributors"}),(0,b.jsx)(D.Users,{className:"h-4 w-4 text-green-500"})]}),(0,b.jsxs)(S.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:i}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"unique peers"})]})]})]}),(0,b.jsxs)(S.Card,{className:"border-blue-500/20 bg-blue-500/5",children:[(0,b.jsx)(S.CardHeader,{children:(0,b.jsxs)(S.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(C.TrendingUp,{className:"h-4 w-4"}),"AI Summary (Simulated)"]})}),(0,b.jsx)(S.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Based on the feedback, your idea has strong **Problem Clarity** (Level 1) but peers are skeptical about the **Revenue Model** (Level 4). Consider exploring B2B alternatives suggested in Level 2 feedback."})})]})]})}function U({ideaId:a,levelData:d,isLocked:e=!1,isOwner:f=!1}){let{mutate:h,isPending:i}=(0,A.useUpdateIdeaLevel)(a),{data:j}=(0,A.useIdeaFeedback)(a),k=d?.data||{},[l,m]=(0,c.useState)({key_learnings:k.key_learnings||"",feedback_impact:k.feedback_impact||"",decision:k.decision||"",pow_url:k.pow_url||""});(0,c.useEffect)(()=>{d?.data&&m({key_learnings:d.data.key_learnings||"",feedback_impact:d.data.feedback_impact||"",decision:d.data.decision||"",pow_url:d.data.pow_url||""})},[d]);let n=a=>{let{name:b,value:c}=a.target;m(a=>({...a,[b]:c}))};return e?(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,b.jsx)("p",{children:"Complete Level 4: Sustainability to unlock this level."})}):f?(0,b.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[(0,b.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,b.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Reflection"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"What happened? What's next?"})]}),(0,b.jsx)(T,{ideaId:a}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),!e&&f&&h({levelNumber:5,data:l})},className:"space-y-8",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"decision",className:"text-base font-semibold text-foreground",children:["Decision ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Based on evidence, not feelings)"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{id:"decision",name:"decision",value:l.decision,onChange:n,disabled:i,className:"flex h-12 w-full items-center justify-between rounded-md border border-input/60 bg-background/50 px-4 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none transition-colors",children:[(0,b.jsx)("option",{value:"",children:"Select a verdict..."}),(0,b.jsx)("option",{value:"GO",children:"ðŸš€ GO (Build it)"}),(0,b.jsx)("option",{value:"NO-GO",children:"ðŸ›‘ NO-GO (Drop it)"}),(0,b.jsx)("option",{value:"PIVOT",children:"ðŸ”„ PIVOT (Change direction)"})]}),(0,b.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted-foreground",children:(0,b.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"key_learnings",className:"text-base font-semibold text-foreground",children:["Key Learnings ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:'(The "Aha!" Moment)'})]}),(0,b.jsx)(z,{id:"key_learnings",name:"key_learnings",placeholder:"What did you discover that you didn't know before starting?",value:l.key_learnings,onChange:n,disabled:i,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"feedback_impact",className:"text-base font-semibold text-foreground",children:["Feedback Impact ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Course Correction)"})]}),(0,b.jsx)(z,{id:"feedback_impact",name:"feedback_impact",placeholder:"How did the global brain (peer feedback) change your trajectory?",value:l.feedback_impact,onChange:n,disabled:i,className:"min-h-[100px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{htmlFor:"pow_url",className:"text-base font-semibold text-foreground",children:["Proof of Work ",(0,b.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Show Your Work)"})]}),(0,b.jsx)(y.Input,{id:"pow_url",name:"pow_url",placeholder:"Link to the evidence (Notion doc, Tweets, GitHub, etc.)",value:l.pow_url,onChange:n,disabled:i,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4",children:j?.data&&0===j.data.length?(0,b.jsxs)("div",{className:"text-right space-y-2",children:[(0,b.jsxs)("div",{className:"p-4 rounded-lg bg-orange-50 border border-orange-200 text-orange-800 text-sm max-w-md ml-auto",children:[(0,b.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:[(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,b.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),"Feedback Required"]}),(0,b.jsx)("p",{className:"mt-1",children:"You cannot complete the journey without peer feedback. Share your idea to get at least 1 review."})]}),(0,b.jsx)(g.Button,{disabled:!0,variant:"ghost",className:"opacity-50 cursor-not-allowed",children:"Complete Journey"})]}):(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"lg",disabled:i,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:i?"Finish Journey":"Complete Journey"})})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Reflection"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Outcome of the validation journey."})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Decision"}),(0,b.jsx)("div",{className:"inline-block rounded-full bg-primary/10 px-3 py-1 text-sm font-semibold text-primary",children:l.decision||"Pending"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Key Learnings"}),(0,b.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:l.key_learnings||"Not specified"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Proof of Work"}),l.pow_url?(0,b.jsx)("a",{href:l.pow_url,target:"_blank",rel:"noopener noreferrer",className:"block text-sm text-blue-500 hover:underline break-all",children:l.pow_url}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Not provided"})]})]})]})}var V=a.i(58547),W=a.i(33217),X=a.i(70025),Y=a.i(37927);a.i(57788),a.i(90754),a.i(2088);var Z=a.i(36765);a.i(41101),a.i(87201);var $=a.i(7554),_=a.i(70121),aa=a.i(25152),ab=a.i(3688);a.i(35112);var ac=Symbol("radix.slottable");function ad(a){return c.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===ac}var ae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,d)=>{var e,f;let g,h,i,j=(f=e=`Primitive.${d}`,(g=c.forwardRef((a,b)=>{let{children:d,...e}=a;if(c.isValidElement(d)){var f;let a,g,h=(f=d,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,d.props);return d.type!==c.Fragment&&(i.ref=b?(0,_.composeRefs)(b,h):h),c.cloneElement(d,i)}return c.Children.count(d)>1?c.Children.only(null):null})).displayName=`${f}.SlotClone`,h=g,(i=c.forwardRef((a,d)=>{let{children:e,...f}=a,g=c.Children.toArray(e),i=g.find(ad);if(i){let a=i.props.children,e=g.map(b=>b!==i?b:c.Children.count(a)>1?c.Children.only(null):c.isValidElement(a)?a.props.children:null);return(0,b.jsx)(h,{...f,ref:d,children:c.isValidElement(a)?c.cloneElement(a,void 0,e):null})}return(0,b.jsx)(h,{...f,ref:d,children:e})})).displayName=`${e}.Slot`,i),k=c.forwardRef((a,c)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?j:d,{...f,ref:c})});return k.displayName=`Primitive.${d}`,{...a,[d]:k}},{}),af="Switch",[ag,ah]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;e=[...e,f];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(af),[ai,aj]=ag(af),ak=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:m,...n}=a,[o,p]=c.useState(null),q=(0,_.useComposedRefs)(d,a=>p(a)),r=c.useRef(!1),s=!o||m||!!o.closest("form"),[t,u]=(0,aa.useControllableState)({prop:g,defaultProp:h??!1,onChange:l,caller:af});return(0,b.jsxs)(ai,{scope:e,checked:t,disabled:j,children:[(0,b.jsx)(ae.button,{type:"button",role:"switch","aria-checked":t,"aria-required":i,"data-state":ao(t),"data-disabled":j?"":void 0,disabled:j,value:k,...n,ref:q,onClick:(0,$.composeEventHandlers)(a.onClick,a=>{u(a=>!a),s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})}),s&&(0,b.jsx)(an,{control:o,bubbles:!r.current,name:f,value:k,checked:t,required:i,disabled:j,form:m,style:{transform:"translateX(-100%)"}})]})});ak.displayName=af;var al="SwitchThumb",am=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=aj(al,d);return(0,b.jsx)(ae.span,{"data-state":ao(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});am.displayName=al;var an=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let i,j=c.useRef(null),k=(0,_.useComposedRefs)(j,h),l=(i=c.useRef({value:e,previous:e}),c.useMemo(()=>(i.current.value!==e&&(i.current.previous=i.current.value,i.current.value=e),i.current.previous),[e])),m=(0,ab.useSize)(d);return c.useEffect(()=>{let a=j.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[l,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:k,style:{...g.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ao(a){return a?"checked":"unchecked"}an.displayName="SwitchBubbleInput";let ap=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(ak,{className:(0,m.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(am,{className:(0,m.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ap.displayName=ak.displayName;let aq=(0,s.default)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var ar=a.i(96221);function as({ideaId:a,trigger:d}){let e,[f,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[o,p]=(0,c.useState)(!1),{mutate:q,isPending:r}=(e=(0,Y.useQueryClient)(),(0,X.useMutation)({mutationFn:async b=>{let c=await Z.apiClient.post(`/api/ideas/${a}/back`,b);if(c.error)throw Error(c.error.message);return c.data},onSuccess:async()=>{await e.invalidateQueries({queryKey:["idea_backers_v2",a]}),await e.refetchQueries({queryKey:["idea_backers_v2",a]}),n.toast.success("Thanks for backing this idea!")},onError:a=>{console.error("Backing failed:",a),n.toast.error("Failed to back idea. Please try again.")}}));return(0,b.jsxs)(L.Dialog,{open:f,onOpenChange:h,children:[(0,b.jsx)(L.DialogTrigger,{asChild:!0,children:d||(0,b.jsxs)(g.Button,{variant:"shimmer-primary",size:"lg",className:"flex-1 sm:flex-initial sm:w-auto gap-2 font-bold text-sm sm:text-base h-10 sm:h-11",children:[(0,b.jsx)(aq,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Back this Idea"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Back"})]})}),(0,b.jsxs)(L.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)(L.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,b.jsx)(aq,{className:"h-5 w-5 text-primary"}),"Back this Idea"]}),(0,b.jsx)(L.DialogDescription,{children:"Pledge your support to show the founder there is real market demand. This is a non-binding pledge."})]}),(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(V.Label,{children:"Select Pledge Amount"}),(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[10,50,100,500].map(a=>{let c=parseInt(i)===a;return(0,b.jsxs)("button",{type:"button",onClick:()=>j(a.toString()),className:(0,m.cn)("flex h-10 items-center justify-center rounded-md border text-sm font-medium transition-all hover:scale-105 active:scale-95",c?"border-primary/50 bg-primary/10 text-primary shadow-[0_0_10px_-2px_rgba(255,255,255,0.1)]":"border-white/10 bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"),children:["â‚¹",a]},a)})}),(0,b.jsxs)("div",{className:"relative mt-2",children:[(0,b.jsx)("span",{className:"absolute left-3 top-2.5 text-muted-foreground",children:"â‚¹"}),(0,b.jsx)(y.Input,{type:"number",placeholder:"Custom Amount",value:i,onChange:a=>j(a.target.value),className:"pl-6 bg-white/5 border-white/10 focus-visible:ring-primary/50",min:"0"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(V.Label,{children:"Leave a Comment (Optional)"}),(0,b.jsx)(z,{placeholder:"I'd buy this if...",value:k,onChange:a=>l(a.target.value),className:"resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[100px]"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 rounded-lg border border-white/5 bg-white/[0.02] p-3",children:[(0,b.jsx)(ap,{id:"anonymous",checked:o,onCheckedChange:p}),(0,b.jsx)(V.Label,{htmlFor:"anonymous",className:"cursor-pointer",children:"Back Anonymously"})]})]}),(0,b.jsx)(L.DialogFooter,{children:(0,b.jsxs)(g.Button,{onClick:()=>{let a=parseInt(i);isNaN(a)||a<0||q({pledge_amount:a,comment:k,is_anonymous:o},{onSuccess:()=>{h(!1),j(""),l("")}})},disabled:r||!i,variant:"shimmer-primary",className:"w-full font-bold",children:[r&&(0,b.jsx)(ar.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm Pledge"]})})]})]})}function at({ideaId:a}){let{data:c,isLoading:d,isError:e}=(0,W.useQuery)({queryKey:["idea_backers_v2",a],queryFn:async()=>{let b=await Z.apiClient.get(`/api/ideas/${a}/backers`);if(b.error)throw Error(b.error.message);return b.data}});if(d)return(0,b.jsx)("div",{className:"w-full animate-pulse h-48 rounded-3xl bg-white/5 border border-white/5"});if(e||!c)return(0,b.jsxs)("div",{className:"w-full h-48 rounded-3xl bg-[#09090b] border border-white/5 flex flex-col items-center justify-center p-6 text-center",children:[(0,b.jsx)(v,{className:"h-8 w-8 text-muted-foreground mb-2 opacity-20"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unable to load valuation data"})]});let{meta:g,data:h}=c,i=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(g?.total_pledged||0);return(0,b.jsxs)(S.Card,{variant:"glass-shimmer",className:"relative w-full overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-[#7877c6]/10 blur-[80px]"}),(0,b.jsxs)("div",{className:"relative z-10 p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs md:text-sm font-bold uppercase tracking-wider text-muted-foreground",children:[(0,b.jsx)(C.TrendingUp,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"Implied Valuation"})]}),(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"font-heading text-3xl font-bold tracking-tight text-white md:text-4xl lg:text-5xl",children:i}),(0,b.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"(Demand)"})]}),(0,b.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground/60",children:["Based on ",g?.backers_count||0," backers pledging non-binding support."]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-muted-foreground",children:[(0,b.jsx)(D.Users,{className:"h-3 w-3"}),"Recent Backers"]}),h&&0!==h.length?(0,b.jsx)("div",{className:"space-y-2",children:h.slice(0,5).map(a=>(0,b.jsxs)("div",{className:"group flex items-center gap-3 rounded-xl border border-transparent bg-white/2 p-2 transition-all hover:bg-white/5 hover:border-white/5",children:[(0,b.jsxs)(f.Avatar,{className:"h-8 w-8 ring-1 ring-white/10",children:[(0,b.jsx)(f.AvatarImage,{src:a.is_anonymous?void 0:a.user?.avatar_url||void 0}),(0,b.jsx)(f.AvatarFallback,{className:"bg-white/5 text-[10px] text-muted-foreground",children:a.is_anonymous?"?":a.user?.full_name?.[0]||"U"})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"truncate text-sm font-medium text-foreground/90 group-hover:text-foreground",children:a.is_anonymous?"Anonymous Backer":a.user?.full_name||"User"}),(0,b.jsxs)("span",{className:"shrink-0 rounded-md bg-[#7877c6]/10 px-2 py-0.5 text-xs font-bold text-[#fafafa] border border-[#7877c6]/20",children:["â‚¹",a.pledge_amount.toLocaleString()]})]}),a.comment&&(0,b.jsxs)("p",{className:"truncate text-xs text-muted-foreground/60 italic max-w-[200px]",children:['"',a.comment,'"']})]})]},a.id))}):(0,b.jsx)("div",{className:"rounded-xl border border-dashed border-white/10 bg-white/2 p-4 text-center",children:(0,b.jsx)("p",{className:"text-sm italic text-muted-foreground",children:"Be the first to back this idea!"})})]})]})]})}var au=a.i(83974);let av=(0,s.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);var aw=a.i(83604),aw=aw,ax=a.i(68177);let ay=(0,a.i(187).cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function az({className:a,variant:c,...d}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,m.cn)(ay({variant:c}),a),...d})}function aA({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,m.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}function aB({ideaId:a,currentTitle:d,currentDescription:e,trigger:f}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)({}),{data:t}=(0,au.useVersionHistory)(a),{mutate:u,isPending:v}=(0,au.useCreatePivot)(a);return t?.data?.length,(0,b.jsxs)(L.Dialog,{open:h,onOpenChange:a=>{i(a),a||s({})},children:[(0,b.jsx)(L.DialogTrigger,{asChild:!0,children:f||(0,b.jsxs)(g.Button,{variant:"shimmer-primary",size:"lg",className:"w-full sm:w-auto gap-2 font-bold",children:[(0,b.jsx)(av,{className:"h-5 w-5"}),"Create Pivot"]})}),(0,b.jsxs)(L.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)(L.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading",children:[(0,b.jsx)(av,{className:"h-5 w-5 text-primary"}),"Create New Pivot"]}),(0,b.jsx)(L.DialogDescription,{children:"Archive the current version and evolve your idea. Your journey will be preserved."})]}),(0,b.jsxs)("form",{onSubmit:a=>{let b;a.preventDefault(),s({}),b={},j.trim()||l.trim()||(b.general="Please provide at least a new title or description"),p.trim()?p.trim().length<10&&(b.pivotReason="Pivot reason must be at least 10 characters"):b.pivotReason="Pivot reason is required",j.trim()&&j.trim().length<3&&(b.newTitle="Title must be at least 3 characters"),l.trim()&&l.trim().length<10&&(b.newDescription="Description must be at least 10 characters"),s(b),0===Object.keys(b).length&&u({new_title:j.trim()||void 0,new_description:l.trim()||void 0,pivot_reason:p.trim()},{onSuccess:()=>{i(!1),k(""),o(""),q(""),s({})},onError:a=>{try{let b=JSON.parse(a.message);if(b.errors){let a={};Object.entries(b.errors).forEach(([b,c])=>{a[b]=c.join(", ")}),s(a)}}catch{n.toast.error(a.message||"Failed to create pivot")}}})},children:[(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-white/5 bg-white/2 p-3 flex items-start gap-3",children:[(0,b.jsx)(aw.default,{className:"mt-0.5 h-4 w-4 text-primary shrink-0"}),(0,b.jsxs)("div",{className:"text-sm text-foreground/90 leading-relaxed",children:["This action archives the current state as",(0,b.jsxs)(ax.Badge,{variant:"outline",className:"mx-1.5 border-primary/30 text-primary bg-primary/10",children:["v",t?.data?t.data.length+1:1]}),"and creates a new working version."]})]}),r.general&&(0,b.jsxs)(az,{variant:"destructive",className:"border-rose-500/20 bg-rose-950/20 text-rose-200",children:[(0,b.jsx)(aw.default,{className:"h-4 w-4"}),(0,b.jsx)(aA,{children:r.general})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(V.Label,{className:"text-muted-foreground uppercase tracking-wider text-xs font-bold",children:"Archiving Version"}),(0,b.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/2 p-4",children:[(0,b.jsx)("p",{className:"font-heading font-semibold text-foreground text-lg",children:d}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"new-title",children:["New Title ",(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-normal ml-1",children:"(Optional)"})]}),(0,b.jsx)(y.Input,{id:"new-title",value:j,onChange:a=>k(a.target.value),placeholder:"Leave blank to keep current title",maxLength:200,className:(0,m.cn)("bg-white/5 border-white/10 focus-visible:ring-primary/50",r.newTitle&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),r.newTitle&&(0,b.jsx)("p",{className:"text-sm text-rose-500",children:r.newTitle})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"new-description",children:["New Description ",(0,b.jsx)("span",{className:"text-muted-foreground text-xs font-normal ml-1",children:"(Optional)"})]}),(0,b.jsx)(z,{id:"new-description",value:l,onChange:a=>o(a.target.value),placeholder:"Leave blank to keep current description",rows:3,maxLength:5e3,className:(0,m.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50",r.newDescription&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),r.newDescription&&(0,b.jsx)("p",{className:"text-sm text-rose-500",children:r.newDescription})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)(V.Label,{htmlFor:"pivot-reason",className:"text-foreground",children:["Why are you pivoting? ",(0,b.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,b.jsxs)("span",{className:(0,m.cn)("text-xs",p.length<10?"text-rose-400":"text-emerald-400"),children:[p.length,"/1000"]})]}),(0,b.jsx)(z,{id:"pivot-reason",value:p,onChange:a=>q(a.target.value),placeholder:"E.g., Customer interviews revealed nobody cares about X...",rows:3,maxLength:1e3,className:(0,m.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[100px]",r.pivotReason&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),r.pivotReason&&(0,b.jsx)("p",{className:"text-sm text-rose-500",children:r.pivotReason})]})]})]}),(0,b.jsx)(L.DialogFooter,{className:"flex-col gap-3 sm:gap-0",children:(0,b.jsxs)(g.Button,{type:"submit",variant:"shimmer-primary",disabled:v,className:"w-full font-bold",children:[v&&(0,b.jsx)(ar.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm & Create Pivot"]})})]})]})]})}let aC=(0,s.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var aD=a.i(30553),aE="horizontal",aF=["horizontal","vertical"],aG=c.forwardRef((a,c)=>{var d;let{decorative:e,orientation:f=aE,...g}=a,h=(d=f,aF.includes(d))?f:aE;return(0,b.jsx)(aD.Primitive.div,{"data-orientation":h,...e?{role:"none"}:{"aria-orientation":"vertical"===h?h:void 0,role:"separator"},...g,ref:c})});function aH({className:a,orientation:c="horizontal",decorative:d=!0,...e}){return(0,b.jsx)(aG,{"data-slot":"separator",decorative:d,orientation:c,className:(0,m.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...e})}function aI({version:a,onClose:c}){return(0,b.jsx)(L.Dialog,{open:!0,onOpenChange:c,children:(0,b.jsxs)(L.DialogContent,{variant:"glass",className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(L.DialogTitle,{children:a.is_current?"Current Version":`Version ${a.version_number}`}),a.is_current&&(0,b.jsx)(ax.Badge,{children:"Live"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,m.formatDistanceToNow)(a.created_at)})]}),(0,b.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Title"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:a.title})]}),(0,b.jsx)(aH,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.description})]}),a.pivot_reason&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aH,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Reason for Pivot"}),(0,b.jsx)(S.Card,{variant:"glass",className:"p-4 border-white/5 bg-white/5",children:(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.pivot_reason})})]})]}),(0,b.jsx)(aH,{}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Forge Level:"}),(0,b.jsxs)("span",{className:"ml-2 font-medium",children:["Level ",a.current_level_at_pivot]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Version:"}),(0,b.jsxs)("span",{className:"ml-2 font-medium",children:["#",a.version_number]})]})]})]})]})})}function aJ({ideaId:a}){let{data:d,isLoading:e,isError:f}=(0,au.useVersionHistory)(a),[g,i]=(0,c.useState)(null);if(e)return(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)(h.Skeleton,{className:"h-32 w-full rounded-2xl bg-white/5"},a))});if(f||!d?.data||0===d.data.length)return(0,b.jsxs)(S.Card,{variant:"glass",className:"flex flex-col items-center justify-center border-dashed p-12 text-center bg-white/2",children:[(0,b.jsx)("div",{className:"mb-4 rounded-full bg-white/5 p-4",children:(0,b.jsx)(av,{className:"h-8 w-8 text-muted-foreground/50"})}),(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"No version history yet"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground/60",children:"Versions are created when you pivot your idea."})]});let j=d.data;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative space-y-6 pl-4",children:[(0,b.jsx)("div",{className:"absolute left-[34px] top-6 bottom-6 w-px bg-gradient-to-b from-primary/50 via-white/10 to-transparent"}),j.map((a,c)=>{j.length;let d=a.is_current;return(0,b.jsxs)("div",{className:"group relative flex gap-6",onClick:()=>i(a),children:[(0,b.jsx)("div",{className:"relative z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-white/10 bg-[#09090b] shadow-xl transition-all duration-300 group-hover:scale-110 group-hover:border-primary/50",children:d?(0,b.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary),0.5)] animate-pulse"}):(0,b.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-muted-foreground/30"})}),(0,b.jsxs)(S.Card,{variant:d?void 0:"glass",className:(0,m.cn)("relative flex-1 cursor-pointer overflow-hidden p-5 transition-all duration-300 hover:shadow-2xl hover:-translate-y-0.5",d&&"border-primary/20 bg-primary/2 shadow-lg"),children:[d&&(0,b.jsx)("div",{className:"absolute right-0 top-0 h-16 w-16 -translate-y-8 translate-x-8 rounded-full bg-primary/10 blur-2xl"}),(0,b.jsx)("div",{className:"mb-3 flex items-center justify-between gap-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(ax.Badge,{variant:d?"default":"outline",className:(0,m.cn)("rounded-md px-2 py-0.5 text-[10px] uppercase tracking-wider font-bold",!d&&"border-white/10 text-muted-foreground bg-transparent"),children:d?"Current Version":`v${a.version_number}`}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground/60 flex items-center gap-1",children:[(0,b.jsx)(aC,{className:"h-3 w-3"}),(0,m.formatDistanceToNow)(a.created_at)," ago"]})]})}),(0,b.jsx)("h4",{className:"mb-2 font-heading text-lg font-semibold text-foreground group-hover:text-primary transition-colors",children:a.title}),(0,b.jsx)("p",{className:"text-sm leading-relaxed text-muted-foreground line-clamp-2",children:a.description}),a.pivot_reason&&!d&&(0,b.jsxs)("div",{className:"mt-4 rounded-xl border border-white/5 bg-white/2 p-3",children:[(0,b.jsx)("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-wider text-muted-foreground/70",children:"Reason for Pivot"}),(0,b.jsxs)("p",{className:"text-sm italic text-muted-foreground",children:['"',a.pivot_reason,'"']})]}),(0,b.jsx)("div",{className:"mt-4 flex items-center gap-2",children:(0,b.jsxs)(ax.Badge,{variant:"secondary",className:"bg-white/5 hover:bg-white/10 text-muted-foreground border-white/5",children:["Level ",a.current_level_at_pivot]})})]})]},a.id)})]}),g&&(0,b.jsx)(aI,{version:g,onClose:()=>i(null)})]})}aG.displayName="Separator",a.i(37308);var aK=a.i(98017);a.i(22036);var aL=a.i(23273);let aM=(0,s.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function aN({ideaId:a,currentTitle:d,currentDescription:e,trigger:f,open:h,onOpenChange:j}){let[k,l]=(0,c.useState)(!1),[n,o]=(0,c.useState)(d),[p,q]=(0,c.useState)(e),[r,s]=(0,c.useState)({}),{mutate:t,isPending:u}=(0,i.useUpdateIdea)(a),v=void 0!==h?h:k,w=j||l;return(0,c.useEffect)(()=>{v&&(o(d),q(e),s({}))},[v,d,e]),(0,b.jsxs)(L.Dialog,{open:v,onOpenChange:a=>{w(a),a||s({})},children:[f&&(0,b.jsx)(L.DialogTrigger,{asChild:!0,children:f}),(0,b.jsxs)(L.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)(L.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading",children:[(0,b.jsx)(aM,{className:"h-5 w-5 text-primary"}),"Edit Idea"]}),(0,b.jsx)(L.DialogDescription,{children:"Update your idea's title and description."})]}),(0,b.jsxs)("form",{onSubmit:a=>{let b;if(a.preventDefault(),s({}),b={},n.trim()?n.trim().length<3&&(b.title="Title must be at least 3 characters"):b.title="Title is required",p.trim()?p.trim().length<10&&(b.description="Description must be at least 10 characters"):b.description="Description is required",s(b),0!==Object.keys(b).length)return;let c={};(n.trim()!==d&&(c.title=n.trim()),p.trim()!==e&&(c.description=p.trim()),0===Object.keys(c).length)?w(!1):t(c,{onSuccess:()=>{w(!1)},onError:a=>{try{let b=JSON.parse(a.message);if(b.errors){let a={};Object.entries(b.errors).forEach(([b,c])=>{a[b]=c.join(", ")}),s(a)}}catch{s({general:a.message||"Failed to update idea"})}}})},children:[(0,b.jsxs)("div",{className:"grid gap-5 py-4",children:[r.general&&(0,b.jsx)("div",{className:"rounded-lg border border-rose-500/20 bg-rose-950/20 px-4 py-3 text-sm text-rose-200",children:r.general}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"edit-title",className:"text-foreground",children:["Title ",(0,b.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,b.jsx)(y.Input,{id:"edit-title",value:n,onChange:a=>o(a.target.value),placeholder:"A compelling title for your idea",maxLength:200,className:(0,m.cn)("bg-white/5 border-white/10 focus-visible:ring-primary/50",r.title&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),r.title&&(0,b.jsx)("p",{className:"text-sm text-rose-500",children:r.title}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[n.length,"/200"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(V.Label,{htmlFor:"edit-description",className:"text-foreground",children:["Description ",(0,b.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,b.jsx)(z,{id:"edit-description",value:p,onChange:a=>q(a.target.value),placeholder:"Describe your idea in detail...",rows:6,maxLength:5e3,className:(0,m.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[150px]",r.description&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),r.description&&(0,b.jsx)("p",{className:"text-sm text-rose-500",children:r.description}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[p.length,"/5000"]})]})]}),(0,b.jsxs)(L.DialogFooter,{className:"flex-col gap-3 sm:flex-row sm:gap-2",children:[(0,b.jsx)(g.Button,{type:"button",variant:"ghost",onClick:()=>w(!1),disabled:u,className:"w-full sm:w-auto",children:"Cancel"}),(0,b.jsxs)(g.Button,{type:"submit",variant:"shimmer-primary",disabled:u,className:"w-full sm:w-auto font-bold",children:[u&&(0,b.jsx)(ar.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})]})}var aO=a.i(81560),aw=aw;function aP({ideaId:a,ideaTitle:e,trigger:f,open:h,onOpenChange:j}){let k=(0,d.useRouter)(),[l,m]=(0,c.useState)(!1),{mutate:n,isPending:o}=(0,i.useDeleteIdea)(),p=j||m;return(0,b.jsxs)(L.Dialog,{open:void 0!==h?h:l,onOpenChange:p,children:[f&&(0,b.jsx)(L.DialogTrigger,{asChild:!0,children:f}),(0,b.jsxs)(L.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(L.DialogHeader,{children:[(0,b.jsxs)(L.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading text-rose-500",children:[(0,b.jsx)(aO.Trash2,{className:"h-5 w-5"}),"Delete Idea"]}),(0,b.jsx)(L.DialogDescription,{className:"text-foreground/80",children:"Are you sure you want to delete this idea?"})]}),(0,b.jsx)("div",{className:"py-4",children:(0,b.jsx)("div",{className:"rounded-xl border border-rose-500/20 bg-rose-950/20 p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(aw.default,{className:"h-5 w-5 text-rose-500 shrink-0 mt-0.5"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"This action cannot be undone"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Deleting ",(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:['"',e,'"']})," will permanently remove:"]}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All version history and pivots"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All collaborators and invites"]}),(0,b.jsxs)("li",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All comments and votes"]})]})]})]})})}),(0,b.jsxs)(L.DialogFooter,{className:"flex-col gap-3 sm:flex-row sm:gap-2",children:[(0,b.jsx)(g.Button,{type:"button",variant:"ghost",onClick:()=>p(!1),disabled:o,className:"w-full sm:w-auto",children:"Cancel"}),(0,b.jsxs)(g.Button,{type:"button",variant:"destructive",onClick:()=>{n(a,{onSuccess:()=>{p(!1),k.push("/")}})},disabled:o,className:"w-full sm:w-auto font-bold bg-rose-600 hover:bg-rose-700",children:[o&&(0,b.jsx)(ar.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Forever"]})]})]})]})}var aQ=a.i(79360),aR=a.i(5151);let aS=(0,s.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var aT=a.i(43108),aU=a.i(23979),aV=a.i(51444);function aW({ideaId:a,ideaTitle:e,ideaDescription:f,canEdit:h,canDelete:i,visibility:j}){let[k,l]=(0,c.useState)(!1),[m,o]=(0,c.useState)(!1),p=(0,d.useRouter)(),q=async()=>{let b=(0,aV.createClient)(),c="public"===j?"private":"public",{error:d}=await b.from("ideas").update({visibility:c}).eq("id",a);d?n.toast.error("Failed to update visibility"):(n.toast.success(`Idea is now ${c}`),p.refresh())},r=()=>{let b=`${window.location.origin}/share/${a}`;navigator.clipboard.writeText(b),n.toast.success("Link copied to clipboard!")};return h||i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(aU.DropdownMenu,{children:[(0,b.jsx)(aU.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/20 text-muted-foreground hover:text-foreground transition-all",children:[(0,b.jsx)(aQ.MoreVertical,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"sr-only",children:"Open idea menu"})]})}),(0,b.jsxs)(aU.DropdownMenuContent,{align:"end",className:"w-48 bg-[#09090b]/95 backdrop-blur-xl border-white/10",children:[(0,b.jsxs)(aU.DropdownMenuItem,{onClick:r,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(aR.Copy,{className:"h-4 w-4"}),"Share"]}),(0,b.jsxs)(aU.DropdownMenuItem,{onClick:r,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(aR.Copy,{className:"h-4 w-4"}),"Share Link"]}),(h||i)&&(0,b.jsx)(aU.DropdownMenuSeparator,{className:"bg-white/10"}),h&&(0,b.jsx)(aU.DropdownMenuItem,{onClick:q,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:"public"===j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aT.Lock,{className:"h-4 w-4"}),"Make Private"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aS,{className:"h-4 w-4"}),"Make Public"]})}),h&&(0,b.jsxs)(aU.DropdownMenuItem,{onClick:()=>l(!0),className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(aM,{className:"h-4 w-4"}),"Edit Idea"]}),i&&(0,b.jsxs)(aU.DropdownMenuItem,{onClick:()=>o(!0),className:"cursor-pointer gap-2 text-rose-500 focus:text-rose-500 focus:bg-rose-500/10",children:[(0,b.jsx)(aO.Trash2,{className:"h-4 w-4"}),"Delete Idea"]})]})]}),(0,b.jsx)(aN,{ideaId:a,currentTitle:e,currentDescription:f,open:k,onOpenChange:l}),(0,b.jsx)(aP,{ideaId:a,ideaTitle:e,open:m,onOpenChange:o})]}):null}function aX({id:a}){return a&&"undefined"!==a?(0,b.jsx)(aY,{id:a}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("main",{className:"mx-auto max-w-7xl px-6 pt-32 pb-8",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border border-dashed border-border bg-card/50 p-12 text-center",children:[(0,b.jsx)("p",{className:"font-display text-xl font-semibold text-foreground",children:"Invalid idea"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"This link appears to be broken."}),(0,b.jsx)(g.Button,{variant:"mint",size:"pill",asChild:!0,className:"mt-6",children:(0,b.jsx)("a",{href:"/",children:"Go home"})})]})})]})}function aY({id:a}){let{data:c,isLoading:d,isError:f,error:h}=(0,i.useIdea)(a),{user:j,isAuthenticated:k,loading:m}=(0,l.useAuth)();if(d)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8 min-h-[calc(100vh-4rem)]",children:(0,b.jsx)(a_,{})})]});if(f||!c)return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Header,{}),(0,b.jsx)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border border-dashed border-border bg-card/50 p-12 text-center",children:[(0,b.jsx)("p",{className:"font-display text-xl font-semibold text-foreground",children:"Idea not found"}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:h?.message||"This idea may have been deleted."}),(0,b.jsx)(g.Button,{variant:"mint",size:"pill",asChild:!0,className:"mt-6",children:(0,b.jsx)("a",{href:"/",children:"Go home"})})]})})]});let n=c.data;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Header,{}),(0,b.jsxs)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8 min-h-[calc(100vh-4rem)]",children:[(0,b.jsx)(aZ,{idea:n,user:j,isAuthenticated:k,authLoading:m}),(0,b.jsx)(a$,{ideaId:a,isAuthenticated:k,authLoading:m})]})]})}function aZ({idea:a,user:e,isAuthenticated:h,authLoading:i}){let k=(0,d.useRouter)(),{mutate:l,isPending:p}=(0,j.useVote)(a.id),{mutate:q,isPending:r}=(0,j.useRemoveVote)(a.id),{data:s}=(0,A.useIdeaLevels)(a.id),[t,u]=(0,c.useState)("journey"),v=h&&e?.id===a.user_id,{canEdit:w,canManage:y,isCollaborator:z}=(0,aL.useCollaboratorRole)(a.id,e?.id,v),B=a.current_level||0,[C,D]=(0,c.useState)(B),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(B);(0,c.useEffect)(()=>{B>G?(F(!0),D(B),H(B)):B!==G&&(D(B),H(B))},[B,G]);let I=a.user_vote?.value,J=(a.upvotes_count??0)-(a.downvotes_count??0),L=b=>{if(!i){if(!h){n.toast.info("Please sign in to vote"),k.push(`/login?redirectTo=/ideas/${a.id}`);return}I===b?q():l(b)}};return(0,b.jsxs)("article",{className:"group relative mb-8 overflow-hidden rounded-[2.5rem] bg-[#09090b]/80 border border-white/5 shadow-2xl backdrop-blur-md transition-all",children:[(0,b.jsx)("div",{className:"absolute -right-40 -top-40 h-96 w-96 rounded-full bg-[#7877c6]/10 blur-[120px] pointer-events-none"}),(0,b.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pb-0",children:[(0,b.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col sm:flex-row gap-4 sm:gap-6 sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,b.jsxs)(f.Avatar,{className:"h-10 w-10 sm:h-12 md:h-14 sm:w-12 md:w-14 border-2 border-white/10 shadow-md shrink-0",children:[(0,b.jsx)(f.AvatarImage,{src:a.author?.avatar_url||void 0}),(0,b.jsx)(f.AvatarFallback,{className:"bg-white/10 text-foreground text-sm sm:text-base",children:(0,m.getInitials)(a.author?.full_name)})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0",children:[(0,b.jsx)("span",{className:"text-base sm:text-lg font-bold text-foreground tracking-tight truncate",children:a.author?.full_name||"Anonymous"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:(0,m.formatDistanceToNow)(a.created_at)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_auto] sm:flex sm:flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[w&&(0,b.jsx)(aB,{ideaId:a.id,currentTitle:a.title,currentDescription:a.description}),(0,b.jsx)(as,{ideaId:a.id}),(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",className:"gap-2 h-10 w-10 sm:w-auto sm:px-4 rounded-full bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/20 text-muted-foreground hover:text-foreground transition-all text-sm justify-center",onClick:()=>{let b=`${window.location.origin}/share/${a.id}`;navigator.clipboard.writeText(b),n.toast.success("Public link copied!")},children:[(0,b.jsx)(o.Share2,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Share"})]}),(0,b.jsx)(aW,{ideaId:a.id,ideaTitle:a.title,ideaDescription:a.description,visibility:a.visibility||"public",canEdit:w,canDelete:y})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:gap-8 lg:grid-cols-[1fr_300px]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"mb-4 md:mb-6 font-display text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-[1.1] text-foreground tracking-tight drop-shadow-sm",children:a.title}),(0,b.jsx)("p",{className:"mb-6 text-sm sm:text-base md:text-lg text-muted-foreground leading-relaxed whitespace-pre-wrap",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 rounded-full border border-border bg-background/50 p-1 sm:p-1.5 shadow-sm",children:[(0,b.jsx)("button",{onClick:()=>L(1),disabled:p||r||i,className:`flex items-center justify-center rounded-full w-8 h-8 sm:w-9 sm:h-9 transition-colors hover:bg-muted ${1===I?"bg-green-500/10 text-green-600 hover:bg-green-500/20":"text-muted-foreground"}`,children:(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:1===I?"fill-current":"",children:(0,b.jsx)("path",{d:"M18 15l-6-6-6 6"})})}),(0,b.jsx)("span",{className:"min-w-6 sm:min-w-8 text-center text-sm sm:text-base font-bold text-foreground",children:J>0?`+${J}`:J}),(0,b.jsx)("button",{onClick:()=>L(-1),disabled:p||r||i,className:`flex items-center justify-center rounded-full w-8 h-8 sm:w-9 sm:h-9 transition-colors hover:bg-muted ${-1===I?"bg-red-500/10 text-red-600 hover:bg-red-500/20":"text-muted-foreground"}`,children:(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:-1===I?"fill-current":"",children:(0,b.jsx)("path",{d:"M6 9l6 6 6-6"})})})]}),(0,b.jsxs)("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium text-muted-foreground",children:[(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.comments_count??0," comments"]})]})]}),(0,b.jsx)("div",{className:"lg:pt-2",children:(0,b.jsx)(at,{ideaId:a.id})})]}),(0,b.jsx)("div",{className:"-mx-4 sm:mx-0 mt-8 md:mt-12 border-b border-white/10",children:(0,b.jsx)("div",{className:"flex items-center gap-4 sm:gap-6 md:gap-8 overflow-x-auto scrollbar-hide px-4 sm:px-2",children:["journey","history",...v||z?["team"]:[]].map(a=>(0,b.jsxs)("button",{onClick:()=>u(a),className:(0,m.cn)("pb-3 md:pb-4 text-xs sm:text-sm font-bold tracking-wide uppercase transition-all relative whitespace-nowrap shrink-0",t===a?"text-foreground":"text-muted-foreground/60 hover:text-foreground/80"),children:[a.charAt(0).toUpperCase()+a.slice(1),t===a&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary shadow-[0_0_10px_rgba(var(--primary),0.5)]"})]},a))})})]}),(0,b.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pt-6 md:pt-8",children:["journey"===t?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(x,{currentLevel:B,selectedLevel:C,onSelectLevel:D}),(0,b.jsxs)("div",{className:"mt-8 rounded-2xl bg-muted/30 p-6 border border-border/50",children:[0===C&&(0,b.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"The Spark"}),(0,b.jsx)("p",{children:"The initial concept. See the Description tab for details."})]}),1===C&&(0,b.jsx)(K,{ideaId:a.id,levelData:s?.data?.find(a=>1===a.level_number),isLocked:B<0,isOwner:w,isAuthenticated:h}),2===C&&(0,b.jsx)(P,{ideaId:a.id,levelData:s?.data?.find(a=>2===a.level_number),isLocked:B<1,isOwner:w,isAuthenticated:h}),3===C&&(0,b.jsx)(Q,{ideaId:a.id,levelData:s?.data?.find(a=>3===a.level_number),isLocked:B<2,isOwner:w,isAuthenticated:h}),4===C&&(0,b.jsx)(R,{ideaId:a.id,levelData:s?.data?.find(a=>4===a.level_number),isLocked:B<3,isOwner:w,isAuthenticated:h}),5===C&&(0,b.jsx)(U,{ideaId:a.id,levelData:s?.data?.find(a=>5===a.level_number),isLocked:B<4,isOwner:w})]})]}):"history"===t?(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(aJ,{ideaId:a.id})}):(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsx)(aK.CollaboratorSettings,{ideaId:a.id,isOwner:y,currentUserId:e?.id})}),(0,b.jsx)(O,{isOpen:E,onClose:()=>F(!1),level:B})]})]})}function a$({ideaId:a,isAuthenticated:e,authLoading:i}){let j=(0,d.useRouter)(),{data:l,fetchNextPage:o,hasNextPage:p,isFetchingNextPage:q,isLoading:r}=(0,k.useComments)(a),{mutate:s,isPending:t}=(0,k.useCreateComment)(a),[u,v]=(0,c.useState)(""),w=l?.pages.flatMap(a=>a.data)??[];return(0,b.jsxs)("section",{className:"max-w-5xl mx-auto mt-12",children:[(0,b.jsx)("h2",{className:"mb-6 font-display text-2xl font-bold text-foreground",children:"Comments"}),(0,b.jsxs)("form",{onSubmit:b=>{if(b.preventDefault(),u.trim()){if(!e){n.toast.info("Please sign in to comment"),j.push(`/login?redirectTo=/ideas/${a}`);return}s({content:u.trim()},{onSuccess:()=>{v(""),n.toast.success("Comment added!")}})}},className:"mb-8 flex gap-3",children:[(0,b.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),placeholder:e?"Write a comment...":"Sign in to comment...",className:"flex h-12 flex-1 rounded-full border border-input bg-background px-6 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",disabled:t||i}),(0,b.jsx)(g.Button,{type:"submit",variant:"mint",size:"pill",disabled:t||!u.trim()||i,className:"h-12 px-8",children:t?"...":"Post"})]}),r?(0,b.jsx)("div",{className:"space-y-6",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,b.jsx)(h.Skeleton,{className:"h-10 w-10 rounded-full"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(h.Skeleton,{className:"h-4 w-24"})}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-full"})]})]},a))}):0===w.length?(0,b.jsx)("div",{className:"py-12 text-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"No comments yet. Be the first to comment!"})}):(0,b.jsxs)("div",{className:"space-y-8",children:[w.map(a=>(0,b.jsxs)("div",{className:"group flex gap-4",children:[(0,b.jsxs)(f.Avatar,{className:"h-10 w-10 border border-border mt-1",children:[(0,b.jsx)(f.AvatarImage,{src:a.author?.avatar_url||void 0}),(0,b.jsx)(f.AvatarFallback,{children:(0,m.getInitials)(a.author?.full_name)})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground text-sm",children:a.author?.full_name||"Anonymous"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",(0,m.formatDistanceToNow)(a.created_at)]})]}),(0,b.jsx)("p",{className:"text-foreground/90 leading-relaxed text-sm",children:a.content})]})]},a.id)),p&&(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:()=>o(),disabled:q,className:"w-full text-muted-foreground hover:text-foreground",children:q?"Loading...":"Load more comments"})]})]})}function a_(){return(0,b.jsxs)("article",{className:"group relative mb-8 overflow-hidden rounded-[2.5rem] bg-[#09090b]/80 border border-white/5 shadow-2xl backdrop-blur-md",children:[(0,b.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pb-0",children:[(0,b.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col sm:flex-row gap-4 sm:gap-6 sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-10 w-10 sm:h-12 md:h-14 sm:w-12 md:w-14 rounded-full"}),(0,b.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,b.jsx)(h.Skeleton,{className:"h-5 w-32 sm:w-40"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-20 sm:w-24"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-[1fr_auto] sm:flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[(0,b.jsx)(h.Skeleton,{className:"h-10 sm:h-11 flex-1 sm:flex-initial sm:w-36 rounded-full"}),(0,b.jsx)(h.Skeleton,{className:"h-10 w-10 rounded-full"})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:gap-8 lg:grid-cols-[1fr_300px]",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Skeleton,{className:"mb-4 md:mb-6 h-8 sm:h-10 md:h-12 lg:h-14 w-full sm:w-4/5"}),(0,b.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 sm:h-5 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-4 sm:h-5 w-full"}),(0,b.jsx)(h.Skeleton,{className:"h-4 sm:h-5 w-3/4"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-10 w-24 sm:w-28 rounded-full"}),(0,b.jsx)(h.Skeleton,{className:"h-5 w-24 sm:w-28"})]})]}),(0,b.jsx)("div",{className:"lg:pt-2",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-4 sm:p-6 md:p-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(h.Skeleton,{className:"h-4 w-4"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-28 sm:w-32"})]}),(0,b.jsx)(h.Skeleton,{className:"mb-1 h-8 sm:h-10 w-16 sm:w-20"}),(0,b.jsx)(h.Skeleton,{className:"mb-4 h-3 w-32 sm:w-48"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(h.Skeleton,{className:"h-3 w-3"}),(0,b.jsx)(h.Skeleton,{className:"h-4 w-24 sm:w-28"})]}),(0,b.jsx)(h.Skeleton,{className:"h-10 sm:h-12 w-full rounded-xl"})]})})]}),(0,b.jsx)("div",{className:"-mx-4 sm:mx-0 mt-8 md:mt-12 border-b border-white/10",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6 md:gap-8 px-4 sm:px-2",children:[(0,b.jsx)(h.Skeleton,{className:"h-8 w-16 sm:w-20"}),(0,b.jsx)(h.Skeleton,{className:"h-8 w-16 sm:w-20"})]})})]}),(0,b.jsx)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pt-6 md:pt-8",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Skeleton,{className:"h-16 sm:h-20 w-full rounded-xl"}),(0,b.jsx)(h.Skeleton,{className:"h-16 sm:h-20 w-full rounded-xl"})]})})]})}a.s(["default",()=>aX],56540)}];

//# sourceMappingURL=apps_web_src_app_ideas_%5Bid%5D_IdeaDetailClient_tsx_9bd2936f._.js.map