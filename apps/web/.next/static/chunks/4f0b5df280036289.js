(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17261,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566);e.i(40987);var r=e.i(43083),i=e.i(65833),l=e.i(85902),n=e.i(90042);e.i(16455);var o=e.i(30338),d=e.i(70346),c=e.i(88532),m=e.i(37219),x=e.i(52088),u=e.i(46696),h=e.i(62031),p=e.i(43531),g=e.i(41240),b=e.i(20278),f=e.i(75254);let j=(0,f.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),v=(0,f.default)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]]),N=(0,f.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var y=e.i(42009);function w({currentLevel:e,selectedLevel:t,onSelectLevel:a,className:r}){let i=[{level:0,title:"The Spark",description:"Idea",icon:g.Lightbulb},{level:1,title:"Clarity",description:"Problem",icon:b.Target},{level:2,title:"Reality",description:"Market",icon:j},{level:3,title:"Hypothesis",description:"Test",icon:v},{level:4,title:"Sustainability",description:"Model",icon:N},{level:5,title:"Reflection",description:"PoW",icon:y.Award}];return(0,s.jsx)("div",{className:(0,x.cn)("w-full rounded-3xl border border-white/5 bg-black/20 p-6 backdrop-blur-sm",r),children:(0,s.jsxs)("div",{className:"relative flex items-start overflow-x-auto pb-4 md:pb-0 md:overflow-visible gap-8 md:gap-0 md:justify-between no-scrollbar",children:[(0,s.jsx)("div",{className:"hidden md:block absolute left-0 top-5 h-0.5 w-full -translate-y-1/2 bg-white/5"}),i.map((r,l)=>{let n=l<e,o=l===e,d=l>e&&(1!==l||0!==e),c=r.level===t;return(0,s.jsxs)("div",{className:"relative flex flex-col items-center min-w-[80px] md:min-w-0 md:flex-1",children:[l<i.length-1&&l<e&&(0,s.jsx)("div",{className:"hidden md:block absolute left-[50%] top-5 h-0.5 w-full -translate-y-1/2 bg-primary/50"}),(0,s.jsxs)("button",{onClick:()=>!d&&a(r.level),disabled:d,className:(0,x.cn)("group relative z-10 flex flex-col items-center gap-3 transition-all duration-300 outline-none",d?"cursor-not-allowed opacity-40 grayscale":"cursor-pointer hover:opacity-100",c?"scale-105":"scale-100"),children:[(0,s.jsx)("div",{className:(0,x.cn)("flex h-10 w-10 items-center justify-center rounded-full border transition-all duration-500",n?"border-primary/50 bg-primary text-primary-foreground shadow-[0_0_15px_-3px_rgba(var(--primary),0.5)]":o?"border-primary bg-primary/10 text-primary ring-4 ring-primary/10 shadow-[0_0_20px_-5px_rgba(var(--primary),0.4)]":"border-white/10 bg-[#09090b] text-muted-foreground hover:border-white/20",!c||n||o?"":"ring-2 ring-primary ring-offset-2 ring-offset-black"),children:n?(0,s.jsx)(p.Check,{className:"h-5 w-5"}):(0,s.jsx)(r.icon,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-0.5",children:[(0,s.jsx)("span",{className:(0,x.cn)("text-xs font-semibold tracking-wide transition-colors duration-200",n||o?"text-foreground":"text-muted-foreground",c?"text-primary":""),children:r.title}),(0,s.jsx)("span",{className:(0,x.cn)("text-[10px] uppercase tracking-wider",o?"text-primary/70":"text-muted-foreground/50"),children:r.description})]})]})]},r.level)})]})})}var k=e.i(10012);function _({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,x.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var C=e.i(9983),S=e.i(61765),D=e.i(25652),I=e.i(61911);let T={desirability:{icon:I.Users,colorClasses:"border-coral text-coral",iconBgClasses:"bg-coral/10 text-coral"},feasibility:{icon:S.Hammer,colorClasses:"border-lime text-lime-foreground",iconBgClasses:"bg-lime/20 text-lime-700 dark:text-lime"},viability:{icon:D.TrendingUp,colorClasses:"border-mint text-mint",iconBgClasses:"bg-mint/10 text-mint"}};function L({type:e,title:t,children:a,className:r}){let i=T[e];return(0,s.jsxs)("div",{className:(0,x.cn)("relative overflow-hidden rounded-xl border bg-card/50 p-1 shadow-sm transition-all hover:bg-card/80",r),children:[(0,s.jsx)("div",{className:(0,x.cn)("absolute inset-y-0 left-0 w-1",i.colorClasses.split(" ")[0].replace("text-","bg-"))}),(0,s.jsxs)("div",{className:"flex gap-4 p-4",children:[(0,s.jsx)("div",{className:(0,x.cn)("flex h-10 w-10 shrink-0 items-center justify-center rounded-full",i.iconBgClasses),children:(0,s.jsx)(i.icon,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h4",{className:(0,x.cn)("font-display text-base font-semibold leading-none tracking-tight","feasibility"===e?"text-yellow-600 dark:text-lime":i.colorClasses.split(" ")[1]),children:t}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:a})]})]})]})}var F=e.i(86311);let P=(0,f.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),M=(0,f.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function A({ideaId:e,levelNumber:a,isOwner:r,isAuthenticated:n}){let{data:o,isLoading:d}=(0,C.useIdeaFeedback)(e,a),{mutate:c,isPending:m}=(0,C.usePostIdeaFeedback)(e),[u,h]=(0,t.useState)(""),[p,g]=(0,t.useState)(0),b=o?.data||[];return(0,s.jsxs)("div",{className:"mt-12 space-y-8 border-t border-border pt-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"font-display text-xl font-bold flex items-center gap-2",children:[(0,s.jsx)(F.MessageSquare,{className:"h-5 w-5"}),"Peer Feedback"]}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[b.length," reviews"]})]}),!r&&n&&(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&c({levelNumber:a,content:u,ratings:{overall:p}},{onSuccess:()=>{h(""),g(0)}})},className:"space-y-4 bg-muted/30 p-4 rounded-xl border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Rate this level:"}),(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>g(e),className:(0,x.cn)("transition-colors",p>=e?"text-yellow-500 fill-current":"text-muted-foreground"),children:(0,s.jsx)(P,{className:(0,x.cn)("h-5 w-5",p>=e&&"fill-current")})},e))})]}),(0,s.jsx)(_,{value:u,onChange:e=>h(e.target.value),placeholder:"Is this clear? specific? realistic? Give constructive feedback...",className:"bg-background min-h-[80px]"}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(l.Button,{type:"submit",size:"sm",variant:"mint",disabled:m||!u.trim(),children:[m?"Posting...":"Post Feedback",(0,s.jsx)(M,{className:"ml-2 h-3 w-3"})]})})]}),(0,s.jsx)("div",{className:"space-y-6",children:0===b.length?(0,s.jsx)("p",{className:"text-muted-foreground text-sm italic",children:"No feedback yet. Be the first!"}):b.map(e=>(0,s.jsxs)("div",{className:"flex gap-4 p-4 rounded-xl bg-card border border-border/50 shadow-sm",children:[(0,s.jsxs)(i.Avatar,{className:"h-10 w-10 border border-border",children:[(0,s.jsx)(i.AvatarImage,{src:e.author?.avatar_url??void 0}),(0,s.jsx)(i.AvatarFallback,{children:(0,x.getInitials)(e.author?.full_name)})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-sm",children:e.author?.full_name||"Peer"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",(0,x.formatDistanceToNow)(e.created_at)]})]}),e.ratings?.overall&&(0,s.jsxs)("div",{className:"flex items-center gap-0.5 text-yellow-500",children:[(0,s.jsx)("span",{className:"text-sm font-bold",children:e.ratings.overall}),(0,s.jsx)(P,{className:"h-3 w-3 fill-current"})]})]}),(0,s.jsx)("p",{className:"text-sm text-foreground/90 leading-relaxed",children:e.content})]})]},e.id))})]})}function B({ideaId:e,levelData:a,isLocked:r=!1,isOwner:i=!1,isAuthenticated:n=!1}){let{mutate:o,isPending:d}=(0,C.useUpdateIdeaLevel)(e),c=a?.data||{},[m,x]=(0,t.useState)({target_persona:c.target_persona||"",current_workarounds:c.current_workarounds||"",pain_points:c.pain_points||""});(0,t.useEffect)(()=>{a?.data&&x({target_persona:a.data.target_persona||"",current_workarounds:a.data.current_workarounds||"",pain_points:a.data.pain_points||""})},[a]);let u=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))};return r?(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Complete the previous level to unlock this step."})}):i?(0,s.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!r&&i&&(0,s.jsx)(L,{type:"desirability",title:"Focus on Desirability",children:"Level 1 is about ensuring people actually want this. Focus on the problem, not the solution."}),(0,s.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Problem Clarity"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Prove the problem is real. Who has it? What are they doing now?"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r||o({levelNumber:1,data:m},{onSuccess:()=>{}})},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"target_persona",className:"text-base font-semibold text-foreground",children:["Target Persona ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who is suffering the most?)"})]}),(0,s.jsx)(k.Input,{id:"target_persona",name:"target_persona",placeholder:"e.g. Overwhelmed medical students applying for residency (be specific!)",value:m.target_persona,onChange:u,disabled:d,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"current_workarounds",className:"text-base font-semibold text-foreground",children:["Current Workarounds ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What are they patching together?)"})]}),(0,s.jsx)(_,{id:"current_workarounds",name:"current_workarounds",placeholder:"e.g. They manually copy-paste data into 3 different Excel sheets...",value:m.current_workarounds,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"pain_points",className:"text-base font-semibold text-foreground",children:["Pain Points ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Where does the workaround break?)"})]}),(0,s.jsx)(_,{id:"pain_points",name:"pain_points",placeholder:"e.g. It takes 4 hours/week and errors cause lost revenue...",value:m.pain_points,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"lg",disabled:d,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:d?"Saving...":"Save & Continue"})})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:1,isOwner:i,isAuthenticated:n})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Problem Clarity"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"How the author defines the problem."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Target Persona (Who has the problem?)"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground",children:m.target_persona||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Current Workarounds (How do they solve it now?)"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.current_workarounds||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Pain Points (Why do the workarounds fail?)"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.pain_points||"Not specified"})]}),(0,s.jsx)("div",{className:"rounded-lg bg-blue-500/10 p-4 text-sm text-blue-600",children:"Only the idea author can edit this section."})]})]})}var O=e.i(47608);let R=(0,f.default)("party-popper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),z=["The Spark","Problem Clarity","Market Reality","The Hypothesis","Sustainability","Reflection"];function H({isOpen:e,onClose:t,level:a}){return e?(0,s.jsx)(O.Dialog,{open:e,onOpenChange:e=>!e&&t(),children:(0,s.jsxs)(O.DialogContent,{className:"sm:max-w-md text-center",children:[(0,s.jsxs)(O.DialogHeader,{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-yellow-100 p-4",children:(0,s.jsx)(R,{className:"h-10 w-10 text-yellow-600"})}),(0,s.jsx)(O.DialogTitle,{className:"text-2xl font-bold text-foreground",children:"Level Up!"}),(0,s.jsxs)(O.DialogDescription,{className:"text-lg text-muted-foreground",children:["Congratulations! You've unlocked ",(0,s.jsx)("br",{}),(0,s.jsxs)("span",{className:"font-bold text-primary text-xl mt-2 block",children:["Level ",a,": ",z[a]]})]})]}),(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:(0,s.jsx)(l.Button,{onClick:t,variant:"mint",size:"lg",className:"w-full",children:"Let's Go!"})})]})}):null}function W({ideaId:e,levelData:a,isLocked:r=!1,isOwner:i=!1,isAuthenticated:n=!1}){let{mutate:o,isPending:d}=(0,C.useUpdateIdeaLevel)(e),c=a?.data||{},[m,x]=(0,t.useState)({alternatives:c.alternatives||"",why_they_fail:c.why_they_fail||"",evidence_log:c.evidence_log||""});(0,t.useEffect)(()=>{a?.data&&x({alternatives:a.data.alternatives||"",why_they_fail:a.data.why_they_fail||"",evidence_log:a.data.evidence_log||""})},[a]);let u=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))};return r?(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Complete Level 1: Problem Clarity to unlock this level."})}):i?(0,s.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!r&&i&&(0,s.jsx)(L,{type:"desirability",title:"Focus on Desirability",children:"Prove that your target audience exists and is actively looking for a solution."}),(0,s.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Market Reality"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"What exists? Why isn't it good enough?"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!r&&i&&o({levelNumber:2,data:m})},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"alternatives",className:"text-base font-semibold text-foreground",children:["Existing Alternatives ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who is fighting for their attention?)"})]}),(0,s.jsx)(_,{id:"alternatives",name:"alternatives",placeholder:"e.g. Direct competitors, Excel, or just 'doing nothing'...",value:m.alternatives,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"why_they_fail",className:"text-base font-semibold text-foreground",children:["Why They Fail ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What 'Job to be Done' do they miss?)"})]}),(0,s.jsx)(_,{id:"why_they_fail",name:"why_they_fail",placeholder:"e.g. They are too expensive for students, or require technical skills...",value:m.why_they_fail,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"evidence_log",className:"text-base font-semibold text-foreground",children:["Evidence Log ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Prove the pain exists)"})]}),(0,s.jsx)(_,{id:"evidence_log",name:"evidence_log",placeholder:"Paste links to Reddit vents, 1-star reviews, or forum complaints...",value:m.evidence_log,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"lg",disabled:d,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:d?"Saving...":"Save & Continue"})})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:2,isOwner:i,isAuthenticated:n})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Market Reality"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Analysis of competitors and market evidence."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Alternatives"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.alternatives||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Why They Fail"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.why_they_fail||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Evidence Log"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.evidence_log||"Not specified"})]})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:2,isOwner:i,isAuthenticated:n})]})}function E({ideaId:e,levelData:a,isLocked:r=!1,isOwner:i=!1,isAuthenticated:n=!1}){let{mutate:o,isPending:d}=(0,C.useUpdateIdeaLevel)(e),c=a?.data||{},[m,x]=(0,t.useState)({hypothesis:c.hypothesis||"",test_method:c.test_method||"",success_criteria:c.success_criteria||""});(0,t.useEffect)(()=>{a?.data&&x({hypothesis:a.data.hypothesis||"",test_method:a.data.test_method||"",success_criteria:a.data.success_criteria||""})},[a]);let u=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))};return r?(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Complete Level 2: Market Reality to unlock this level."})}):i?(0,s.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!r&&i&&(0,s.jsx)(L,{type:"feasibility",title:"Focus on Feasibility",children:"Can we build this? Define a clear hypothesis and how you will test it technically or operationally."}),(0,s.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"The Hypothesis"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Design your 48-Hour Test."})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!r&&i&&o({levelNumber:3,data:m})},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"hypothesis",className:"text-base font-semibold text-foreground",children:["Hypothesis Statement ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The Bet)"})]}),(0,s.jsx)(_,{id:"hypothesis",name:"hypothesis",placeholder:"If we [do X] for [Person Y], then [Z% of them] will [take Action W]...",value:m.hypothesis,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"test_method",className:"text-base font-semibold text-foreground",children:["Test Method ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The 48-Hour Test: How will you verify this without writing code?)"})]}),(0,s.jsx)(_,{id:"test_method",name:"test_method",placeholder:"e.g. Landing Page, Cold DM campaign, Fake Door test, Manual Concierge...",value:m.test_method,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"success_criteria",className:"text-base font-semibold text-foreground",children:["Success Criteria ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(The Pass Mark: What specific number proves you are right?)"})]}),(0,s.jsx)(k.Input,{id:"success_criteria",name:"success_criteria",placeholder:"e.g. 15 signups, 5 pre-orders, 20% conversion rate",value:m.success_criteria,onChange:u,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"lg",disabled:d,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:d?"Saving...":"Save & Continue"})})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:3,isOwner:i,isAuthenticated:n})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"The Hypothesis"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"What they are testing and how."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Hypothesis"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.hypothesis||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Test Method"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.test_method||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Success Criteria"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.success_criteria||"Not specified"})]})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:3,isOwner:i,isAuthenticated:n})]})}function V({ideaId:e,levelData:a,isLocked:r=!1,isOwner:i=!1,isAuthenticated:n=!1}){let{mutate:o,isPending:d}=(0,C.useUpdateIdeaLevel)(e),c=a?.data||{},[m,x]=(0,t.useState)({revenue_model:c.revenue_model||"",cost_structure:c.cost_structure||"",sustainability_plan:c.sustainability_plan||""});(0,t.useEffect)(()=>{a?.data&&x({revenue_model:a.data.revenue_model||"",cost_structure:a.data.cost_structure||"",sustainability_plan:a.data.sustainability_plan||""})},[a]);let u=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))};return r?(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Complete Level 3: The Hypothesis to unlock this level."})}):i?(0,s.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[!r&&i&&(0,s.jsx)(L,{type:"viability",title:"Focus on Viability",children:"Is this a sustainable business? Will the revenue cover the costs?"}),(0,s.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Sustainability"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"How will this survive and grow?"})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!r&&i&&o({levelNumber:4,data:m})},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"revenue_model",className:"text-base font-semibold text-foreground",children:["Revenue Model ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Who pays? How much?)"})]}),(0,s.jsx)(_,{id:"revenue_model",name:"revenue_model",placeholder:"e.g. Subscription ($10/mo), Transaction fees (2%), One-time purchase...",value:m.revenue_model,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"cost_structure",className:"text-base font-semibold text-foreground",children:["Cost Structure ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(What does it cost to serve one customer?)"})]}),(0,s.jsx)(_,{id:"cost_structure",name:"cost_structure",placeholder:"e.g. Server costs, API fees, Stripe fees, Human support time...",value:m.cost_structure,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"sustainability_plan",className:"text-base font-semibold text-foreground",children:["Sustainability Plan ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(How do you survive the 'Valley of Death'?)"})]}),(0,s.jsx)(_,{id:"sustainability_plan",name:"sustainability_plan",placeholder:"e.g. We reach break-even with 50 customers. We have 6 months of runway...",value:m.sustainability_plan,onChange:u,disabled:d,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"lg",disabled:d,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:d?"Saving...":"Save & Continue"})})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:4,isOwner:i,isAuthenticated:n})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Sustainability"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Business model and long-term viability."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Revenue Model"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.revenue_model||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Cost Structure"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.cost_structure||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Sustainability Plan"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.sustainability_plan||"Not specified"})]})]}),(0,s.jsx)(A,{ideaId:e,levelNumber:4,isOwner:i,isAuthenticated:n})]})}var $=e.i(64036);function q({ideaId:e}){let{data:t,isLoading:a}=(0,C.useIdeaFeedback)(e),r=t?.data||[];if(a)return(0,s.jsx)("div",{className:"animate-pulse h-48 bg-muted rounded-xl"});if(0===r.length)return(0,s.jsx)($.Card,{className:"bg-muted/30 border-dashed",children:(0,s.jsxs)($.CardContent,{className:"pt-6 text-center text-muted-foreground",children:[(0,s.jsx)(F.MessageSquare,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,s.jsx)("p",{children:"No feedback received yet. Share your journey to get insights!"})]})});let i=r.length,l=r.filter(e=>e.ratings?.overall).map(e=>e.ratings.overall),n=l.length>0?(l.reduce((e,s)=>e+s,0)/l.length).toFixed(1):"N/A",o=new Set(r.map(e=>e.user_id)).size;return(0,s.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-bold",children:"Feedback Report"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)($.Card,{children:[(0,s.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Avg Rating"}),(0,s.jsx)(P,{className:"h-4 w-4 text-yellow-500"})]}),(0,s.jsxs)($.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:n}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"out of 5.0"})]})]}),(0,s.jsxs)($.Card,{children:[(0,s.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Total Reviews"}),(0,s.jsx)(F.MessageSquare,{className:"h-4 w-4 text-blue-500"})]}),(0,s.jsxs)($.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:i}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"across all levels"})]})]}),(0,s.jsxs)($.Card,{children:[(0,s.jsxs)($.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)($.CardTitle,{className:"text-sm font-medium",children:"Contributors"}),(0,s.jsx)(I.Users,{className:"h-4 w-4 text-green-500"})]}),(0,s.jsxs)($.CardContent,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:o}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"unique peers"})]})]})]}),(0,s.jsxs)($.Card,{className:"border-blue-500/20 bg-blue-500/5",children:[(0,s.jsx)($.CardHeader,{children:(0,s.jsxs)($.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,s.jsx)(D.TrendingUp,{className:"h-4 w-4"}),"AI Summary (Simulated)"]})}),(0,s.jsx)($.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Based on the feedback, your idea has strong **Problem Clarity** (Level 1) but peers are skeptical about the **Revenue Model** (Level 4). Consider exploring B2B alternatives suggested in Level 2 feedback."})})]})]})}function U({ideaId:e,levelData:a,isLocked:r=!1,isOwner:i=!1}){let{mutate:n,isPending:o}=(0,C.useUpdateIdeaLevel)(e),{data:d}=(0,C.useIdeaFeedback)(e),c=a?.data||{},[m,x]=(0,t.useState)({key_learnings:c.key_learnings||"",feedback_impact:c.feedback_impact||"",decision:c.decision||"",pow_url:c.pow_url||""});(0,t.useEffect)(()=>{a?.data&&x({key_learnings:a.data.key_learnings||"",feedback_impact:a.data.feedback_impact||"",decision:a.data.decision||"",pow_url:a.data.pow_url||""})},[a]);let u=e=>{let{name:s,value:t}=e.target;x(e=>({...e,[s]:t}))};return r?(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-border p-8 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Complete Level 4: Sustainability to unlock this level."})}):i?(0,s.jsxs)("div",{className:"space-y-8 max-w-2xl mx-auto",children:[(0,s.jsxs)("div",{className:"space-y-2 border-b border-border pb-4",children:[(0,s.jsx)("h3",{className:"font-display text-2xl font-bold text-foreground",children:"Reflection"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"What happened? What's next?"})]}),(0,s.jsx)(q,{ideaId:e}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),!r&&i&&n({levelNumber:5,data:m})},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"decision",className:"text-base font-semibold text-foreground",children:["Decision ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Based on evidence, not feelings)"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"decision",name:"decision",value:m.decision,onChange:u,disabled:o,className:"flex h-12 w-full items-center justify-between rounded-md border border-input/60 bg-background/50 px-4 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none transition-colors",children:[(0,s.jsx)("option",{value:"",children:"Select a verdict..."}),(0,s.jsx)("option",{value:"GO",children:"ðŸš€ GO (Build it)"}),(0,s.jsx)("option",{value:"NO-GO",children:"ðŸ›‘ NO-GO (Drop it)"}),(0,s.jsx)("option",{value:"PIVOT",children:"ðŸ”„ PIVOT (Change direction)"})]}),(0,s.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-muted-foreground",children:(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"key_learnings",className:"text-base font-semibold text-foreground",children:["Key Learnings ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:'(The "Aha!" Moment)'})]}),(0,s.jsx)(_,{id:"key_learnings",name:"key_learnings",placeholder:"What did you discover that you didn't know before starting?",value:m.key_learnings,onChange:u,disabled:o,className:"min-h-[120px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"feedback_impact",className:"text-base font-semibold text-foreground",children:["Feedback Impact ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Course Correction)"})]}),(0,s.jsx)(_,{id:"feedback_impact",name:"feedback_impact",placeholder:"How did the global brain (peer feedback) change your trajectory?",value:m.feedback_impact,onChange:u,disabled:o,className:"min-h-[100px] text-base p-4 bg-background/50 border-input/60 focus:bg-background transition-colors resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{htmlFor:"pow_url",className:"text-base font-semibold text-foreground",children:["Proof of Work ",(0,s.jsx)("span",{className:"text-muted-foreground font-normal text-sm ml-2",children:"(Show Your Work)"})]}),(0,s.jsx)(k.Input,{id:"pow_url",name:"pow_url",placeholder:"Link to the evidence (Notion doc, Tweets, GitHub, etc.)",value:m.pow_url,onChange:u,disabled:o,className:"h-12 text-base px-4 bg-background/50 border-input/60 focus:bg-background transition-colors"})]}),(0,s.jsx)("div",{className:"flex justify-end pt-4",children:d?.data&&0===d.data.length?(0,s.jsxs)("div",{className:"text-right space-y-2",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-orange-50 border border-orange-200 text-orange-800 text-sm max-w-md ml-auto",children:[(0,s.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,s.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,s.jsx)("line",{x1:"12",x2:"12.01",y1:"16",y2:"16"})]}),"Feedback Required"]}),(0,s.jsx)("p",{className:"mt-1",children:"You cannot complete the journey without peer feedback. Share your idea to get at least 1 review."})]}),(0,s.jsx)(l.Button,{disabled:!0,variant:"ghost",className:"opacity-50 cursor-not-allowed",children:"Complete Journey"})]}):(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"lg",disabled:o,className:"px-8 font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:o?"Finish Journey":"Complete Journey"})})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-display text-xl font-semibold text-foreground",children:"Reflection"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Outcome of the validation journey."})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Decision"}),(0,s.jsx)("div",{className:"inline-block rounded-full bg-primary/10 px-3 py-1 text-sm font-semibold text-primary",children:m.decision||"Pending"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Key Learnings"}),(0,s.jsx)("div",{className:"rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground whitespace-pre-wrap",children:m.key_learnings||"Not specified"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium leading-none text-muted-foreground",children:"Proof of Work"}),m.pow_url?(0,s.jsx)("a",{href:m.pow_url,target:"_blank",rel:"noopener noreferrer",className:"block text-sm text-blue-500 hover:underline break-all",children:m.pow_url}):(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Not provided"})]})]})]})}var G=e.i(73554),K=e.i(66027),J=e.i(54616),Y=e.i(12598);e.i(71405),e.i(94397),e.i(80698);var Q=e.i(54815);e.i(4044),e.i(61318);var X=e.i(81140),Z=e.i(20783),ee=e.i(69340),es=e.i(35804);e.i(74080);var et=Symbol("radix.slottable");function ea(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===et}var er=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{var r,i;let l,n,o,d=(i=r=`Primitive.${a}`,(l=t.forwardRef((e,s)=>{let{children:a,...r}=e;if(t.isValidElement(a)){var i;let e,l,n=(i=a,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),o=function(e,s){let t={...s};for(let a in s){let r=e[a],i=s[a];/^on[A-Z]/.test(a)?r&&i?t[a]=(...e)=>{let s=i(...e);return r(...e),s}:r&&(t[a]=r):"style"===a?t[a]={...r,...i}:"className"===a&&(t[a]=[r,i].filter(Boolean).join(" "))}return{...e,...t}}(r,a.props);return a.type!==t.Fragment&&(o.ref=s?(0,Z.composeRefs)(s,n):n),t.cloneElement(a,o)}return t.Children.count(a)>1?t.Children.only(null):null})).displayName=`${i}.SlotClone`,n=l,(o=t.forwardRef((e,a)=>{let{children:r,...i}=e,l=t.Children.toArray(r),o=l.find(ea);if(o){let e=o.props.children,r=l.map(s=>s!==o?s:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,s.jsx)(n,{...i,ref:a,children:t.isValidElement(e)?t.cloneElement(e,void 0,r):null})}return(0,s.jsx)(n,{...i,ref:a,children:r})})).displayName=`${r}.Slot`,o),c=t.forwardRef((e,t)=>{let{asChild:r,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(r?d:a,{...i,ref:t})});return c.displayName=`Primitive.${a}`,{...e,[a]:c}},{}),ei="Switch",[el,en]=function(e,a=[]){let r=[],i=()=>{let s=r.map(e=>t.createContext(e));return function(a){let r=a?.[e]||s;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return i.scopeName=e,[function(a,i){let l=t.createContext(i),n=r.length;r=[...r,i];let o=a=>{let{scope:r,children:i,...o}=a,d=r?.[e]?.[n]||l,c=t.useMemo(()=>o,Object.values(o));return(0,s.jsx)(d.Provider,{value:c,children:i})};return o.displayName=a+"Provider",[o,function(s,r){let o=r?.[e]?.[n]||l,d=t.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error(`\`${s}\` must be used within \`${a}\``)}]},function(...e){let s=e[0];if(1===e.length)return s;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((s,{useScope:t,scopeName:a})=>{let r=t(e)[`__scope${a}`];return{...s,...r}},{});return t.useMemo(()=>({[`__scope${s.scopeName}`]:r}),[r])}};return a.scopeName=s.scopeName,a}(i,...a)]}(ei),[eo,ed]=el(ei),ec=t.forwardRef((e,a)=>{let{__scopeSwitch:r,name:i,checked:l,defaultChecked:n,required:o,disabled:d,value:c="on",onCheckedChange:m,form:x,...u}=e,[h,p]=t.useState(null),g=(0,Z.useComposedRefs)(a,e=>p(e)),b=t.useRef(!1),f=!h||x||!!h.closest("form"),[j,v]=(0,ee.useControllableState)({prop:l,defaultProp:n??!1,onChange:m,caller:ei});return(0,s.jsxs)(eo,{scope:r,checked:j,disabled:d,children:[(0,s.jsx)(er.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":eh(j),"data-disabled":d?"":void 0,disabled:d,value:c,...u,ref:g,onClick:(0,X.composeEventHandlers)(e.onClick,e=>{v(e=>!e),f&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),f&&(0,s.jsx)(eu,{control:h,bubbles:!b.current,name:i,value:c,checked:j,required:o,disabled:d,form:x,style:{transform:"translateX(-100%)"}})]})});ec.displayName=ei;var em="SwitchThumb",ex=t.forwardRef((e,t)=>{let{__scopeSwitch:a,...r}=e,i=ed(em,a);return(0,s.jsx)(er.span,{"data-state":eh(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});ex.displayName=em;var eu=t.forwardRef(({__scopeSwitch:e,control:a,checked:r,bubbles:i=!0,...l},n)=>{let o,d=t.useRef(null),c=(0,Z.useComposedRefs)(d,n),m=(o=t.useRef({value:r,previous:r}),t.useMemo(()=>(o.current.value!==r&&(o.current.previous=o.current.value,o.current.value=r),o.current.previous),[r])),x=(0,es.useSize)(a);return t.useEffect(()=>{let e=d.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==r&&s){let t=new Event("click",{bubbles:i});s.call(e,r),e.dispatchEvent(t)}},[m,r,i]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:c,style:{...l.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function eh(e){return e?"checked":"unchecked"}eu.displayName="SwitchBubbleInput";let ep=t.forwardRef(({className:e,...t},a)=>(0,s.jsx)(ec,{className:(0,x.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:(0,s.jsx)(ex,{className:(0,x.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ep.displayName=ec.displayName;let eg=(0,f.default)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);var eb=e.i(31278);function ef({ideaId:e,trigger:a}){let r,[i,n]=(0,t.useState)(!1),[o,d]=(0,t.useState)(""),[c,m]=(0,t.useState)(""),[h,p]=(0,t.useState)(!1),{mutate:g,isPending:b}=(r=(0,Y.useQueryClient)(),(0,J.useMutation)({mutationFn:async s=>{let t=await Q.apiClient.post(`/api/ideas/${e}/back`,s);if(t.error)throw Error(t.error.message);return t.data},onSuccess:async()=>{await r.invalidateQueries({queryKey:["idea_backers_v2",e]}),await r.refetchQueries({queryKey:["idea_backers_v2",e]}),u.toast.success("Thanks for backing this idea!")},onError:e=>{console.error("Backing failed:",e),u.toast.error("Failed to back idea. Please try again.")}}));return(0,s.jsxs)(O.Dialog,{open:i,onOpenChange:n,children:[(0,s.jsx)(O.DialogTrigger,{asChild:!0,children:a||(0,s.jsxs)(l.Button,{variant:"shimmer-primary",size:"lg",className:"flex-1 sm:flex-initial sm:w-auto gap-2 font-bold text-sm sm:text-base h-10 sm:h-11",children:[(0,s.jsx)(eg,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Back this Idea"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Back"})]})}),(0,s.jsxs)(O.DialogContent,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(O.DialogHeader,{children:[(0,s.jsxs)(O.DialogTitle,{className:"flex items-center gap-2 text-xl",children:[(0,s.jsx)(eg,{className:"h-5 w-5 text-primary"}),"Back this Idea"]}),(0,s.jsx)(O.DialogDescription,{children:"Pledge your support to show the founder there is real market demand. This is a non-binding pledge."})]}),(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(G.Label,{children:"Select Pledge Amount"}),(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[10,50,100,500].map(e=>{let t=parseInt(o)===e;return(0,s.jsxs)("button",{type:"button",onClick:()=>d(e.toString()),className:(0,x.cn)("flex h-10 items-center justify-center rounded-md border text-sm font-medium transition-all hover:scale-105 active:scale-95",t?"border-primary/50 bg-primary/10 text-primary shadow-[0_0_10px_-2px_rgba(255,255,255,0.1)]":"border-white/10 bg-white/5 text-muted-foreground hover:bg-white/10 hover:text-foreground"),children:["â‚¹",e]},e)})}),(0,s.jsxs)("div",{className:"relative mt-2",children:[(0,s.jsx)("span",{className:"absolute left-3 top-2.5 text-muted-foreground",children:"â‚¹"}),(0,s.jsx)(k.Input,{type:"number",placeholder:"Custom Amount",value:o,onChange:e=>d(e.target.value),className:"pl-6 bg-white/5 border-white/10 focus-visible:ring-primary/50",min:"0"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(G.Label,{children:"Leave a Comment (Optional)"}),(0,s.jsx)(_,{placeholder:"I'd buy this if...",value:c,onChange:e=>m(e.target.value),className:"resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[100px]"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 rounded-lg border border-white/5 bg-white/[0.02] p-3",children:[(0,s.jsx)(ep,{id:"anonymous",checked:h,onCheckedChange:p}),(0,s.jsx)(G.Label,{htmlFor:"anonymous",className:"cursor-pointer",children:"Back Anonymously"})]})]}),(0,s.jsx)(O.DialogFooter,{children:(0,s.jsxs)(l.Button,{onClick:()=>{let e=parseInt(o);isNaN(e)||e<0||g({pledge_amount:e,comment:c,is_anonymous:h},{onSuccess:()=>{n(!1),d(""),m("")}})},disabled:b||!o,variant:"shimmer-primary",className:"w-full font-bold",children:[b&&(0,s.jsx)(eb.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm Pledge"]})})]})]})}function ej({ideaId:e}){let{data:t,isLoading:a,isError:r}=(0,K.useQuery)({queryKey:["idea_backers_v2",e],queryFn:async()=>{let s=await Q.apiClient.get(`/api/ideas/${e}/backers`);if(s.error)throw Error(s.error.message);return s.data}});if(a)return(0,s.jsx)("div",{className:"w-full animate-pulse h-48 rounded-3xl bg-white/5 border border-white/5"});if(r||!t)return(0,s.jsxs)("div",{className:"w-full h-48 rounded-3xl bg-[#09090b] border border-white/5 flex flex-col items-center justify-center p-6 text-center",children:[(0,s.jsx)(N,{className:"h-8 w-8 text-muted-foreground mb-2 opacity-20"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Unable to load valuation data"})]});let{meta:l,data:n}=t,o=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(l?.total_pledged||0);return(0,s.jsxs)($.Card,{variant:"glass-shimmer",className:"relative w-full overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-[#7877c6]/10 blur-[80px]"}),(0,s.jsxs)("div",{className:"relative z-10 p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs md:text-sm font-bold uppercase tracking-wider text-muted-foreground",children:[(0,s.jsx)(D.TrendingUp,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Implied Valuation"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,s.jsx)("span",{className:"font-heading text-3xl font-bold tracking-tight text-white md:text-4xl lg:text-5xl",children:o}),(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"(Demand)"})]}),(0,s.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground/60",children:["Based on ",l?.backers_count||0," backers pledging non-binding support."]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h4",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-wider text-muted-foreground",children:[(0,s.jsx)(I.Users,{className:"h-3 w-3"}),"Recent Backers"]}),n&&0!==n.length?(0,s.jsx)("div",{className:"space-y-2",children:n.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"group flex items-center gap-3 rounded-xl border border-transparent bg-white/2 p-2 transition-all hover:bg-white/5 hover:border-white/5",children:[(0,s.jsxs)(i.Avatar,{className:"h-8 w-8 ring-1 ring-white/10",children:[(0,s.jsx)(i.AvatarImage,{src:e.is_anonymous?void 0:e.user?.avatar_url||void 0}),(0,s.jsx)(i.AvatarFallback,{className:"bg-white/5 text-[10px] text-muted-foreground",children:e.is_anonymous?"?":e.user?.full_name?.[0]||"U"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"truncate text-sm font-medium text-foreground/90 group-hover:text-foreground",children:e.is_anonymous?"Anonymous Backer":e.user?.full_name||"User"}),(0,s.jsxs)("span",{className:"shrink-0 rounded-md bg-[#7877c6]/10 px-2 py-0.5 text-xs font-bold text-[#fafafa] border border-[#7877c6]/20",children:["â‚¹",e.pledge_amount.toLocaleString()]})]}),e.comment&&(0,s.jsxs)("p",{className:"truncate text-xs text-muted-foreground/60 italic max-w-[200px]",children:['"',e.comment,'"']})]})]},e.id))}):(0,s.jsx)("div",{className:"rounded-xl border border-dashed border-white/10 bg-white/2 p-4 text-center",children:(0,s.jsx)("p",{className:"text-sm italic text-muted-foreground",children:"Be the first to back this idea!"})})]})]})]})}var ev=e.i(18037);let eN=(0,f.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);var ey=e.i(82458),ey=ey,ew=e.i(7347);let ek=(0,e.i(25913).cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function e_({className:e,variant:t,...a}){return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,x.cn)(ek({variant:t}),e),...a})}function eC({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,x.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function eS({ideaId:e,currentTitle:a,currentDescription:r,trigger:i}){let[n,o]=(0,t.useState)(!1),[d,c]=(0,t.useState)(""),[m,h]=(0,t.useState)(""),[p,g]=(0,t.useState)(""),[b,f]=(0,t.useState)({}),{data:j}=(0,ev.useVersionHistory)(e),{mutate:v,isPending:N}=(0,ev.useCreatePivot)(e);return j?.data?.length,(0,s.jsxs)(O.Dialog,{open:n,onOpenChange:e=>{o(e),e||f({})},children:[(0,s.jsx)(O.DialogTrigger,{asChild:!0,children:i||(0,s.jsxs)(l.Button,{variant:"shimmer-primary",size:"lg",className:"w-full sm:w-auto gap-2 font-bold",children:[(0,s.jsx)(eN,{className:"h-5 w-5"}),"Create Pivot"]})}),(0,s.jsxs)(O.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(O.DialogHeader,{children:[(0,s.jsxs)(O.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading",children:[(0,s.jsx)(eN,{className:"h-5 w-5 text-primary"}),"Create New Pivot"]}),(0,s.jsx)(O.DialogDescription,{children:"Archive the current version and evolve your idea. Your journey will be preserved."})]}),(0,s.jsxs)("form",{onSubmit:e=>{let s;e.preventDefault(),f({}),s={},d.trim()||m.trim()||(s.general="Please provide at least a new title or description"),p.trim()?p.trim().length<10&&(s.pivotReason="Pivot reason must be at least 10 characters"):s.pivotReason="Pivot reason is required",d.trim()&&d.trim().length<3&&(s.newTitle="Title must be at least 3 characters"),m.trim()&&m.trim().length<10&&(s.newDescription="Description must be at least 10 characters"),f(s),0===Object.keys(s).length&&v({new_title:d.trim()||void 0,new_description:m.trim()||void 0,pivot_reason:p.trim()},{onSuccess:()=>{o(!1),c(""),h(""),g(""),f({})},onError:e=>{try{let s=JSON.parse(e.message);if(s.errors){let e={};Object.entries(s.errors).forEach(([s,t])=>{e[s]=t.join(", ")}),f(e)}}catch{u.toast.error(e.message||"Failed to create pivot")}}})},children:[(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsxs)("div",{className:"rounded-lg border border-white/5 bg-white/2 p-3 flex items-start gap-3",children:[(0,s.jsx)(ey.default,{className:"mt-0.5 h-4 w-4 text-primary shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-foreground/90 leading-relaxed",children:["This action archives the current state as",(0,s.jsxs)(ew.Badge,{variant:"outline",className:"mx-1.5 border-primary/30 text-primary bg-primary/10",children:["v",j?.data?j.data.length+1:1]}),"and creates a new working version."]})]}),b.general&&(0,s.jsxs)(e_,{variant:"destructive",className:"border-rose-500/20 bg-rose-950/20 text-rose-200",children:[(0,s.jsx)(ey.default,{className:"h-4 w-4"}),(0,s.jsx)(eC,{children:b.general})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(G.Label,{className:"text-muted-foreground uppercase tracking-wider text-xs font-bold",children:"Archiving Version"}),(0,s.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/2 p-4",children:[(0,s.jsx)("p",{className:"font-heading font-semibold text-foreground text-lg",children:a}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(G.Label,{htmlFor:"new-title",children:["New Title ",(0,s.jsx)("span",{className:"text-muted-foreground text-xs font-normal ml-1",children:"(Optional)"})]}),(0,s.jsx)(k.Input,{id:"new-title",value:d,onChange:e=>c(e.target.value),placeholder:"Leave blank to keep current title",maxLength:200,className:(0,x.cn)("bg-white/5 border-white/10 focus-visible:ring-primary/50",b.newTitle&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),b.newTitle&&(0,s.jsx)("p",{className:"text-sm text-rose-500",children:b.newTitle})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(G.Label,{htmlFor:"new-description",children:["New Description ",(0,s.jsx)("span",{className:"text-muted-foreground text-xs font-normal ml-1",children:"(Optional)"})]}),(0,s.jsx)(_,{id:"new-description",value:m,onChange:e=>h(e.target.value),placeholder:"Leave blank to keep current description",rows:3,maxLength:5e3,className:(0,x.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50",b.newDescription&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),b.newDescription&&(0,s.jsx)("p",{className:"text-sm text-rose-500",children:b.newDescription})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(G.Label,{htmlFor:"pivot-reason",className:"text-foreground",children:["Why are you pivoting? ",(0,s.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,s.jsxs)("span",{className:(0,x.cn)("text-xs",p.length<10?"text-rose-400":"text-emerald-400"),children:[p.length,"/1000"]})]}),(0,s.jsx)(_,{id:"pivot-reason",value:p,onChange:e=>g(e.target.value),placeholder:"E.g., Customer interviews revealed nobody cares about X...",rows:3,maxLength:1e3,className:(0,x.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[100px]",b.pivotReason&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),b.pivotReason&&(0,s.jsx)("p",{className:"text-sm text-rose-500",children:b.pivotReason})]})]})]}),(0,s.jsx)(O.DialogFooter,{className:"flex-col gap-3 sm:gap-0",children:(0,s.jsxs)(l.Button,{type:"submit",variant:"shimmer-primary",disabled:N,className:"w-full font-bold",children:[N&&(0,s.jsx)(eb.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm & Create Pivot"]})})]})]})]})}let eD=(0,f.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var eI=e.i(48425),eT="horizontal",eL=["horizontal","vertical"],eF=t.forwardRef((e,t)=>{var a;let{decorative:r,orientation:i=eT,...l}=e,n=(a=i,eL.includes(a))?i:eT;return(0,s.jsx)(eI.Primitive.div,{"data-orientation":n,...r?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...l,ref:t})});function eP({className:e,orientation:t="horizontal",decorative:a=!0,...r}){return(0,s.jsx)(eF,{"data-slot":"separator",decorative:a,orientation:t,className:(0,x.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function eM({version:e,onClose:t}){return(0,s.jsx)(O.Dialog,{open:!0,onOpenChange:t,children:(0,s.jsxs)(O.DialogContent,{variant:"glass",className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(O.DialogHeader,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(O.DialogTitle,{children:e.is_current?"Current Version":`Version ${e.version_number}`}),e.is_current&&(0,s.jsx)(ew.Badge,{children:"Live"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,x.formatDistanceToNow)(e.created_at)})]}),(0,s.jsxs)("div",{className:"space-y-6 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Title"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:e.title})]}),(0,s.jsx)(eP,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Description"}),(0,s.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.description})]}),e.pivot_reason&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Reason for Pivot"}),(0,s.jsx)($.Card,{variant:"glass",className:"p-4 border-white/5 bg-white/5",children:(0,s.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.pivot_reason})})]})]}),(0,s.jsx)(eP,{}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Forge Level:"}),(0,s.jsxs)("span",{className:"ml-2 font-medium",children:["Level ",e.current_level_at_pivot]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Version:"}),(0,s.jsxs)("span",{className:"ml-2 font-medium",children:["#",e.version_number]})]})]})]})]})})}function eA({ideaId:e}){let{data:a,isLoading:r,isError:i}=(0,ev.useVersionHistory)(e),[l,o]=(0,t.useState)(null);if(r)return(0,s.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,s.jsx)(n.Skeleton,{className:"h-32 w-full rounded-2xl bg-white/5"},e))});if(i||!a?.data||0===a.data.length)return(0,s.jsxs)($.Card,{variant:"glass",className:"flex flex-col items-center justify-center border-dashed p-12 text-center bg-white/2",children:[(0,s.jsx)("div",{className:"mb-4 rounded-full bg-white/5 p-4",children:(0,s.jsx)(eN,{className:"h-8 w-8 text-muted-foreground/50"})}),(0,s.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"No version history yet"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground/60",children:"Versions are created when you pivot your idea."})]});let d=a.data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative space-y-6 pl-4",children:[(0,s.jsx)("div",{className:"absolute left-[34px] top-6 bottom-6 w-px bg-gradient-to-b from-primary/50 via-white/10 to-transparent"}),d.map((e,t)=>{d.length;let a=e.is_current;return(0,s.jsxs)("div",{className:"group relative flex gap-6",onClick:()=>o(e),children:[(0,s.jsx)("div",{className:"relative z-10 flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-white/10 bg-[#09090b] shadow-xl transition-all duration-300 group-hover:scale-110 group-hover:border-primary/50",children:a?(0,s.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary shadow-[0_0_10px_rgba(var(--primary),0.5)] animate-pulse"}):(0,s.jsx)("div",{className:"h-2.5 w-2.5 rounded-full bg-muted-foreground/30"})}),(0,s.jsxs)($.Card,{variant:a?void 0:"glass",className:(0,x.cn)("relative flex-1 cursor-pointer overflow-hidden p-5 transition-all duration-300 hover:shadow-2xl hover:-translate-y-0.5",a&&"border-primary/20 bg-primary/2 shadow-lg"),children:[a&&(0,s.jsx)("div",{className:"absolute right-0 top-0 h-16 w-16 -translate-y-8 translate-x-8 rounded-full bg-primary/10 blur-2xl"}),(0,s.jsx)("div",{className:"mb-3 flex items-center justify-between gap-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ew.Badge,{variant:a?"default":"outline",className:(0,x.cn)("rounded-md px-2 py-0.5 text-[10px] uppercase tracking-wider font-bold",!a&&"border-white/10 text-muted-foreground bg-transparent"),children:a?"Current Version":`v${e.version_number}`}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground/60 flex items-center gap-1",children:[(0,s.jsx)(eD,{className:"h-3 w-3"}),(0,x.formatDistanceToNow)(e.created_at)," ago"]})]})}),(0,s.jsx)("h4",{className:"mb-2 font-heading text-lg font-semibold text-foreground group-hover:text-primary transition-colors",children:e.title}),(0,s.jsx)("p",{className:"text-sm leading-relaxed text-muted-foreground line-clamp-2",children:e.description}),e.pivot_reason&&!a&&(0,s.jsxs)("div",{className:"mt-4 rounded-xl border border-white/5 bg-white/2 p-3",children:[(0,s.jsx)("p",{className:"mb-1 text-[10px] font-bold uppercase tracking-wider text-muted-foreground/70",children:"Reason for Pivot"}),(0,s.jsxs)("p",{className:"text-sm italic text-muted-foreground",children:['"',e.pivot_reason,'"']})]}),(0,s.jsx)("div",{className:"mt-4 flex items-center gap-2",children:(0,s.jsxs)(ew.Badge,{variant:"secondary",className:"bg-white/5 hover:bg-white/10 text-muted-foreground border-white/5",children:["Level ",e.current_level_at_pivot]})})]})]},e.id)})]}),l&&(0,s.jsx)(eM,{version:l,onClose:()=>o(null)})]})}eF.displayName="Separator",e.i(92574);var eB=e.i(6757);e.i(98798);var eO=e.i(33849);let eR=(0,f.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);function ez({ideaId:e,currentTitle:a,currentDescription:r,trigger:i,open:n,onOpenChange:d}){let[c,m]=(0,t.useState)(!1),[u,h]=(0,t.useState)(a),[p,g]=(0,t.useState)(r),[b,f]=(0,t.useState)({}),{mutate:j,isPending:v}=(0,o.useUpdateIdea)(e),N=void 0!==n?n:c,y=d||m;return(0,t.useEffect)(()=>{N&&(h(a),g(r),f({}))},[N,a,r]),(0,s.jsxs)(O.Dialog,{open:N,onOpenChange:e=>{y(e),e||f({})},children:[i&&(0,s.jsx)(O.DialogTrigger,{asChild:!0,children:i}),(0,s.jsxs)(O.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(O.DialogHeader,{children:[(0,s.jsxs)(O.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading",children:[(0,s.jsx)(eR,{className:"h-5 w-5 text-primary"}),"Edit Idea"]}),(0,s.jsx)(O.DialogDescription,{children:"Update your idea's title and description."})]}),(0,s.jsxs)("form",{onSubmit:e=>{let s;if(e.preventDefault(),f({}),s={},u.trim()?u.trim().length<3&&(s.title="Title must be at least 3 characters"):s.title="Title is required",p.trim()?p.trim().length<10&&(s.description="Description must be at least 10 characters"):s.description="Description is required",f(s),0!==Object.keys(s).length)return;let t={};(u.trim()!==a&&(t.title=u.trim()),p.trim()!==r&&(t.description=p.trim()),0===Object.keys(t).length)?y(!1):j(t,{onSuccess:()=>{y(!1)},onError:e=>{try{let s=JSON.parse(e.message);if(s.errors){let e={};Object.entries(s.errors).forEach(([s,t])=>{e[s]=t.join(", ")}),f(e)}}catch{f({general:e.message||"Failed to update idea"})}}})},children:[(0,s.jsxs)("div",{className:"grid gap-5 py-4",children:[b.general&&(0,s.jsx)("div",{className:"rounded-lg border border-rose-500/20 bg-rose-950/20 px-4 py-3 text-sm text-rose-200",children:b.general}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(G.Label,{htmlFor:"edit-title",className:"text-foreground",children:["Title ",(0,s.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,s.jsx)(k.Input,{id:"edit-title",value:u,onChange:e=>h(e.target.value),placeholder:"A compelling title for your idea",maxLength:200,className:(0,x.cn)("bg-white/5 border-white/10 focus-visible:ring-primary/50",b.title&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),b.title&&(0,s.jsx)("p",{className:"text-sm text-rose-500",children:b.title}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[u.length,"/200"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(G.Label,{htmlFor:"edit-description",className:"text-foreground",children:["Description ",(0,s.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,s.jsx)(_,{id:"edit-description",value:p,onChange:e=>g(e.target.value),placeholder:"Describe your idea in detail...",rows:6,maxLength:5e3,className:(0,x.cn)("resize-none bg-white/5 border-white/10 focus-visible:ring-primary/50 min-h-[150px]",b.description&&"border-rose-500/50 focus-visible:ring-rose-500/50")}),b.description&&(0,s.jsx)("p",{className:"text-sm text-rose-500",children:b.description}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[p.length,"/5000"]})]})]}),(0,s.jsxs)(O.DialogFooter,{className:"flex-col gap-3 sm:flex-row sm:gap-2",children:[(0,s.jsx)(l.Button,{type:"button",variant:"ghost",onClick:()=>y(!1),disabled:v,className:"w-full sm:w-auto",children:"Cancel"}),(0,s.jsxs)(l.Button,{type:"submit",variant:"shimmer-primary",disabled:v,className:"w-full sm:w-auto font-bold",children:[v&&(0,s.jsx)(eb.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})]})]})}var eH=e.i(27612),ey=ey;function eW({ideaId:e,ideaTitle:r,trigger:i,open:n,onOpenChange:d}){let c=(0,a.useRouter)(),[m,x]=(0,t.useState)(!1),{mutate:u,isPending:h}=(0,o.useDeleteIdea)(),p=d||x;return(0,s.jsxs)(O.Dialog,{open:void 0!==n?n:m,onOpenChange:p,children:[i&&(0,s.jsx)(O.DialogTrigger,{asChild:!0,children:i}),(0,s.jsxs)(O.DialogContent,{className:"max-w-md",children:[(0,s.jsxs)(O.DialogHeader,{children:[(0,s.jsxs)(O.DialogTitle,{className:"flex items-center gap-2 text-xl font-heading text-rose-500",children:[(0,s.jsx)(eH.Trash2,{className:"h-5 w-5"}),"Delete Idea"]}),(0,s.jsx)(O.DialogDescription,{className:"text-foreground/80",children:"Are you sure you want to delete this idea?"})]}),(0,s.jsx)("div",{className:"py-4",children:(0,s.jsx)("div",{className:"rounded-xl border border-rose-500/20 bg-rose-950/20 p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(ey.default,{className:"h-5 w-5 text-rose-500 shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:"This action cannot be undone"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Deleting ",(0,s.jsxs)("span",{className:"font-semibold text-foreground",children:['"',r,'"']})," will permanently remove:"]}),(0,s.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All version history and pivots"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All collaborators and invites"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-1 w-1 rounded-full bg-rose-500"}),"All comments and votes"]})]})]})]})})}),(0,s.jsxs)(O.DialogFooter,{className:"flex-col gap-3 sm:flex-row sm:gap-2",children:[(0,s.jsx)(l.Button,{type:"button",variant:"ghost",onClick:()=>p(!1),disabled:h,className:"w-full sm:w-auto",children:"Cancel"}),(0,s.jsxs)(l.Button,{type:"button",variant:"destructive",onClick:()=>{u(e,{onSuccess:()=>{p(!1),c.push("/")}})},disabled:h,className:"w-full sm:w-auto font-bold bg-rose-600 hover:bg-rose-700",children:[h&&(0,s.jsx)(eb.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete Forever"]})]})]})]})}var eE=e.i(23585),eV=e.i(74886);let e$=(0,f.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var eq=e.i(70756),eU=e.i(28876),eG=e.i(67594);function eK({ideaId:e,ideaTitle:r,ideaDescription:i,canEdit:n,canDelete:o,visibility:d}){let[c,m]=(0,t.useState)(!1),[x,h]=(0,t.useState)(!1),p=(0,a.useRouter)(),g=async()=>{let s=(0,eG.createClient)(),t="public"===d?"private":"public",{error:a}=await s.from("ideas").update({visibility:t}).eq("id",e);a?u.toast.error("Failed to update visibility"):(u.toast.success(`Idea is now ${t}`),p.refresh())},b=()=>{let s=`${window.location.origin}/share/${e}`;navigator.clipboard.writeText(s),u.toast.success("Link copied to clipboard!")};return n||o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eU.DropdownMenu,{children:[(0,s.jsx)(eU.DropdownMenuTrigger,{asChild:!0,children:(0,s.jsxs)(l.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/20 text-muted-foreground hover:text-foreground transition-all",children:[(0,s.jsx)(eE.MoreVertical,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Open idea menu"})]})}),(0,s.jsxs)(eU.DropdownMenuContent,{align:"end",className:"w-48 bg-[#09090b]/95 backdrop-blur-xl border-white/10",children:[(0,s.jsxs)(eU.DropdownMenuItem,{onClick:b,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(eV.Copy,{className:"h-4 w-4"}),"Share"]}),(0,s.jsxs)(eU.DropdownMenuItem,{onClick:b,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(eV.Copy,{className:"h-4 w-4"}),"Share Link"]}),(n||o)&&(0,s.jsx)(eU.DropdownMenuSeparator,{className:"bg-white/10"}),n&&(0,s.jsx)(eU.DropdownMenuItem,{onClick:g,className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:"public"===d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eq.Lock,{className:"h-4 w-4"}),"Make Private"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e$,{className:"h-4 w-4"}),"Make Public"]})}),n&&(0,s.jsxs)(eU.DropdownMenuItem,{onClick:()=>m(!0),className:"cursor-pointer gap-2 text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(eR,{className:"h-4 w-4"}),"Edit Idea"]}),o&&(0,s.jsxs)(eU.DropdownMenuItem,{onClick:()=>h(!0),className:"cursor-pointer gap-2 text-rose-500 focus:text-rose-500 focus:bg-rose-500/10",children:[(0,s.jsx)(eH.Trash2,{className:"h-4 w-4"}),"Delete Idea"]})]})]}),(0,s.jsx)(ez,{ideaId:e,currentTitle:r,currentDescription:i,open:c,onOpenChange:m}),(0,s.jsx)(eW,{ideaId:e,ideaTitle:r,open:x,onOpenChange:h})]}):null}function eJ({id:e}){return e&&"undefined"!==e?(0,s.jsx)(eY,{id:e}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"mx-auto max-w-7xl px-6 pt-32 pb-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border border-dashed border-border bg-card/50 p-12 text-center",children:[(0,s.jsx)("p",{className:"font-display text-xl font-semibold text-foreground",children:"Invalid idea"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"This link appears to be broken."}),(0,s.jsx)(l.Button,{variant:"mint",size:"pill",asChild:!0,className:"mt-6",children:(0,s.jsx)("a",{href:"/",children:"Go home"})})]})})]})}function eY({id:e}){let{data:t,isLoading:a,isError:i,error:n}=(0,o.useIdea)(e),{user:d,isAuthenticated:c,loading:x}=(0,m.useAuth)();if(a)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8 min-h-[calc(100vh-4rem)]",children:(0,s.jsx)(eZ,{})})]});if(i||!t)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Header,{}),(0,s.jsx)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[2rem] border border-dashed border-border bg-card/50 p-12 text-center",children:[(0,s.jsx)("p",{className:"font-display text-xl font-semibold text-foreground",children:"Idea not found"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:n?.message||"This idea may have been deleted."}),(0,s.jsx)(l.Button,{variant:"mint",size:"pill",asChild:!0,className:"mt-6",children:(0,s.jsx)("a",{href:"/",children:"Go home"})})]})})]});let u=t.data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Header,{}),(0,s.jsxs)("main",{className:"mx-auto w-full max-w-[1600px] px-4 md:px-8 pt-32 pb-8 min-h-[calc(100vh-4rem)]",children:[(0,s.jsx)(eQ,{idea:u,user:d,isAuthenticated:c,authLoading:x}),(0,s.jsx)(eX,{ideaId:e,isAuthenticated:c,authLoading:x})]})]})}function eQ({idea:e,user:r,isAuthenticated:n,authLoading:o}){let c=(0,a.useRouter)(),{mutate:m,isPending:p}=(0,d.useVote)(e.id),{mutate:g,isPending:b}=(0,d.useRemoveVote)(e.id),{data:f}=(0,C.useIdeaLevels)(e.id),[j,v]=(0,t.useState)("journey"),N=n&&r?.id===e.user_id,{canEdit:y,canManage:k,isCollaborator:_}=(0,eO.useCollaboratorRole)(e.id,r?.id,N),S=e.current_level||0,[D,I]=(0,t.useState)(S),[T,L]=(0,t.useState)(!1),[F,P]=(0,t.useState)(S);(0,t.useEffect)(()=>{S>F?(L(!0),I(S),P(S)):S!==F&&(I(S),P(S))},[S,F]);let M=e.user_vote?.value,A=(e.upvotes_count??0)-(e.downvotes_count??0),O=s=>{if(!o){if(!n){u.toast.info("Please sign in to vote"),c.push(`/login?redirectTo=/ideas/${e.id}`);return}M===s?g():m(s)}};return(0,s.jsxs)("article",{className:"group relative mb-8 overflow-hidden rounded-[2.5rem] bg-[#09090b]/80 border border-white/5 shadow-2xl backdrop-blur-md transition-all",children:[(0,s.jsx)("div",{className:"absolute -right-40 -top-40 h-96 w-96 rounded-full bg-[#7877c6]/10 blur-[120px] pointer-events-none"}),(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pb-0",children:[(0,s.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col sm:flex-row gap-4 sm:gap-6 sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,s.jsxs)(i.Avatar,{className:"h-10 w-10 sm:h-12 md:h-14 sm:w-12 md:w-14 border-2 border-white/10 shadow-md shrink-0",children:[(0,s.jsx)(i.AvatarImage,{src:e.author?.avatar_url||void 0}),(0,s.jsx)(i.AvatarFallback,{className:"bg-white/10 text-foreground text-sm sm:text-base",children:(0,x.getInitials)(e.author?.full_name)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-0.5 min-w-0",children:[(0,s.jsx)("span",{className:"text-base sm:text-lg font-bold text-foreground tracking-tight truncate",children:e.author?.full_name||"Anonymous"}),(0,s.jsx)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:(0,x.formatDistanceToNow)(e.created_at)})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto] sm:flex sm:flex-wrap items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[y&&(0,s.jsx)(eS,{ideaId:e.id,currentTitle:e.title,currentDescription:e.description}),(0,s.jsx)(ef,{ideaId:e.id}),(0,s.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"gap-2 h-10 w-10 sm:w-auto sm:px-4 rounded-full bg-white/5 border border-white/5 hover:bg-white/10 hover:border-white/20 text-muted-foreground hover:text-foreground transition-all text-sm justify-center",onClick:()=>{let s=`${window.location.origin}/share/${e.id}`;navigator.clipboard.writeText(s),u.toast.success("Public link copied!")},children:[(0,s.jsx)(h.Share2,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Share"})]}),(0,s.jsx)(eK,{ideaId:e.id,ideaTitle:e.title,ideaDescription:e.description,visibility:e.visibility||"public",canEdit:y,canDelete:k})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:gap-8 lg:grid-cols-[1fr_300px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"mb-4 md:mb-6 font-display text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-[1.1] text-foreground tracking-tight drop-shadow-sm",children:e.title}),(0,s.jsx)("p",{className:"mb-6 text-sm sm:text-base md:text-lg text-muted-foreground leading-relaxed whitespace-pre-wrap",children:e.description}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 rounded-full border border-border bg-background/50 p-1 sm:p-1.5 shadow-sm",children:[(0,s.jsx)("button",{onClick:()=>O(1),disabled:p||b||o,className:`flex items-center justify-center rounded-full w-8 h-8 sm:w-9 sm:h-9 transition-colors hover:bg-muted ${1===M?"bg-green-500/10 text-green-600 hover:bg-green-500/20":"text-muted-foreground"}`,children:(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:1===M?"fill-current":"",children:(0,s.jsx)("path",{d:"M18 15l-6-6-6 6"})})}),(0,s.jsx)("span",{className:"min-w-6 sm:min-w-8 text-center text-sm sm:text-base font-bold text-foreground",children:A>0?`+${A}`:A}),(0,s.jsx)("button",{onClick:()=>O(-1),disabled:p||b||o,className:`flex items-center justify-center rounded-full w-8 h-8 sm:w-9 sm:h-9 transition-colors hover:bg-muted ${-1===M?"bg-red-500/10 text-red-600 hover:bg-red-500/20":"text-muted-foreground"}`,children:(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",className:-1===M?"fill-current":"",children:(0,s.jsx)("path",{d:"M6 9l6 6 6-6"})})})]}),(0,s.jsxs)("span",{className:"flex items-center gap-2 text-xs sm:text-sm font-medium text-muted-foreground",children:[(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,s.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),e.comments_count??0," comments"]})]})]}),(0,s.jsx)("div",{className:"lg:pt-2",children:(0,s.jsx)(ej,{ideaId:e.id})})]}),(0,s.jsx)("div",{className:"-mx-4 sm:mx-0 mt-8 md:mt-12 border-b border-white/10",children:(0,s.jsx)("div",{className:"flex items-center gap-4 sm:gap-6 md:gap-8 overflow-x-auto scrollbar-hide px-4 sm:px-2",children:["journey","history",...N||_?["team"]:[]].map(e=>(0,s.jsxs)("button",{onClick:()=>v(e),className:(0,x.cn)("pb-3 md:pb-4 text-xs sm:text-sm font-bold tracking-wide uppercase transition-all relative whitespace-nowrap shrink-0",j===e?"text-foreground":"text-muted-foreground/60 hover:text-foreground/80"),children:[e.charAt(0).toUpperCase()+e.slice(1),j===e&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary shadow-[0_0_10px_rgba(var(--primary),0.5)]"})]},e))})})]}),(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pt-6 md:pt-8",children:["journey"===j?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(w,{currentLevel:S,selectedLevel:D,onSelectLevel:I}),(0,s.jsxs)("div",{className:"mt-8 rounded-2xl bg-muted/30 p-6 border border-border/50",children:[0===D&&(0,s.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"The Spark"}),(0,s.jsx)("p",{children:"The initial concept. See the Description tab for details."})]}),1===D&&(0,s.jsx)(B,{ideaId:e.id,levelData:f?.data?.find(e=>1===e.level_number),isLocked:S<0,isOwner:y,isAuthenticated:n}),2===D&&(0,s.jsx)(W,{ideaId:e.id,levelData:f?.data?.find(e=>2===e.level_number),isLocked:S<1,isOwner:y,isAuthenticated:n}),3===D&&(0,s.jsx)(E,{ideaId:e.id,levelData:f?.data?.find(e=>3===e.level_number),isLocked:S<2,isOwner:y,isAuthenticated:n}),4===D&&(0,s.jsx)(V,{ideaId:e.id,levelData:f?.data?.find(e=>4===e.level_number),isLocked:S<3,isOwner:y,isAuthenticated:n}),5===D&&(0,s.jsx)(U,{ideaId:e.id,levelData:f?.data?.find(e=>5===e.level_number),isLocked:S<4,isOwner:y})]})]}):"history"===j?(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(eA,{ideaId:e.id})}):(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)(eB.CollaboratorSettings,{ideaId:e.id,isOwner:k,currentUserId:r?.id})}),(0,s.jsx)(H,{isOpen:T,onClose:()=>L(!1),level:S})]})]})}function eX({ideaId:e,isAuthenticated:r,authLoading:o}){let d=(0,a.useRouter)(),{data:m,fetchNextPage:h,hasNextPage:p,isFetchingNextPage:g,isLoading:b}=(0,c.useComments)(e),{mutate:f,isPending:j}=(0,c.useCreateComment)(e),[v,N]=(0,t.useState)(""),y=m?.pages.flatMap(e=>e.data)??[];return(0,s.jsxs)("section",{className:"max-w-5xl mx-auto mt-12",children:[(0,s.jsx)("h2",{className:"mb-6 font-display text-2xl font-bold text-foreground",children:"Comments"}),(0,s.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),v.trim()){if(!r){u.toast.info("Please sign in to comment"),d.push(`/login?redirectTo=/ideas/${e}`);return}f({content:v.trim()},{onSuccess:()=>{N(""),u.toast.success("Comment added!")}})}},className:"mb-8 flex gap-3",children:[(0,s.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:r?"Write a comment...":"Sign in to comment...",className:"flex h-12 flex-1 rounded-full border border-input bg-background px-6 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",disabled:j||o}),(0,s.jsx)(l.Button,{type:"submit",variant:"mint",size:"pill",disabled:j||!v.trim()||o,className:"h-12 px-8",children:j?"...":"Post"})]}),b?(0,s.jsx)("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"flex flex-col items-center gap-2",children:(0,s.jsx)(n.Skeleton,{className:"h-10 w-10 rounded-full"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(n.Skeleton,{className:"h-4 w-24"})}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-full"})]})]},e))}):0===y.length?(0,s.jsx)("div",{className:"py-12 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No comments yet. Be the first to comment!"})}):(0,s.jsxs)("div",{className:"space-y-8",children:[y.map(e=>(0,s.jsxs)("div",{className:"group flex gap-4",children:[(0,s.jsxs)(i.Avatar,{className:"h-10 w-10 border border-border mt-1",children:[(0,s.jsx)(i.AvatarImage,{src:e.author?.avatar_url||void 0}),(0,s.jsx)(i.AvatarFallback,{children:(0,x.getInitials)(e.author?.full_name)})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-foreground text-sm",children:e.author?.full_name||"Anonymous"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",(0,x.formatDistanceToNow)(e.created_at)]})]}),(0,s.jsx)("p",{className:"text-foreground/90 leading-relaxed text-sm",children:e.content})]})]},e.id)),p&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>h(),disabled:g,className:"w-full text-muted-foreground hover:text-foreground",children:g?"Loading...":"Load more comments"})]})]})}function eZ(){return(0,s.jsxs)("article",{className:"group relative mb-8 overflow-hidden rounded-[2.5rem] bg-[#09090b]/80 border border-white/5 shadow-2xl backdrop-blur-md",children:[(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pb-0",children:[(0,s.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col sm:flex-row gap-4 sm:gap-6 sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,s.jsx)(n.Skeleton,{className:"h-10 w-10 sm:h-12 md:h-14 sm:w-12 md:w-14 rounded-full"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,s.jsx)(n.Skeleton,{className:"h-5 w-32 sm:w-40"}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-20 sm:w-24"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-[1fr_auto] sm:flex items-center gap-2 sm:gap-3 w-full sm:w-auto",children:[(0,s.jsx)(n.Skeleton,{className:"h-10 sm:h-11 flex-1 sm:flex-initial sm:w-36 rounded-full"}),(0,s.jsx)(n.Skeleton,{className:"h-10 w-10 rounded-full"})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:gap-8 lg:grid-cols-[1fr_300px]",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.Skeleton,{className:"mb-4 md:mb-6 h-8 sm:h-10 md:h-12 lg:h-14 w-full sm:w-4/5"}),(0,s.jsxs)("div",{className:"space-y-2 mb-6",children:[(0,s.jsx)(n.Skeleton,{className:"h-4 sm:h-5 w-full"}),(0,s.jsx)(n.Skeleton,{className:"h-4 sm:h-5 w-full"}),(0,s.jsx)(n.Skeleton,{className:"h-4 sm:h-5 w-3/4"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,s.jsx)(n.Skeleton,{className:"h-10 w-24 sm:w-28 rounded-full"}),(0,s.jsx)(n.Skeleton,{className:"h-5 w-24 sm:w-28"})]})]}),(0,s.jsx)("div",{className:"lg:pt-2",children:(0,s.jsxs)("div",{className:"rounded-2xl border border-white/5 bg-white/5 p-4 sm:p-6 md:p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(n.Skeleton,{className:"h-4 w-4"}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-28 sm:w-32"})]}),(0,s.jsx)(n.Skeleton,{className:"mb-1 h-8 sm:h-10 w-16 sm:w-20"}),(0,s.jsx)(n.Skeleton,{className:"mb-4 h-3 w-32 sm:w-48"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(n.Skeleton,{className:"h-3 w-3"}),(0,s.jsx)(n.Skeleton,{className:"h-4 w-24 sm:w-28"})]}),(0,s.jsx)(n.Skeleton,{className:"h-10 sm:h-12 w-full rounded-xl"})]})})]}),(0,s.jsx)("div",{className:"-mx-4 sm:mx-0 mt-8 md:mt-12 border-b border-white/10",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6 md:gap-8 px-4 sm:px-2",children:[(0,s.jsx)(n.Skeleton,{className:"h-8 w-16 sm:w-20"}),(0,s.jsx)(n.Skeleton,{className:"h-8 w-16 sm:w-20"})]})})]}),(0,s.jsx)("div",{className:"p-4 sm:p-6 md:p-8 lg:p-12 pt-6 md:pt-8",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(n.Skeleton,{className:"h-16 sm:h-20 w-full rounded-xl"}),(0,s.jsx)(n.Skeleton,{className:"h-16 sm:h-20 w-full rounded-xl"})]})})]})}e.s(["default",()=>eJ],17261)}]);